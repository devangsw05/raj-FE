import './polyfills.server.mjs';
import{$ as Uf,A as Ts,B as Nf,C as de,D as he,E as lr,F as Mf,G as un,H as bs,I as We,J as Is,K as El,L as As,M as Ds,N as Rs,O as wl,P as kf,Q as Pf,R as Ff,S as Lf,U as Bf,_ as Vf,a as Sf,aa as Cl,b as Ef,c as wf,ca as qf,d as ws,da as zf,e as Cs,ea as jf,f as Cf,fa as Gf,g as pl,ga as Hf,h as or,ha as $f,i as Tf,ia as Wf,j as bf,ja as Kf,k as If,ka as Qf,l as Af,m as gl,n as ml,na as Yf,o as yl,p as ar,q as vl,r as Df,s as Rf,t as Of,ta as Jf,u as mt,v as ze,w as _l,x as xf,y as li,z as Sl}from"./chunk-3TX22TOE.mjs";import{a as At,b as cn,c as W,e as g,g as _f,h as k}from"./chunk-VVCT4QZE.mjs";var H=g(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=it.DEFAULT_MAX_SEND_MESSAGE_LENGTH=it.Propagate=it.LogVerbosity=it.Status=void 0;var xg=function(t){return t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t}(xg||(it.Status=xg={})),Ng=function(t){return t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.ERROR=2]="ERROR",t[t.NONE=3]="NONE",t}(Ng||(it.LogVerbosity=Ng={})),Mg=function(t){return t[t.DEADLINE=1]="DEADLINE",t[t.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",t[t.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",t[t.CANCELLATION=8]="CANCELLATION",t[t.DEFAULTS=65535]="DEFAULTS",t}(Mg||(it.Propagate=Mg={}));it.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1;it.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4*1024*1024});var Ac=g((Xx,uw)=>{uw.exports={name:"@grpc/grpc-js",version:"1.9.14",description:"gRPC Library for Node - pure JS implementation",homepage:"https://grpc.io/",repository:"https://github.com/grpc/grpc-node/tree/master/packages/grpc-js",main:"build/src/index.js",engines:{node:"^8.13.0 || >=10.10.0"},keywords:[],author:{name:"Google Inc."},types:"build/src/index.d.ts",license:"Apache-2.0",devDependencies:{"@types/gulp":"^4.0.6","@types/gulp-mocha":"0.0.32","@types/lodash":"^4.14.186","@types/mocha":"^5.2.6","@types/ncp":"^2.0.1","@types/pify":"^3.0.2","@types/semver":"^7.3.9","@typescript-eslint/eslint-plugin":"^5.59.11","@typescript-eslint/parser":"^5.59.11","@typescript-eslint/typescript-estree":"^5.59.11","clang-format":"^1.0.55",eslint:"^8.42.0","eslint-config-prettier":"^8.8.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^4.2.1",execa:"^2.0.3",gulp:"^4.0.2","gulp-mocha":"^6.0.0",lodash:"^4.17.4",madge:"^5.0.1","mocha-jenkins-reporter":"^0.4.1",ncp:"^2.0.0",pify:"^4.0.1",prettier:"^2.8.8",rimraf:"^3.0.2",semver:"^7.3.5","ts-node":"^10.9.1",typescript:"^5.1.3"},contributors:[{name:"Google Inc."}],scripts:{build:"npm run compile",clean:"rimraf ./build",compile:"tsc -p .",format:'clang-format -i -style="{Language: JavaScript, BasedOnStyle: Google, ColumnLimit: 80}" src/*.ts test/*.ts',lint:"eslint src/*.ts test/*.ts",prepare:"npm run generate-types && npm run compile",test:"gulp test",check:"npm run lint",fix:"eslint --fix src/*.ts test/*.ts",pretest:"npm run generate-types && npm run generate-test-types && npm run compile",posttest:"npm run check && madge -c ./build/src","generate-types":"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --includeDirs proto/ --include-dirs test/fixtures/ -O src/generated/ --grpcLib ../index channelz.proto","generate-test-types":"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --include-dirs test/fixtures/ -O test/generated/ --grpcLib ../../src/index test_service.proto"},dependencies:{"@grpc/proto-loader":"^0.7.8","@types/node":">=12.12.47"},files:["src/**/*.ts","build/src/**/*.{js,d.ts,js.map}","proto/*.proto","LICENSE","deps/envoy-api/envoy/api/v2/**/*.proto","deps/envoy-api/envoy/config/**/*.proto","deps/envoy-api/envoy/service/**/*.proto","deps/envoy-api/envoy/type/**/*.proto","deps/udpa/udpa/**/*.proto","deps/googleapis/google/api/*.proto","deps/googleapis/google/rpc/*.proto","deps/protoc-gen-validate/validate/**/*.proto"]}});var ce=g(Ge=>{"use strict";var Dc,Rc,Oc,xc;Object.defineProperty(Ge,"__esModule",{value:!0});Ge.isTracerEnabled=Ge.trace=Ge.log=Ge.setLoggerVerbosity=Ge.setLogger=Ge.getLogger=void 0;var pn=H(),dw=W("process"),hw=Ac().version,fw={error:(t,...e)=>{console.error("E "+t,...e)},info:(t,...e)=>{console.error("I "+t,...e)},debug:(t,...e)=>{console.error("D "+t,...e)}},Kn=fw,yr=pn.LogVerbosity.ERROR,pw=(Rc=(Dc=process.env.GRPC_NODE_VERBOSITY)!==null&&Dc!==void 0?Dc:process.env.GRPC_VERBOSITY)!==null&&Rc!==void 0?Rc:"";switch(pw.toUpperCase()){case"DEBUG":yr=pn.LogVerbosity.DEBUG;break;case"INFO":yr=pn.LogVerbosity.INFO;break;case"ERROR":yr=pn.LogVerbosity.ERROR;break;case"NONE":yr=pn.LogVerbosity.NONE;break;default:}var gw=()=>Kn;Ge.getLogger=gw;var mw=t=>{Kn=t};Ge.setLogger=mw;var yw=t=>{yr=t};Ge.setLoggerVerbosity=yw;var vw=(t,...e)=>{let n;if(t>=yr){switch(t){case pn.LogVerbosity.DEBUG:n=Kn.debug;break;case pn.LogVerbosity.INFO:n=Kn.info;break;case pn.LogVerbosity.ERROR:n=Kn.error;break}n||(n=Kn.error),n&&n.bind(Kn)(...e)}};Ge.log=vw;var _w=(xc=(Oc=process.env.GRPC_NODE_TRACE)!==null&&Oc!==void 0?Oc:process.env.GRPC_TRACE)!==null&&xc!==void 0?xc:"",Nc=new Set,kg=new Set;for(let t of _w.split(","))t.startsWith("-")?kg.add(t.substring(1)):Nc.add(t);var Sw=Nc.has("all");function Ew(t,e,n){Pg(e)&&(0,Ge.log)(t,new Date().toISOString()+" | v"+hw+" "+dw.pid+" | "+e+" | "+n)}Ge.trace=Ew;function Pg(t){return!kg.has(t)&&(Sw||Nc.has(t))}Ge.isTracerEnabled=Pg});var so=g(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.getErrorCode=vr.getErrorMessage=void 0;function ww(t){return t instanceof Error?t.message:String(t)}vr.getErrorMessage=ww;function Cw(t){return typeof t=="object"&&t!==null&&"code"in t&&typeof t.code=="number"?t.code:null}vr.getErrorCode=Cw});var He=g(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.Metadata=void 0;var Tw=ce(),bw=H(),Iw=so(),Aw=/^[0-9a-z_.-]+$/,Dw=/^[ -~]*$/;function Rw(t){return Aw.test(t)}function Ow(t){return Dw.test(t)}function Lg(t){return t.endsWith("-bin")}function xw(t){return!t.startsWith("grpc-")}function oo(t){return t.toLowerCase()}function Fg(t,e){if(!Rw(t))throw new Error('Metadata key "'+t+'" contains illegal characters');if(e!=null)if(Lg(t)){if(!Buffer.isBuffer(e))throw new Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer(e))throw new Error("keys that don't end with '-bin' must have String values");if(!Ow(e))throw new Error('Metadata string value "'+e+'" contains illegal characters')}}var Mc=class t{constructor(e={}){this.internalRepr=new Map,this.options=e}set(e,n){e=oo(e),Fg(e,n),this.internalRepr.set(e,[n])}add(e,n){e=oo(e),Fg(e,n);let r=this.internalRepr.get(e);r===void 0?this.internalRepr.set(e,[n]):r.push(n)}remove(e){e=oo(e),this.internalRepr.delete(e)}get(e){return e=oo(e),this.internalRepr.get(e)||[]}getMap(){let e={};for(let[n,r]of this.internalRepr)if(r.length>0){let i=r[0];e[n]=Buffer.isBuffer(i)?Buffer.from(i):i}return e}clone(){let e=new t(this.options),n=e.internalRepr;for(let[r,i]of this.internalRepr){let s=i.map(o=>Buffer.isBuffer(o)?Buffer.from(o):o);n.set(r,s)}return e}merge(e){for(let[n,r]of e.internalRepr){let i=(this.internalRepr.get(n)||[]).concat(r);this.internalRepr.set(n,i)}}setOptions(e){this.options=e}getOptions(){return this.options}toHttp2Headers(){let e={};for(let[n,r]of this.internalRepr)e[n]=r.map(Nw);return e}toJSON(){let e={};for(let[n,r]of this.internalRepr)e[n]=r;return e}static fromHttp2Headers(e){let n=new t;for(let r of Object.keys(e)){if(r.charAt(0)===":")continue;let i=e[r];try{Lg(r)?Array.isArray(i)?i.forEach(s=>{n.add(r,Buffer.from(s,"base64"))}):i!==void 0&&(xw(r)?i.split(",").forEach(s=>{n.add(r,Buffer.from(s.trim(),"base64"))}):n.add(r,Buffer.from(i,"base64"))):Array.isArray(i)?i.forEach(s=>{n.add(r,s)}):i!==void 0&&n.add(r,i)}catch(s){let o=`Failed to add metadata entry ${r}: ${i}. ${(0,Iw.getErrorMessage)(s)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,Tw.log)(bw.LogVerbosity.ERROR,o)}}return n}};ao.Metadata=Mc;var Nw=t=>Buffer.isBuffer(t)?t.toString("base64"):t});var Bc=g(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});lo.CallCredentials=void 0;var Lc=He();function Mw(t){return"getRequestHeaders"in t&&typeof t.getRequestHeaders=="function"}var _r=class t{static createFromMetadataGenerator(e){return new Pc(e)}static createFromGoogleCredential(e){return t.createFromMetadataGenerator((n,r)=>{let i;Mw(e)?i=e.getRequestHeaders(n.service_url):i=new Promise((s,o)=>{e.getRequestMetadata(n.service_url,(a,l)=>{if(a){o(a);return}if(!l){o(new Error("Headers not set by metadata plugin"));return}s(l)})}),i.then(s=>{let o=new Lc.Metadata;for(let a of Object.keys(s))o.add(a,s[a]);r(null,o)},s=>{r(s)})})}static createEmpty(){return new Fc}};lo.CallCredentials=_r;var kc=class t extends _r{constructor(e){super(),this.creds=e}generateMetadata(e){return k(this,null,function*(){let n=new Lc.Metadata,r=yield Promise.all(this.creds.map(i=>i.generateMetadata(e)));for(let i of r)n.merge(i);return n})}compose(e){return new t(this.creds.concat([e]))}_equals(e){return this===e?!0:e instanceof t?this.creds.every((n,r)=>n._equals(e.creds[r])):!1}},Pc=class t extends _r{constructor(e){super(),this.metadataGenerator=e}generateMetadata(e){return new Promise((n,r)=>{this.metadataGenerator(e,(i,s)=>{s!==void 0?n(s):r(i)})})}compose(e){return new kc([this,e])}_equals(e){return this===e?!0:e instanceof t?this.metadataGenerator===e.metadataGenerator:!1}},Fc=class t extends _r{generateMetadata(e){return Promise.resolve(new Lc.Metadata)}compose(e){return e}_equals(e){return e instanceof t}}});var Uc=g(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.getDefaultRootsData=Sr.CIPHER_SUITES=void 0;var kw=W("fs");Sr.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;var Bg=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH,Vc=null;function Pw(){return Bg?(Vc===null&&(Vc=kw.readFileSync(Bg)),Vc):null}Sr.getDefaultRootsData=Pw});var ho=g(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.ChannelCredentials=void 0;var Fw=W("tls"),Lw=Bc(),Vg=Uc();function qc(t,e){if(t&&!(t instanceof Buffer))throw new TypeError(`${e}, if provided, must be a Buffer.`)}var Er=class{constructor(e){this.callCredentials=e||Lw.CallCredentials.createEmpty()}_getCallCredentials(){return this.callCredentials}static createSsl(e,n,r,i){var s;if(qc(e,"Root certificate"),qc(n,"Private key"),qc(r,"Certificate chain"),n&&!r)throw new Error("Private key must be given with accompanying certificate chain");if(!n&&r)throw new Error("Certificate chain must be given with accompanying private key");let o=(0,Fw.createSecureContext)({ca:(s=e??(0,Vg.getDefaultRootsData)())!==null&&s!==void 0?s:void 0,key:n??void 0,cert:r??void 0,ciphers:Vg.CIPHER_SUITES});return new co(o,i??{})}static createFromSecureContext(e,n){return new co(e,n??{})}static createInsecure(){return new zc}};uo.ChannelCredentials=Er;var zc=class t extends Er{constructor(e){super(e)}compose(e){throw new Error("Cannot compose insecure credentials")}_getConnectionOptions(){return null}_isSecure(){return!1}_equals(e){return e instanceof t}},co=class t extends Er{constructor(e,n){super(),this.secureContext=e,this.verifyOptions=n,this.connectionOptions={secureContext:e},n?.checkServerIdentity&&(this.connectionOptions.checkServerIdentity=n.checkServerIdentity)}compose(e){let n=this.callCredentials.compose(e);return new jc(this,n)}_getConnectionOptions(){return Object.assign({},this.connectionOptions)}_isSecure(){return!0}_equals(e){return this===e?!0:e instanceof t?this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity:!1}},jc=class t extends Er{constructor(e,n){super(n),this.channelCredentials=e}compose(e){let n=this.callCredentials.compose(e);return new t(this.channelCredentials,n)}_getConnectionOptions(){return this.channelCredentials._getConnectionOptions()}_isSecure(){return!0}_equals(e){return this===e?!0:e instanceof t?this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials):!1}}});var mn=g(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.validateLoadBalancingConfig=ke.getFirstUsableConfig=ke.isLoadBalancerNameRegistered=ke.createLoadBalancer=ke.registerDefaultLoadBalancerType=ke.registerLoadBalancerType=ke.createChildChannelControlHelper=void 0;function Bw(t,e){var n,r,i,s,o,a,l,c,d,h;return{createSubchannel:(r=(n=e.createSubchannel)===null||n===void 0?void 0:n.bind(e))!==null&&r!==void 0?r:t.createSubchannel.bind(t),updateState:(s=(i=e.updateState)===null||i===void 0?void 0:i.bind(e))!==null&&s!==void 0?s:t.updateState.bind(t),requestReresolution:(a=(o=e.requestReresolution)===null||o===void 0?void 0:o.bind(e))!==null&&a!==void 0?a:t.requestReresolution.bind(t),addChannelzChild:(c=(l=e.addChannelzChild)===null||l===void 0?void 0:l.bind(e))!==null&&c!==void 0?c:t.addChannelzChild.bind(t),removeChannelzChild:(h=(d=e.removeChannelzChild)===null||d===void 0?void 0:d.bind(e))!==null&&h!==void 0?h:t.removeChannelzChild.bind(t)}}ke.createChildChannelControlHelper=Bw;var gn={},Gc=null;function Vw(t,e,n){gn[t]={LoadBalancer:e,LoadBalancingConfig:n}}ke.registerLoadBalancerType=Vw;function Uw(t){Gc=t}ke.registerDefaultLoadBalancerType=Uw;function qw(t,e){let n=t.getLoadBalancerName();return n in gn?new gn[n].LoadBalancer(e):null}ke.createLoadBalancer=qw;function zw(t){return t in gn}ke.isLoadBalancerNameRegistered=zw;function jw(t,e=!1){for(let n of t)if(n.getLoadBalancerName()in gn)return n;return e&&Gc?new gn[Gc].LoadBalancingConfig:null}ke.getFirstUsableConfig=jw;function Gw(t){if(!(t!==null&&typeof t=="object"))throw new Error("Load balancing config must be an object");let e=Object.keys(t);if(e.length!==1)throw new Error("Provided load balancing config has multiple conflicting entries");let n=e[0];if(n in gn)return gn[n].LoadBalancingConfig.createFromJson(t[n]);throw new Error(`Unrecognized load balancing config name ${n}`)}ke.validateLoadBalancingConfig=Gw});var Hc=g(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.extractAndSelectServiceConfig=yn.validateServiceConfig=yn.validateRetryThrottling=void 0;var Hw=W("os"),fo=H(),$w=mn(),po=/^\d+(\.\d{1,9})?s$/,Ww="node";function Kw(t){if("service"in t&&t.service!==""){if(typeof t.service!="string")throw new Error(`Invalid method config name: invalid service: expected type string, got ${typeof t.service}`);if("method"in t&&t.method!==""){if(typeof t.method!="string")throw new Error(`Invalid method config name: invalid method: expected type string, got ${typeof t.service}`);return{service:t.service,method:t.method}}else return{service:t.service}}else{if("method"in t&&t.method!==void 0)throw new Error("Invalid method config name: method set with empty or unset service");return{}}}function Qw(t){if(!("maxAttempts"in t)||!Number.isInteger(t.maxAttempts)||t.maxAttempts<2)throw new Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in t)||typeof t.initialBackoff!="string"||!po.test(t.initialBackoff))throw new Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer followed by s");if(!("maxBackoff"in t)||typeof t.maxBackoff!="string"||!po.test(t.maxBackoff))throw new Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer followed by s");if(!("backoffMultiplier"in t)||typeof t.backoffMultiplier!="number"||t.backoffMultiplier<=0)throw new Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!("retryableStatusCodes"in t&&Array.isArray(t.retryableStatusCodes)))throw new Error("Invalid method config retry policy: retryableStatusCodes is required");if(t.retryableStatusCodes.length===0)throw new Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(let e of t.retryableStatusCodes)if(typeof e=="number"){if(!Object.values(fo.Status).includes(e))throw new Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else if(typeof e=="string"){if(!Object.values(fo.Status).includes(e.toUpperCase()))throw new Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}else throw new Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");return{maxAttempts:t.maxAttempts,initialBackoff:t.initialBackoff,maxBackoff:t.maxBackoff,backoffMultiplier:t.backoffMultiplier,retryableStatusCodes:t.retryableStatusCodes}}function Yw(t){if(!("maxAttempts"in t)||!Number.isInteger(t.maxAttempts)||t.maxAttempts<2)throw new Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in t&&(typeof t.hedgingDelay!="string"||!po.test(t.hedgingDelay)))throw new Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in t&&Array.isArray(t.nonFatalStatusCodes))for(let n of t.nonFatalStatusCodes)if(typeof n=="number"){if(!Object.values(fo.Status).includes(n))throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value not in status code range")}else if(typeof n=="string"){if(!Object.values(fo.Status).includes(n.toUpperCase()))throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value not a status code name")}else throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value must be a string or number");let e={maxAttempts:t.maxAttempts};return t.hedgingDelay&&(e.hedgingDelay=t.hedgingDelay),t.nonFatalStatusCodes&&(e.nonFatalStatusCodes=t.nonFatalStatusCodes),e}function Jw(t){var e;let n={name:[]};if(!("name"in t)||!Array.isArray(t.name))throw new Error("Invalid method config: invalid name array");for(let r of t.name)n.name.push(Kw(r));if("waitForReady"in t){if(typeof t.waitForReady!="boolean")throw new Error("Invalid method config: invalid waitForReady");n.waitForReady=t.waitForReady}if("timeout"in t)if(typeof t.timeout=="object"){if(!("seconds"in t.timeout)||typeof t.timeout.seconds!="number")throw new Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in t.timeout)||typeof t.timeout.nanos!="number")throw new Error("Invalid method config: invalid timeout.nanos");n.timeout=t.timeout}else if(typeof t.timeout=="string"&&po.test(t.timeout)){let r=t.timeout.substring(0,t.timeout.length-1).split(".");n.timeout={seconds:r[0]|0,nanos:((e=r[1])!==null&&e!==void 0?e:0)|0}}else throw new Error("Invalid method config: invalid timeout");if("maxRequestBytes"in t){if(typeof t.maxRequestBytes!="number")throw new Error("Invalid method config: invalid maxRequestBytes");n.maxRequestBytes=t.maxRequestBytes}if("maxResponseBytes"in t){if(typeof t.maxResponseBytes!="number")throw new Error("Invalid method config: invalid maxRequestBytes");n.maxResponseBytes=t.maxResponseBytes}if("retryPolicy"in t){if("hedgingPolicy"in t)throw new Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");n.retryPolicy=Qw(t.retryPolicy)}else"hedgingPolicy"in t&&(n.hedgingPolicy=Yw(t.hedgingPolicy));return n}function Ug(t){if(!("maxTokens"in t)||typeof t.maxTokens!="number"||t.maxTokens<=0||t.maxTokens>1e3)throw new Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in t)||typeof t.tokenRatio!="number"||t.tokenRatio<=0)throw new Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return{maxTokens:+t.maxTokens.toFixed(3),tokenRatio:+t.tokenRatio.toFixed(3)}}yn.validateRetryThrottling=Ug;function qg(t){let e={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in t)if(typeof t.loadBalancingPolicy=="string")e.loadBalancingPolicy=t.loadBalancingPolicy;else throw new Error("Invalid service config: invalid loadBalancingPolicy");if("loadBalancingConfig"in t)if(Array.isArray(t.loadBalancingConfig))for(let r of t.loadBalancingConfig)e.loadBalancingConfig.push((0,$w.validateLoadBalancingConfig)(r));else throw new Error("Invalid service config: invalid loadBalancingConfig");if("methodConfig"in t&&Array.isArray(t.methodConfig))for(let r of t.methodConfig)e.methodConfig.push(Jw(r));"retryThrottling"in t&&(e.retryThrottling=Ug(t.retryThrottling));let n=[];for(let r of e.methodConfig)for(let i of r.name){for(let s of n)if(i.service===s.service&&i.method===s.method)throw new Error(`Invalid service config: duplicate name ${i.service}/${i.method}`);n.push(i)}return e}yn.validateServiceConfig=qg;function Xw(t){if(!("serviceConfig"in t))throw new Error("Invalid service config choice: missing service config");let e={serviceConfig:qg(t.serviceConfig)};if("clientLanguage"in t)if(Array.isArray(t.clientLanguage)){e.clientLanguage=[];for(let r of t.clientLanguage)if(typeof r=="string")e.clientLanguage.push(r);else throw new Error("Invalid service config choice: invalid clientLanguage")}else throw new Error("Invalid service config choice: invalid clientLanguage");if("clientHostname"in t)if(Array.isArray(t.clientHostname)){e.clientHostname=[];for(let r of t.clientHostname)if(typeof r=="string")e.clientHostname.push(r);else throw new Error("Invalid service config choice: invalid clientHostname")}else throw new Error("Invalid service config choice: invalid clientHostname");if("percentage"in t)if(typeof t.percentage=="number"&&0<=t.percentage&&t.percentage<=100)e.percentage=t.percentage;else throw new Error("Invalid service config choice: invalid percentage");let n=["clientLanguage","percentage","clientHostname","serviceConfig"];for(let r in t)if(!n.includes(r))throw new Error(`Invalid service config choice: unexpected field ${r}`);return e}function Zw(t,e){if(!Array.isArray(t))throw new Error("Invalid service config list");for(let n of t){let r=Xw(n);if(!(typeof r.percentage=="number"&&e>r.percentage)){if(Array.isArray(r.clientHostname)){let i=!1;for(let s of r.clientHostname)s===Hw.hostname()&&(i=!0);if(!i)continue}if(Array.isArray(r.clientLanguage)){let i=!1;for(let s of r.clientLanguage)s===Ww&&(i=!0);if(!i)continue}return r.serviceConfig}}throw new Error("No matching service config found")}function eC(t,e){for(let n of t)if(n.length>0&&n[0].startsWith("grpc_config=")){let r=n.join("").substring(12),i=JSON.parse(r);return Zw(i,e)}return null}yn.extractAndSelectServiceConfig=eC});var st=g(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.ConnectivityState=void 0;var zg=function(t){return t[t.IDLE=0]="IDLE",t[t.CONNECTING=1]="CONNECTING",t[t.READY=2]="READY",t[t.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",t[t.SHUTDOWN=4]="SHUTDOWN",t}(zg||(go.ConnectivityState=zg={}))});var Ze=g(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.uriToString=vn.splitHostPort=vn.parseUri=void 0;var tC=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;function nC(t){let e=tC.exec(t);return e===null?null:{scheme:e[1],authority:e[2],path:e[3]}}vn.parseUri=nC;var jg=/^\d+$/;function rC(t){if(t.startsWith("[")){let e=t.indexOf("]");if(e===-1)return null;let n=t.substring(1,e);if(n.indexOf(":")===-1)return null;if(t.length>e+1)if(t[e+1]===":"){let r=t.substring(e+2);return jg.test(r)?{host:n,port:+r}:null}else return null;else return{host:n}}else{let e=t.split(":");return e.length===2?jg.test(e[1])?{host:e[0],port:+e[1]}:null:{host:t}}}vn.splitHostPort=rC;function iC(t){let e="";return t.scheme!==void 0&&(e+=t.scheme+":"),t.authority!==void 0&&(e+="//"+t.authority+"/"),e+=t.path,e}vn.uriToString=iC});var Nt=g(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.mapUriDefaultScheme=ot.getDefaultAuthority=ot.createResolver=ot.registerDefaultScheme=ot.registerResolver=void 0;var Wc=Ze(),wr={},$c=null;function sC(t,e){wr[t]=e}ot.registerResolver=sC;function oC(t){$c=t}ot.registerDefaultScheme=oC;function aC(t,e,n){if(t.scheme!==void 0&&t.scheme in wr)return new wr[t.scheme](t,e,n);throw new Error(`No resolver could be created for target ${(0,Wc.uriToString)(t)}`)}ot.createResolver=aC;function lC(t){if(t.scheme!==void 0&&t.scheme in wr)return wr[t.scheme].getDefaultAuthority(t);throw new Error(`Invalid target ${(0,Wc.uriToString)(t)}`)}ot.getDefaultAuthority=lC;function cC(t){return t.scheme===void 0||!(t.scheme in wr)?$c!==null?{scheme:$c,authority:void 0,path:(0,Wc.uriToString)(t)}:null:t}ot.mapUriDefaultScheme=cC});var Sn=g(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.QueuePicker=_n.UnavailablePicker=_n.PickResultType=void 0;var uC=He(),dC=H(),mo=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.QUEUE=1]="QUEUE",t[t.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",t[t.DROP=3]="DROP",t}(mo||(_n.PickResultType=mo={})),Kc=class{constructor(e){this.status=Object.assign({code:dC.Status.UNAVAILABLE,details:"No connection established",metadata:new uC.Metadata},e)}pick(e){return{pickResultType:mo.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}};_n.UnavailablePicker=Kc;var Qc=class{constructor(e){this.loadBalancer=e,this.calledExitIdle=!1}pick(e){return this.calledExitIdle||(process.nextTick(()=>{this.loadBalancer.exitIdle()}),this.calledExitIdle=!0),{pickResultType:mo.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}};_n.QueuePicker=Qc});var ki=g(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.BackoffTimeout=void 0;var hC=1e3,fC=1.6,pC=12e4,gC=.2;function mC(t,e){return Math.random()*(e-t)+t}var Yc=class{constructor(e,n){this.callback=e,this.initialDelay=hC,this.multiplier=fC,this.maxDelay=pC,this.jitter=gC,this.running=!1,this.hasRef=!0,this.startTime=new Date,this.endTime=new Date,n&&(n.initialDelay&&(this.initialDelay=n.initialDelay),n.multiplier&&(this.multiplier=n.multiplier),n.jitter&&(this.jitter=n.jitter),n.maxDelay&&(this.maxDelay=n.maxDelay)),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId)}runTimer(e){var n,r;this.endTime=this.startTime,this.endTime.setMilliseconds(this.endTime.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.callback(),this.running=!1},e),this.hasRef||(r=(n=this.timerId).unref)===null||r===void 0||r.call(n)}runOnce(){this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);let e=Math.min(this.nextDelay*this.multiplier,this.maxDelay),n=e*this.jitter;this.nextDelay=e+mC(-n,n)}stop(){clearTimeout(this.timerId),this.running=!1}reset(){if(this.nextDelay=this.initialDelay,this.running){let e=new Date,n=this.startTime;n.setMilliseconds(n.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),e<n?this.runTimer(n.getTime()-e.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var e,n;this.hasRef=!0,(n=(e=this.timerId).ref)===null||n===void 0||n.call(e)}unref(){var e,n;this.hasRef=!1,(n=(e=this.timerId).unref)===null||n===void 0||n.call(e)}getEndTime(){return this.endTime}};yo.BackoffTimeout=Yc});var _o=g(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.ChildLoadBalancerHandler=void 0;var yC=mn(),vC=st(),_C="child_load_balancer_helper",Jc=class{constructor(e){this.channelControlHelper=e,this.currentChild=null,this.pendingChild=null,this.latestConfig=null,this.ChildPolicyHelper=class{constructor(n){this.parent=n,this.child=null}createSubchannel(n,r){return this.parent.channelControlHelper.createSubchannel(n,r)}updateState(n,r){var i;if(this.calledByPendingChild()){if(n===vC.ConnectivityState.CONNECTING)return;(i=this.parent.currentChild)===null||i===void 0||i.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(n,r)}requestReresolution(){var n;let r=(n=this.parent.pendingChild)!==null&&n!==void 0?n:this.parent.currentChild;this.child===r&&this.parent.channelControlHelper.requestReresolution()}setChild(n){this.child=n}addChannelzChild(n){this.parent.channelControlHelper.addChannelzChild(n)}removeChannelzChild(n){this.parent.channelControlHelper.removeChannelzChild(n)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}configUpdateRequiresNewPolicyInstance(e,n){return e.getLoadBalancerName()!==n.getLoadBalancerName()}updateAddressList(e,n,r){let i;if(this.currentChild===null||this.latestConfig===null||this.configUpdateRequiresNewPolicyInstance(this.latestConfig,n)){let s=new this.ChildPolicyHelper(this),o=(0,yC.createLoadBalancer)(n,s);s.setChild(o),this.currentChild===null?(this.currentChild=o,i=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=o,i=this.pendingChild)}else this.pendingChild===null?i=this.currentChild:i=this.pendingChild;this.latestConfig=n,i.updateAddressList(e,n,r)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return _C}};vo.ChildLoadBalancerHandler=Jc});var Hg=g(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.ResolvingLoadBalancer=void 0;var SC=mn(),EC=Hc(),Ke=st(),wC=Nt(),Cr=Sn(),CC=ki(),Xc=H(),TC=He(),bC=ce(),IC=H(),AC=Ze(),DC=_o(),RC="resolving_load_balancer";function Gg(t){bC.trace(IC.LogVerbosity.DEBUG,RC,t)}var OC=["SERVICE_AND_METHOD","SERVICE","EMPTY"];function xC(t,e,n,r){for(let i of n.name)switch(r){case"EMPTY":if(!i.service&&!i.method)return!0;break;case"SERVICE":if(i.service===t&&!i.method)return!0;break;case"SERVICE_AND_METHOD":if(i.service===t&&i.method===e)return!0}return!1}function NC(t,e,n,r){for(let i of n)if(xC(t,e,i,r))return i;return null}function MC(t){return function(n,r){var i,s;let o=n.split("/").filter(c=>c.length>0),a=(i=o[0])!==null&&i!==void 0?i:"",l=(s=o[1])!==null&&s!==void 0?s:"";if(t&&t.methodConfig)for(let c of OC){let d=NC(a,l,t.methodConfig,c);if(d)return{methodConfig:d,pickInformation:{},status:Xc.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:Xc.Status.OK,dynamicFilterFactories:[]}}}var Zc=class{constructor(e,n,r,i,s){this.target=e,this.channelControlHelper=n,this.onSuccessfulResolution=i,this.onFailedResolution=s,this.latestChildState=Ke.ConnectivityState.IDLE,this.latestChildPicker=new Cr.QueuePicker(this),this.currentState=Ke.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,r["grpc.service_config"]?this.defaultServiceConfig=(0,EC.validateServiceConfig)(JSON.parse(r["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(Ke.ConnectivityState.IDLE,new Cr.QueuePicker(this)),this.childLoadBalancer=new DC.ChildLoadBalancerHandler({createSubchannel:n.createSubchannel.bind(n),requestReresolution:()=>{this.backoffTimeout.isRunning()?(Gg("requestReresolution delayed by backoff timer until "+this.backoffTimeout.getEndTime().toISOString()),this.continueResolving=!0):this.updateResolution()},updateState:(a,l)=>{this.latestChildState=a,this.latestChildPicker=l,this.updateState(a,l)},addChannelzChild:n.addChannelzChild.bind(n),removeChannelzChild:n.removeChannelzChild.bind(n)}),this.innerResolver=(0,wC.createResolver)(e,{onSuccessfulResolution:(a,l,c,d,h)=>{var f;this.backoffTimeout.stop(),this.backoffTimeout.reset();let p=null;l===null?c===null?(this.previousServiceConfig=null,p=this.defaultServiceConfig):this.previousServiceConfig===null?this.handleResolutionFailure(c):p=this.previousServiceConfig:(p=l,this.previousServiceConfig=l);let m=(f=p?.loadBalancingConfig)!==null&&f!==void 0?f:[],_=(0,SC.getFirstUsableConfig)(m,!0);if(_===null){this.handleResolutionFailure({code:Xc.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new TC.Metadata});return}this.childLoadBalancer.updateAddressList(a,_,h);let C=p??this.defaultServiceConfig;this.onSuccessfulResolution(C,d??MC(C))},onError:a=>{this.handleResolutionFailure(a)}},r);let o={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new CC.BackoffTimeout(()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker)},o),this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution(),this.currentState===Ke.ConnectivityState.IDLE&&this.updateState(Ke.ConnectivityState.CONNECTING,new Cr.QueuePicker(this)),this.backoffTimeout.runOnce()}updateState(e,n){Gg((0,AC.uriToString)(this.target)+" "+Ke.ConnectivityState[this.currentState]+" -> "+Ke.ConnectivityState[e]),e===Ke.ConnectivityState.IDLE&&(n=new Cr.QueuePicker(this)),this.currentState=e,this.channelControlHelper.updateState(e,n)}handleResolutionFailure(e){this.latestChildState===Ke.ConnectivityState.IDLE&&(this.updateState(Ke.ConnectivityState.TRANSIENT_FAILURE,new Cr.UnavailablePicker(e)),this.onFailedResolution(e))}exitIdle(){(this.currentState===Ke.ConnectivityState.IDLE||this.currentState===Ke.ConnectivityState.TRANSIENT_FAILURE)&&(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(e,n){throw new Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.backoffTimeout.reset(),this.backoffTimeout.stop(),this.latestChildState=Ke.ConnectivityState.IDLE,this.latestChildPicker=new Cr.QueuePicker(this),this.currentState=Ke.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1}getTypeName(){return"resolving_load_balancer"}};So.ResolvingLoadBalancer=Zc});var $g=g(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.channelOptionsEqual=Tr.recognizedOptions=void 0;Tr.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc.enable_retries":!0,"grpc.per_rpc_retry_buffer_size":!0,"grpc.retry_buffer_size":!0,"grpc.max_connection_age_ms":!0,"grpc.max_connection_age_grace_ms":!0,"grpc-node.max_session_memory":!0,"grpc.service_config_disable_resolution":!0,"grpc.client_idle_timeout_ms":!0,"grpc-node.tls_enable_trace":!0};function kC(t,e){let n=Object.keys(t).sort(),r=Object.keys(e).sort();if(n.length!==r.length)return!1;for(let i=0;i<n.length;i+=1)if(n[i]!==r[i]||t[n[i]]!==e[r[i]])return!1;return!0}Tr.channelOptionsEqual=kC});var kt=g(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.stringToSubchannelAddress=Mt.subchannelAddressToString=Mt.subchannelAddressEqual=Mt.isTcpSubchannelAddress=void 0;var PC=W("net");function Pi(t){return"port"in t}Mt.isTcpSubchannelAddress=Pi;function FC(t,e){return!t&&!e?!0:!t||!e?!1:Pi(t)?Pi(e)&&t.host===e.host&&t.port===e.port:!Pi(e)&&t.path===e.path}Mt.subchannelAddressEqual=FC;function LC(t){return Pi(t)?t.host+":"+t.port:t.path}Mt.subchannelAddressToString=LC;var BC=443;function VC(t,e){return(0,PC.isIP)(t)?{host:t,port:e??BC}:{path:t}}Mt.stringToSubchannelAddress=VC});var Eo=g(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.addAdminServicesToServer=br.registerAdminService=void 0;var Wg=[];function UC(t,e){Wg.push({getServiceDefinition:t,getHandlers:e})}br.registerAdminService=UC;function qC(t){for(let{getServiceDefinition:e,getHandlers:n}of Wg)t.addService(e(),n())}br.addAdminServicesToServer=qC});var Kg=g(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.ClientDuplexStreamImpl=at.ClientWritableStreamImpl=at.ClientReadableStreamImpl=at.ClientUnaryCallImpl=at.callErrorFromStatus=void 0;var zC=W("events"),iu=W("stream"),Fi=H();function jC(t,e){let n=`${t.code} ${Fi.Status[t.code]}: ${t.details}`,i=`${new Error(n).stack}
for call at
${e}`;return Object.assign(new Error(n),t,{stack:i})}at.callErrorFromStatus=jC;var eu=class extends zC.EventEmitter{constructor(){super()}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(Fi.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,n;return(n=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&n!==void 0?n:"unknown"}};at.ClientUnaryCallImpl=eu;var tu=class extends iu.Readable{constructor(e){super({objectMode:!0}),this.deserialize=e}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(Fi.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,n;return(n=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&n!==void 0?n:"unknown"}_read(e){var n;(n=this.call)===null||n===void 0||n.startRead()}};at.ClientReadableStreamImpl=tu;var nu=class extends iu.Writable{constructor(e){super({objectMode:!0}),this.serialize=e}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(Fi.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,n;return(n=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&n!==void 0?n:"unknown"}_write(e,n,r){var i;let s={callback:r},o=Number(n);Number.isNaN(o)||(s.flags=o),(i=this.call)===null||i===void 0||i.sendMessageWithContext(s,e)}_final(e){var n;(n=this.call)===null||n===void 0||n.halfClose(),e()}};at.ClientWritableStreamImpl=nu;var ru=class extends iu.Duplex{constructor(e,n){super({objectMode:!0}),this.serialize=e,this.deserialize=n}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(Fi.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,n;return(n=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&n!==void 0?n:"unknown"}_read(e){var n;(n=this.call)===null||n===void 0||n.startRead()}_write(e,n,r){var i;let s={callback:r},o=Number(n);Number.isNaN(o)||(s.flags=o),(i=this.call)===null||i===void 0||i.sendMessageWithContext(s,e)}_final(e){var n;(n=this.call)===null||n===void 0||n.halfClose(),e()}};at.ClientDuplexStreamImpl=ru});var Qg=g(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.InterceptingListenerImpl=Ir.isInterceptingListener=void 0;function GC(t){return t.onReceiveMetadata!==void 0&&t.onReceiveMetadata.length===1}Ir.isInterceptingListener=GC;var su=class{constructor(e,n){this.listener=e,this.nextListener=n,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(e){this.processingMetadata=!0,this.listener.onReceiveMetadata(e,n=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(n),this.processPendingMessage(),this.processPendingStatus()})}onReceiveMessage(e){this.processingMessage=!0,this.listener.onReceiveMessage(e,n=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=n,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(n),this.processPendingStatus())})}onReceiveStatus(e){this.listener.onReceiveStatus(e,n=>{this.processingMetadata||this.processingMessage?this.pendingStatus=n:this.nextListener.onReceiveStatus(n)})}};Ir.InterceptingListenerImpl=su});var hu=g(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.getInterceptingCall=lt.InterceptingCall=lt.RequesterBuilder=lt.ListenerBuilder=lt.InterceptorConfigurationError=void 0;var HC=He(),Yg=Qg(),Jg=H(),Xg=so(),Bi=class t extends Error{constructor(e){super(e),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,t)}};lt.InterceptorConfigurationError=Bi;var au=class{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveStatus(e){return this.status=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}};lt.ListenerBuilder=au;var lu=class{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(e){return this.start=e,this}withSendMessage(e){return this.message=e,this}withHalfClose(e){return this.halfClose=e,this}withCancel(e){return this.cancel=e,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}};lt.RequesterBuilder=lu;var ou={onReceiveMetadata:(t,e)=>{e(t)},onReceiveMessage:(t,e)=>{e(t)},onReceiveStatus:(t,e)=>{e(t)}},Li={start:(t,e,n)=>{n(t,e)},sendMessage:(t,e)=>{e(t)},halfClose:t=>{t()},cancel:t=>{t()}},cu=class{constructor(e,n){var r,i,s,o;this.nextCall=e,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,n?this.requester={start:(r=n.start)!==null&&r!==void 0?r:Li.start,sendMessage:(i=n.sendMessage)!==null&&i!==void 0?i:Li.sendMessage,halfClose:(s=n.halfClose)!==null&&s!==void 0?s:Li.halfClose,cancel:(o=n.cancel)!==null&&o!==void 0?o:Li.cancel}:this.requester=Li}cancelWithStatus(e,n){this.requester.cancel(()=>{this.nextCall.cancelWithStatus(e,n)})}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(e,n){var r,i,s,o,a,l;let c={onReceiveMetadata:(i=(r=n?.onReceiveMetadata)===null||r===void 0?void 0:r.bind(n))!==null&&i!==void 0?i:d=>{},onReceiveMessage:(o=(s=n?.onReceiveMessage)===null||s===void 0?void 0:s.bind(n))!==null&&o!==void 0?o:d=>{},onReceiveStatus:(l=(a=n?.onReceiveStatus)===null||a===void 0?void 0:a.bind(n))!==null&&l!==void 0?l:d=>{}};this.processingMetadata=!0,this.requester.start(e,c,(d,h)=>{var f,p,m;this.processingMetadata=!1;let _;if((0,Yg.isInterceptingListener)(h))_=h;else{let C={onReceiveMetadata:(f=h.onReceiveMetadata)!==null&&f!==void 0?f:ou.onReceiveMetadata,onReceiveMessage:(p=h.onReceiveMessage)!==null&&p!==void 0?p:ou.onReceiveMessage,onReceiveStatus:(m=h.onReceiveStatus)!==null&&m!==void 0?m:ou.onReceiveStatus};_=new Yg.InterceptingListenerImpl(C,c)}this.nextCall.start(d,_),this.processPendingMessage(),this.processPendingHalfClose()})}sendMessageWithContext(e,n){this.processingMessage=!0,this.requester.sendMessage(n,r=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=e,this.pendingMessage=n):(this.nextCall.sendMessageWithContext(e,r),this.processPendingHalfClose())})}sendMessage(e){this.sendMessageWithContext({},e)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose(()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()})}};lt.InterceptingCall=cu;function $C(t,e,n){var r,i;let s=(r=n.deadline)!==null&&r!==void 0?r:1/0,o=n.host,a=(i=n.parent)!==null&&i!==void 0?i:null,l=n.propagate_flags,c=n.credentials,d=t.createCall(e,s,o,a,l);return c&&d.setCredentials(c),d}var wo=class{constructor(e,n){this.call=e,this.methodDefinition=n}cancelWithStatus(e,n){this.call.cancelWithStatus(e,n)}getPeer(){return this.call.getPeer()}sendMessageWithContext(e,n){let r;try{r=this.methodDefinition.requestSerialize(n)}catch(i){this.call.cancelWithStatus(Jg.Status.INTERNAL,`Request message serialization failure: ${(0,Xg.getErrorMessage)(i)}`);return}this.call.sendMessageWithContext(e,r)}sendMessage(e){this.sendMessageWithContext({},e)}start(e,n){let r=null;this.call.start(e,{onReceiveMetadata:i=>{var s;(s=n?.onReceiveMetadata)===null||s===void 0||s.call(n,i)},onReceiveMessage:i=>{var s;let o;try{o=this.methodDefinition.responseDeserialize(i)}catch(a){r={code:Jg.Status.INTERNAL,details:`Response message parsing error: ${(0,Xg.getErrorMessage)(a)}`,metadata:new HC.Metadata},this.call.cancelWithStatus(r.code,r.details);return}(s=n?.onReceiveMessage)===null||s===void 0||s.call(n,o)},onReceiveStatus:i=>{var s,o;r?(s=n?.onReceiveStatus)===null||s===void 0||s.call(n,r):(o=n?.onReceiveStatus)===null||o===void 0||o.call(n,i)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}},uu=class extends wo{constructor(e,n){super(e,n)}start(e,n){var r,i;let s=!1,o={onReceiveMetadata:(i=(r=n?.onReceiveMetadata)===null||r===void 0?void 0:r.bind(n))!==null&&i!==void 0?i:a=>{},onReceiveMessage:a=>{var l;s=!0,(l=n?.onReceiveMessage)===null||l===void 0||l.call(n,a)},onReceiveStatus:a=>{var l,c;s||(l=n?.onReceiveMessage)===null||l===void 0||l.call(n,null),(c=n?.onReceiveStatus)===null||c===void 0||c.call(n,a)}};super.start(e,o),this.call.startRead()}},du=class extends wo{};function WC(t,e,n){let r=$C(t,n.path,e);return n.responseStream?new du(r,n):new uu(r,n)}function KC(t,e,n,r){if(t.clientInterceptors.length>0&&t.clientInterceptorProviders.length>0)throw new Bi("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(t.callInterceptors.length>0&&t.callInterceptorProviders.length>0)throw new Bi("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let i=[];t.callInterceptors.length>0||t.callInterceptorProviders.length>0?i=[].concat(t.callInterceptors,t.callInterceptorProviders.map(a=>a(e))).filter(a=>a):i=[].concat(t.clientInterceptors,t.clientInterceptorProviders.map(a=>a(e))).filter(a=>a);let s=Object.assign({},n,{method_definition:e});return i.reduceRight((a,l)=>c=>l(c,a),a=>WC(r,a,e))(s)}lt.getInterceptingCall=KC});var gu=g(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.Client=void 0;var Pt=Kg(),QC=mu(),YC=st(),En=H(),Ar=He(),Co=hu(),_t=Symbol(),Dr=Symbol(),Rr=Symbol(),Xt=Symbol();function fu(t){return typeof t=="function"}function Or(t){return t.stack.split(`
`).slice(1).join(`
`)}var pu=class{constructor(e,n,r={}){var i,s;if(r=Object.assign({},r),this[Dr]=(i=r.interceptors)!==null&&i!==void 0?i:[],delete r.interceptors,this[Rr]=(s=r.interceptor_providers)!==null&&s!==void 0?s:[],delete r.interceptor_providers,this[Dr].length>0&&this[Rr].length>0)throw new Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[Xt]=r.callInvocationTransformer,delete r.callInvocationTransformer,r.channelOverride)this[_t]=r.channelOverride;else if(r.channelFactoryOverride){let o=r.channelFactoryOverride;delete r.channelFactoryOverride,this[_t]=o(e,n,r)}else this[_t]=new QC.ChannelImplementation(e,n,r)}close(){this[_t].close()}getChannel(){return this[_t]}waitForReady(e,n){let r=i=>{if(i){n(new Error("Failed to connect before the deadline"));return}let s;try{s=this[_t].getConnectivityState(!0)}catch{n(new Error("The channel has been closed"));return}if(s===YC.ConnectivityState.READY)n();else try{this[_t].watchConnectivityState(s,e,r)}catch{n(new Error("The channel has been closed"))}};setImmediate(r)}checkOptionalUnaryResponseArguments(e,n,r){if(fu(e))return{metadata:new Ar.Metadata,options:{},callback:e};if(fu(n))return e instanceof Ar.Metadata?{metadata:e,options:{},callback:n}:{metadata:new Ar.Metadata,options:e,callback:n};if(!(e instanceof Ar.Metadata&&n instanceof Object&&fu(r)))throw new Error("Incorrect arguments passed");return{metadata:e,options:n,callback:r}}makeUnaryRequest(e,n,r,i,s,o,a){var l,c;let d=this.checkOptionalUnaryResponseArguments(s,o,a),h={path:e,requestStream:!1,responseStream:!1,requestSerialize:n,responseDeserialize:r},f={argument:i,metadata:d.metadata,call:new Pt.ClientUnaryCallImpl,channel:this[_t],methodDefinition:h,callOptions:d.options,callback:d.callback};this[Xt]&&(f=this[Xt](f));let p=f.call,m={clientInterceptors:this[Dr],clientInterceptorProviders:this[Rr],callInterceptors:(l=f.callOptions.interceptors)!==null&&l!==void 0?l:[],callInterceptorProviders:(c=f.callOptions.interceptor_providers)!==null&&c!==void 0?c:[]},_=(0,Co.getInterceptingCall)(m,f.methodDefinition,f.callOptions,f.channel);p.call=_;let C=null,T=!1,S=new Error;return _.start(f.metadata,{onReceiveMetadata:O=>{p.emit("metadata",O)},onReceiveMessage(O){C!==null&&_.cancelWithStatus(En.Status.INTERNAL,"Too many responses received"),C=O},onReceiveStatus(O){if(!T){if(T=!0,O.code===En.Status.OK)if(C===null){let A=Or(S);f.callback((0,Pt.callErrorFromStatus)({code:En.Status.INTERNAL,details:"No message received",metadata:O.metadata},A))}else f.callback(null,C);else{let A=Or(S);f.callback((0,Pt.callErrorFromStatus)(O,A))}S=null,p.emit("status",O)}}}),_.sendMessage(i),_.halfClose(),p}makeClientStreamRequest(e,n,r,i,s,o){var a,l;let c=this.checkOptionalUnaryResponseArguments(i,s,o),d={path:e,requestStream:!0,responseStream:!1,requestSerialize:n,responseDeserialize:r},h={metadata:c.metadata,call:new Pt.ClientWritableStreamImpl(n),channel:this[_t],methodDefinition:d,callOptions:c.options,callback:c.callback};this[Xt]&&(h=this[Xt](h));let f=h.call,p={clientInterceptors:this[Dr],clientInterceptorProviders:this[Rr],callInterceptors:(a=h.callOptions.interceptors)!==null&&a!==void 0?a:[],callInterceptorProviders:(l=h.callOptions.interceptor_providers)!==null&&l!==void 0?l:[]},m=(0,Co.getInterceptingCall)(p,h.methodDefinition,h.callOptions,h.channel);f.call=m;let _=null,C=!1,T=new Error;return m.start(h.metadata,{onReceiveMetadata:S=>{f.emit("metadata",S)},onReceiveMessage(S){_!==null&&m.cancelWithStatus(En.Status.INTERNAL,"Too many responses received"),_=S},onReceiveStatus(S){if(!C){if(C=!0,S.code===En.Status.OK)if(_===null){let O=Or(T);h.callback((0,Pt.callErrorFromStatus)({code:En.Status.INTERNAL,details:"No message received",metadata:S.metadata},O))}else h.callback(null,_);else{let O=Or(T);h.callback((0,Pt.callErrorFromStatus)(S,O))}T=null,f.emit("status",S)}}}),f}checkMetadataAndOptions(e,n){let r,i;return e instanceof Ar.Metadata?(r=e,n?i=n:i={}):(e?i=e:i={},r=new Ar.Metadata),{metadata:r,options:i}}makeServerStreamRequest(e,n,r,i,s,o){var a,l;let c=this.checkMetadataAndOptions(s,o),d={path:e,requestStream:!1,responseStream:!0,requestSerialize:n,responseDeserialize:r},h={argument:i,metadata:c.metadata,call:new Pt.ClientReadableStreamImpl(r),channel:this[_t],methodDefinition:d,callOptions:c.options};this[Xt]&&(h=this[Xt](h));let f=h.call,p={clientInterceptors:this[Dr],clientInterceptorProviders:this[Rr],callInterceptors:(a=h.callOptions.interceptors)!==null&&a!==void 0?a:[],callInterceptorProviders:(l=h.callOptions.interceptor_providers)!==null&&l!==void 0?l:[]},m=(0,Co.getInterceptingCall)(p,h.methodDefinition,h.callOptions,h.channel);f.call=m;let _=!1,C=new Error;return m.start(h.metadata,{onReceiveMetadata(T){f.emit("metadata",T)},onReceiveMessage(T){f.push(T)},onReceiveStatus(T){if(!_){if(_=!0,f.push(null),T.code!==En.Status.OK){let S=Or(C);f.emit("error",(0,Pt.callErrorFromStatus)(T,S))}C=null,f.emit("status",T)}}}),m.sendMessage(i),m.halfClose(),f}makeBidiStreamRequest(e,n,r,i,s){var o,a;let l=this.checkMetadataAndOptions(i,s),c={path:e,requestStream:!0,responseStream:!0,requestSerialize:n,responseDeserialize:r},d={metadata:l.metadata,call:new Pt.ClientDuplexStreamImpl(n,r),channel:this[_t],methodDefinition:c,callOptions:l.options};this[Xt]&&(d=this[Xt](d));let h=d.call,f={clientInterceptors:this[Dr],clientInterceptorProviders:this[Rr],callInterceptors:(o=d.callOptions.interceptors)!==null&&o!==void 0?o:[],callInterceptorProviders:(a=d.callOptions.interceptor_providers)!==null&&a!==void 0?a:[]},p=(0,Co.getInterceptingCall)(f,d.methodDefinition,d.callOptions,d.channel);h.call=p;let m=!1,_=new Error;return p.start(d.metadata,{onReceiveMetadata(C){h.emit("metadata",C)},onReceiveMessage(C){h.push(C)},onReceiveStatus(C){if(!m){if(m=!0,h.push(null),C.code!==En.Status.OK){let T=Or(_);h.emit("error",(0,Pt.callErrorFromStatus)(C,T))}_=null,h.emit("status",C)}}}),h}};To.Client=pu});var vu=g(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.loadPackageDefinition=xr.makeClientConstructor=void 0;var Vi=gu(),JC={unary:Vi.Client.prototype.makeUnaryRequest,server_stream:Vi.Client.prototype.makeServerStreamRequest,client_stream:Vi.Client.prototype.makeClientStreamRequest,bidi:Vi.Client.prototype.makeBidiStreamRequest};function yu(t){return["__proto__","prototype","constructor"].includes(t)}function Zg(t,e,n){n||(n={});class r extends Vi.Client{}return Object.keys(t).forEach(i=>{if(yu(i))return;let s=t[i],o;if(typeof i=="string"&&i.charAt(0)==="$")throw new Error("Method names cannot start with $");s.requestStream?s.responseStream?o="bidi":o="client_stream":s.responseStream?o="server_stream":o="unary";let a=s.requestSerialize,l=s.responseDeserialize,c=XC(JC[o],s.path,a,l);r.prototype[i]=c,Object.assign(r.prototype[i],s),s.originalName&&!yu(s.originalName)&&(r.prototype[s.originalName]=r.prototype[i])}),r.service=t,r.serviceName=e,r}xr.makeClientConstructor=Zg;function XC(t,e,n,r){return function(...i){return t.call(this,e,n,r,...i)}}function ZC(t){return"format"in t}function eT(t){let e={};for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let r=t[n],i=n.split(".");if(i.some(a=>yu(a)))continue;let s=i[i.length-1],o=e;for(let a of i.slice(0,-1))o[a]||(o[a]={}),o=o[a];ZC(r)?o[s]=r:o[s]=Zg(r,s,{})}return e}xr.loadPackageDefinition=eT});var Tm=g((TN,Cm)=>{"use strict";var tT=1/0,nT="[object Symbol]",rT=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,iT=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Io="\\ud800-\\udfff",am="\\u0300-\\u036f\\ufe20-\\ufe23",lm="\\u20d0-\\u20f0",cm="\\u2700-\\u27bf",um="a-z\\xdf-\\xf6\\xf8-\\xff",sT="\\xac\\xb1\\xd7\\xf7",oT="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",aT="\\u2000-\\u206f",lT=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dm="A-Z\\xc0-\\xd6\\xd8-\\xde",hm="\\ufe0e\\ufe0f",fm=sT+oT+aT+lT,Su="['\u2019]",cT="["+Io+"]",em="["+fm+"]",bo="["+am+lm+"]",pm="\\d+",uT="["+cm+"]",gm="["+um+"]",mm="[^"+Io+fm+pm+cm+um+dm+"]",_u="\\ud83c[\\udffb-\\udfff]",dT="(?:"+bo+"|"+_u+")",ym="[^"+Io+"]",Eu="(?:\\ud83c[\\udde6-\\uddff]){2}",wu="[\\ud800-\\udbff][\\udc00-\\udfff]",Nr="["+dm+"]",vm="\\u200d",tm="(?:"+gm+"|"+mm+")",hT="(?:"+Nr+"|"+mm+")",nm="(?:"+Su+"(?:d|ll|m|re|s|t|ve))?",rm="(?:"+Su+"(?:D|LL|M|RE|S|T|VE))?",_m=dT+"?",Sm="["+hm+"]?",fT="(?:"+vm+"(?:"+[ym,Eu,wu].join("|")+")"+Sm+_m+")*",Em=Sm+_m+fT,pT="(?:"+[uT,Eu,wu].join("|")+")"+Em,gT="(?:"+[ym+bo+"?",bo,Eu,wu,cT].join("|")+")",mT=RegExp(Su,"g"),yT=RegExp(bo,"g"),vT=RegExp(_u+"(?="+_u+")|"+gT+Em,"g"),_T=RegExp([Nr+"?"+gm+"+"+nm+"(?="+[em,Nr,"$"].join("|")+")",hT+"+"+rm+"(?="+[em,Nr+tm,"$"].join("|")+")",Nr+"?"+tm+"+"+nm,Nr+"+"+rm,pm,pT].join("|"),"g"),ST=RegExp("["+vm+Io+am+lm+hm+"]"),ET=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wT={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"ss"},CT=typeof global=="object"&&global&&global.Object===Object&&global,TT=typeof self=="object"&&self&&self.Object===Object&&self,bT=CT||TT||Function("return this")();function IT(t,e,n,r){var i=-1,s=t?t.length:0;for(r&&s&&(n=t[++i]);++i<s;)n=e(n,t[i],i,t);return n}function AT(t){return t.split("")}function DT(t){return t.match(rT)||[]}function RT(t){return function(e){return t?.[e]}}var OT=RT(wT);function wm(t){return ST.test(t)}function xT(t){return ET.test(t)}function NT(t){return wm(t)?MT(t):AT(t)}function MT(t){return t.match(vT)||[]}function kT(t){return t.match(_T)||[]}var PT=Object.prototype,FT=PT.toString,im=bT.Symbol,sm=im?im.prototype:void 0,om=sm?sm.toString:void 0;function LT(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}function BT(t){if(typeof t=="string")return t;if(jT(t))return om?om.call(t):"";var e=t+"";return e=="0"&&1/t==-tT?"-0":e}function VT(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:LT(t,e,n)}function UT(t){return function(e){e=Ao(e);var n=wm(e)?NT(e):void 0,r=n?n[0]:e.charAt(0),i=n?VT(n,1).join(""):e.slice(1);return r[t]()+i}}function qT(t){return function(e){return IT(KT($T(e).replace(mT,"")),t,"")}}function zT(t){return!!t&&typeof t=="object"}function jT(t){return typeof t=="symbol"||zT(t)&&FT.call(t)==nT}function Ao(t){return t==null?"":BT(t)}var GT=qT(function(t,e,n){return e=e.toLowerCase(),t+(n?HT(e):e)});function HT(t){return WT(Ao(t).toLowerCase())}function $T(t){return t=Ao(t),t&&t.replace(iT,OT).replace(yT,"")}var WT=UT("toUpperCase");function KT(t,e,n){return t=Ao(t),e=n?void 0:e,e===void 0?xT(t)?kT(t):DT(t):t.match(e)||[]}Cm.exports=GT});var Cu=g((bN,bm)=>{"use strict";bm.exports=QT;function QT(t,e){for(var n=new Array(arguments.length-1),r=0,i=2,s=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise(function(a,l){n[r]=function(d){if(s)if(s=!1,d)l(d);else{for(var h=new Array(arguments.length-1),f=0;f<h.length;)h[f++]=arguments[f];a.apply(null,h)}};try{t.apply(e||null,n)}catch(c){s&&(s=!1,l(c))}})}});var Rm=g(Dm=>{"use strict";var Do=Dm;Do.length=function(e){var n=e.length;if(!n)return 0;for(var r=0;--n%4>1&&e.charAt(n)==="=";)++r;return Math.ceil(e.length*3)/4-r};var Mr=new Array(64),Am=new Array(123);for(St=0;St<64;)Am[Mr[St]=St<26?St+65:St<52?St+71:St<62?St-4:St-59|43]=St++;var St;Do.encode=function(e,n,r){for(var i=null,s=[],o=0,a=0,l;n<r;){var c=e[n++];switch(a){case 0:s[o++]=Mr[c>>2],l=(c&3)<<4,a=1;break;case 1:s[o++]=Mr[l|c>>4],l=(c&15)<<2,a=2;break;case 2:s[o++]=Mr[l|c>>6],s[o++]=Mr[c&63],a=0;break}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=Mr[l],s[o++]=61,a===1&&(s[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var Im="invalid encoding";Do.decode=function(e,n,r){for(var i=r,s=0,o,a=0;a<e.length;){var l=e.charCodeAt(a++);if(l===61&&s>1)break;if((l=Am[l])===void 0)throw Error(Im);switch(s){case 0:o=l,s=1;break;case 1:n[r++]=o<<2|(l&48)>>4,o=l,s=2;break;case 2:n[r++]=(o&15)<<4|(l&60)>>2,o=l,s=3;break;case 3:n[r++]=(o&3)<<6|l,s=0;break}}if(s===1)throw Error(Im);return r-i};Do.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var xm=g((AN,Om)=>{"use strict";Om.exports=Ro;function Ro(){this._listeners={}}Ro.prototype.on=function(e,n,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:n,ctx:r||this}),this};Ro.prototype.off=function(e,n){if(e===void 0)this._listeners={};else if(n===void 0)this._listeners[e]=[];else for(var r=this._listeners[e],i=0;i<r.length;)r[i].fn===n?r.splice(i,1):++i;return this};Ro.prototype.emit=function(e){var n=this._listeners[e];if(n){for(var r=[],i=1;i<arguments.length;)r.push(arguments[i++]);for(i=0;i<n.length;)n[i].fn.apply(n[i++].ctx,r)}return this}});var Bm=g((DN,Lm)=>{"use strict";Lm.exports=Nm(Nm);function Nm(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),r=n[3]===128;function i(l,c,d){e[0]=l,c[d]=n[0],c[d+1]=n[1],c[d+2]=n[2],c[d+3]=n[3]}function s(l,c,d){e[0]=l,c[d]=n[3],c[d+1]=n[2],c[d+2]=n[1],c[d+3]=n[0]}t.writeFloatLE=r?i:s,t.writeFloatBE=r?s:i;function o(l,c){return n[0]=l[c],n[1]=l[c+1],n[2]=l[c+2],n[3]=l[c+3],e[0]}function a(l,c){return n[3]=l[c],n[2]=l[c+1],n[1]=l[c+2],n[0]=l[c+3],e[0]}t.readFloatLE=r?o:a,t.readFloatBE=r?a:o}():function(){function e(r,i,s,o){var a=i<0?1:0;if(a&&(i=-i),i===0)r(1/i>0?0:2147483648,s,o);else if(isNaN(i))r(2143289344,s,o);else if(i>34028234663852886e22)r((a<<31|2139095040)>>>0,s,o);else if(i<11754943508222875e-54)r((a<<31|Math.round(i/1401298464324817e-60))>>>0,s,o);else{var l=Math.floor(Math.log(i)/Math.LN2),c=Math.round(i*Math.pow(2,-l)*8388608)&8388607;r((a<<31|l+127<<23|c)>>>0,s,o)}}t.writeFloatLE=e.bind(null,Mm),t.writeFloatBE=e.bind(null,km);function n(r,i,s){var o=r(i,s),a=(o>>31)*2+1,l=o>>>23&255,c=o&8388607;return l===255?c?NaN:a*(1/0):l===0?a*1401298464324817e-60*c:a*Math.pow(2,l-150)*(c+8388608)}t.readFloatLE=n.bind(null,Pm),t.readFloatBE=n.bind(null,Fm)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),r=n[7]===128;function i(l,c,d){e[0]=l,c[d]=n[0],c[d+1]=n[1],c[d+2]=n[2],c[d+3]=n[3],c[d+4]=n[4],c[d+5]=n[5],c[d+6]=n[6],c[d+7]=n[7]}function s(l,c,d){e[0]=l,c[d]=n[7],c[d+1]=n[6],c[d+2]=n[5],c[d+3]=n[4],c[d+4]=n[3],c[d+5]=n[2],c[d+6]=n[1],c[d+7]=n[0]}t.writeDoubleLE=r?i:s,t.writeDoubleBE=r?s:i;function o(l,c){return n[0]=l[c],n[1]=l[c+1],n[2]=l[c+2],n[3]=l[c+3],n[4]=l[c+4],n[5]=l[c+5],n[6]=l[c+6],n[7]=l[c+7],e[0]}function a(l,c){return n[7]=l[c],n[6]=l[c+1],n[5]=l[c+2],n[4]=l[c+3],n[3]=l[c+4],n[2]=l[c+5],n[1]=l[c+6],n[0]=l[c+7],e[0]}t.readDoubleLE=r?o:a,t.readDoubleBE=r?a:o}():function(){function e(r,i,s,o,a,l){var c=o<0?1:0;if(c&&(o=-o),o===0)r(0,a,l+i),r(1/o>0?0:2147483648,a,l+s);else if(isNaN(o))r(0,a,l+i),r(2146959360,a,l+s);else if(o>17976931348623157e292)r(0,a,l+i),r((c<<31|2146435072)>>>0,a,l+s);else{var d;if(o<22250738585072014e-324)d=o/5e-324,r(d>>>0,a,l+i),r((c<<31|d/4294967296)>>>0,a,l+s);else{var h=Math.floor(Math.log(o)/Math.LN2);h===1024&&(h=1023),d=o*Math.pow(2,-h),r(d*4503599627370496>>>0,a,l+i),r((c<<31|h+1023<<20|d*1048576&1048575)>>>0,a,l+s)}}}t.writeDoubleLE=e.bind(null,Mm,0,4),t.writeDoubleBE=e.bind(null,km,4,0);function n(r,i,s,o,a){var l=r(o,a+i),c=r(o,a+s),d=(c>>31)*2+1,h=c>>>20&2047,f=4294967296*(c&1048575)+l;return h===2047?f?NaN:d*(1/0):h===0?d*5e-324*f:d*Math.pow(2,h-1075)*(f+4503599627370496)}t.readDoubleLE=n.bind(null,Pm,0,4),t.readDoubleBE=n.bind(null,Fm,4,0)}(),t}function Mm(t,e,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function km(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=t&255}function Pm(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function Fm(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var Tu=g((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var Um=g(Vm=>{"use strict";var bu=Vm;bu.length=function(e){for(var n=0,r=0,i=0;i<e.length;++i)r=e.charCodeAt(i),r<128?n+=1:r<2048?n+=2:(r&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,n+=4):n+=3;return n};bu.read=function(e,n,r){var i=r-n;if(i<1)return"";for(var s=null,o=[],a=0,l;n<r;)l=e[n++],l<128?o[a++]=l:l>191&&l<224?o[a++]=(l&31)<<6|e[n++]&63:l>239&&l<365?(l=((l&7)<<18|(e[n++]&63)<<12|(e[n++]&63)<<6|e[n++]&63)-65536,o[a++]=55296+(l>>10),o[a++]=56320+(l&1023)):o[a++]=(l&15)<<12|(e[n++]&63)<<6|e[n++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};bu.write=function(e,n,r){for(var i=r,s,o,a=0;a<e.length;++a)s=e.charCodeAt(a),s<128?n[r++]=s:s<2048?(n[r++]=s>>6|192,n[r++]=s&63|128):(s&64512)===55296&&((o=e.charCodeAt(a+1))&64512)===56320?(s=65536+((s&1023)<<10)+(o&1023),++a,n[r++]=s>>18|240,n[r++]=s>>12&63|128,n[r++]=s>>6&63|128,n[r++]=s&63|128):(n[r++]=s>>12|224,n[r++]=s>>6&63|128,n[r++]=s&63|128);return r-i}});var zm=g((ON,qm)=>{"use strict";qm.exports=YT;function YT(t,e,n){var r=n||8192,i=r>>>1,s=null,o=r;return function(l){if(l<1||l>i)return t(l);o+l>r&&(s=t(r),o=0);var c=e.call(s,o,o+=l);return o&7&&(o=(o|7)+1),c}}});var Gm=g((xN,jm)=>{"use strict";jm.exports=we;var Ui=Ft();function we(t,e){this.lo=t>>>0,this.hi=e>>>0}var Qn=we.zero=new we(0,0);Qn.toNumber=function(){return 0};Qn.zzEncode=Qn.zzDecode=function(){return this};Qn.length=function(){return 1};var JT=we.zeroHash="\0\0\0\0\0\0\0\0";we.fromNumber=function(e){if(e===0)return Qn;var n=e<0;n&&(e=-e);var r=e>>>0,i=(e-r)/4294967296>>>0;return n&&(i=~i>>>0,r=~r>>>0,++r>4294967295&&(r=0,++i>4294967295&&(i=0))),new we(r,i)};we.from=function(e){if(typeof e=="number")return we.fromNumber(e);if(Ui.isString(e))if(Ui.Long)e=Ui.Long.fromString(e);else return we.fromNumber(parseInt(e,10));return e.low||e.high?new we(e.low>>>0,e.high>>>0):Qn};we.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var n=~this.lo+1>>>0,r=~this.hi>>>0;return n||(r=r+1>>>0),-(n+r*4294967296)}return this.lo+this.hi*4294967296};we.prototype.toLong=function(e){return Ui.Long?new Ui.Long(this.lo|0,this.hi|0,!!e):{low:this.lo|0,high:this.hi|0,unsigned:!!e}};var wn=String.prototype.charCodeAt;we.fromHash=function(e){return e===JT?Qn:new we((wn.call(e,0)|wn.call(e,1)<<8|wn.call(e,2)<<16|wn.call(e,3)<<24)>>>0,(wn.call(e,4)|wn.call(e,5)<<8|wn.call(e,6)<<16|wn.call(e,7)<<24)>>>0)};we.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};we.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};we.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};we.prototype.length=function(){var e=this.lo,n=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return r===0?n===0?e<16384?e<128?1:2:e<2097152?3:4:n<16384?n<128?5:6:n<2097152?7:8:r<128?9:10}});var Ft=g(Iu=>{"use strict";var x=Iu;x.asPromise=Cu();x.base64=Rm();x.EventEmitter=xm();x.float=Bm();x.inquire=Tu();x.utf8=Um();x.pool=zm();x.LongBits=Gm();x.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);x.global=x.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||Iu;x.emptyArray=Object.freeze?Object.freeze([]):[];x.emptyObject=Object.freeze?Object.freeze({}):{};x.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};x.isString=function(e){return typeof e=="string"||e instanceof String};x.isObject=function(e){return e&&typeof e=="object"};x.isset=x.isSet=function(e,n){var r=e[n];return r!=null&&e.hasOwnProperty(n)?typeof r!="object"||(Array.isArray(r)?r.length:Object.keys(r).length)>0:!1};x.Buffer=function(){try{var t=x.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch{return null}}();x._Buffer_from=null;x._Buffer_allocUnsafe=null;x.newBuffer=function(e){return typeof e=="number"?x.Buffer?x._Buffer_allocUnsafe(e):new x.Array(e):x.Buffer?x._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};x.Array=typeof Uint8Array<"u"?Uint8Array:Array;x.Long=x.global.dcodeIO&&x.global.dcodeIO.Long||x.global.Long||x.inquire("long");x.key2Re=/^true|false|0|1$/;x.key32Re=/^-?(?:0|[1-9][0-9]*)$/;x.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;x.longToHash=function(e){return e?x.LongBits.from(e).toHash():x.LongBits.zeroHash};x.longFromHash=function(e,n){var r=x.LongBits.fromHash(e);return x.Long?x.Long.fromBits(r.lo,r.hi,n):r.toNumber(!!n)};function Hm(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;++i)(t[r[i]]===void 0||!n)&&(t[r[i]]=e[r[i]]);return t}x.merge=Hm;x.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function $m(t){function e(n,r){if(!(this instanceof e))return new e(n,r);Object.defineProperty(this,"message",{get:function(){return n}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),r&&Hm(this,r)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}x.newError=$m;x.ProtocolError=$m("ProtocolError");x.oneOfGetter=function(e){for(var n={},r=0;r<e.length;++r)n[e[r]]=1;return function(){for(var i=Object.keys(this),s=i.length-1;s>-1;--s)if(n[i[s]]===1&&this[i[s]]!==void 0&&this[i[s]]!==null)return i[s]}};x.oneOfSetter=function(e){return function(n){for(var r=0;r<e.length;++r)e[r]!==n&&delete this[e[r]]}};x.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};x._configure=function(){var t=x.Buffer;if(!t){x._Buffer_from=x._Buffer_allocUnsafe=null;return}x._Buffer_from=t.from!==Uint8Array.from&&t.from||function(n,r){return new t(n,r)},x._Buffer_allocUnsafe=t.allocUnsafe||function(n){return new t(n)}}});var xo=g((MN,Ym)=>{"use strict";Ym.exports=G;var ct=Ft(),Au,Oo=ct.LongBits,Wm=ct.base64,Km=ct.utf8;function qi(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function Ru(){}function XT(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function G(){this.len=0,this.head=new qi(Ru,0,0),this.tail=this.head,this.states=null}var Qm=function(){return ct.Buffer?function(){return(G.create=function(){return new Au})()}:function(){return new G}};G.create=Qm();G.alloc=function(e){return new ct.Array(e)};ct.Array!==Array&&(G.alloc=ct.pool(G.alloc,ct.Array.prototype.subarray));G.prototype._push=function(e,n,r){return this.tail=this.tail.next=new qi(e,n,r),this.len+=n,this};function Ou(t,e,n){e[n]=t&255}function ZT(t,e,n){for(;t>127;)e[n++]=t&127|128,t>>>=7;e[n]=t}function xu(t,e){this.len=t,this.next=void 0,this.val=e}xu.prototype=Object.create(qi.prototype);xu.prototype.fn=ZT;G.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new xu((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};G.prototype.int32=function(e){return e<0?this._push(Nu,10,Oo.fromNumber(e)):this.uint32(e)};G.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function Nu(t,e,n){for(;t.hi;)e[n++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[n++]=t.lo&127|128,t.lo=t.lo>>>7;e[n++]=t.lo}G.prototype.uint64=function(e){var n=Oo.from(e);return this._push(Nu,n.length(),n)};G.prototype.int64=G.prototype.uint64;G.prototype.sint64=function(e){var n=Oo.from(e).zzEncode();return this._push(Nu,n.length(),n)};G.prototype.bool=function(e){return this._push(Ou,1,e?1:0)};function Du(t,e,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}G.prototype.fixed32=function(e){return this._push(Du,4,e>>>0)};G.prototype.sfixed32=G.prototype.fixed32;G.prototype.fixed64=function(e){var n=Oo.from(e);return this._push(Du,4,n.lo)._push(Du,4,n.hi)};G.prototype.sfixed64=G.prototype.fixed64;G.prototype.float=function(e){return this._push(ct.float.writeFloatLE,4,e)};G.prototype.double=function(e){return this._push(ct.float.writeDoubleLE,8,e)};var eb=ct.Array.prototype.set?function(e,n,r){n.set(e,r)}:function(e,n,r){for(var i=0;i<e.length;++i)n[r+i]=e[i]};G.prototype.bytes=function(e){var n=e.length>>>0;if(!n)return this._push(Ou,1,0);if(ct.isString(e)){var r=G.alloc(n=Wm.length(e));Wm.decode(e,r,0),e=r}return this.uint32(n)._push(eb,n,e)};G.prototype.string=function(e){var n=Km.length(e);return n?this.uint32(n)._push(Km.write,n,e):this._push(Ou,1,0)};G.prototype.fork=function(){return this.states=new XT(this),this.head=this.tail=new qi(Ru,0,0),this.len=0,this};G.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new qi(Ru,0,0),this.len=0),this};G.prototype.ldelim=function(){var e=this.head,n=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=n,this.len+=r),this};G.prototype.finish=function(){for(var e=this.head.next,n=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,n,r),r+=e.len,e=e.next;return n};G._configure=function(t){Au=t,G.create=Qm(),Au._configure()}});var Zm=g((kN,Xm)=>{"use strict";Xm.exports=Lt;var Jm=xo();(Lt.prototype=Object.create(Jm.prototype)).constructor=Lt;var Cn=Ft();function Lt(){Jm.call(this)}Lt._configure=function(){Lt.alloc=Cn._Buffer_allocUnsafe,Lt.writeBytesBuffer=Cn.Buffer&&Cn.Buffer.prototype instanceof Uint8Array&&Cn.Buffer.prototype.set.name==="set"?function(e,n,r){n.set(e,r)}:function(e,n,r){if(e.copy)e.copy(n,r,0,e.length);else for(var i=0;i<e.length;)n[r++]=e[i++]}};Lt.prototype.bytes=function(e){Cn.isString(e)&&(e=Cn._Buffer_from(e,"base64"));var n=e.length>>>0;return this.uint32(n),n&&this._push(Lt.writeBytesBuffer,n,e),this};function tb(t,e,n){t.length<40?Cn.utf8.write(t,e,n):e.utf8Write?e.utf8Write(t,n):e.write(t,n)}Lt.prototype.string=function(e){var n=Cn.Buffer.byteLength(e);return this.uint32(n),n&&this._push(tb,n,e),this};Lt._configure()});var Mo=g((PN,iy)=>{"use strict";iy.exports=fe;var Et=Ft(),ku,ny=Et.LongBits,nb=Et.utf8;function wt(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function fe(t){this.buf=t,this.pos=0,this.len=t.length}var ey=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new fe(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new fe(e);throw Error("illegal buffer")},ry=function(){return Et.Buffer?function(n){return(fe.create=function(i){return Et.Buffer.isBuffer(i)?new ku(i):ey(i)})(n)}:ey};fe.create=ry();fe.prototype._slice=Et.Array.prototype.subarray||Et.Array.prototype.slice;fe.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,wt(this,10);return e}}();fe.prototype.int32=function(){return this.uint32()|0};fe.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function Mu(){var t=new ny(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw wt(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw wt(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}fe.prototype.bool=function(){return this.uint32()!==0};function No(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}fe.prototype.fixed32=function(){if(this.pos+4>this.len)throw wt(this,4);return No(this.buf,this.pos+=4)};fe.prototype.sfixed32=function(){if(this.pos+4>this.len)throw wt(this,4);return No(this.buf,this.pos+=4)|0};function ty(){if(this.pos+8>this.len)throw wt(this,8);return new ny(No(this.buf,this.pos+=4),No(this.buf,this.pos+=4))}fe.prototype.float=function(){if(this.pos+4>this.len)throw wt(this,4);var e=Et.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};fe.prototype.double=function(){if(this.pos+8>this.len)throw wt(this,4);var e=Et.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};fe.prototype.bytes=function(){var e=this.uint32(),n=this.pos,r=this.pos+e;if(r>this.len)throw wt(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(n,r);if(n===r){var i=Et.Buffer;return i?i.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,n,r)};fe.prototype.string=function(){var e=this.bytes();return nb.read(e,0,e.length)};fe.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw wt(this,e);this.pos+=e}else do if(this.pos>=this.len)throw wt(this);while(this.buf[this.pos++]&128);return this};fe.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};fe._configure=function(t){ku=t,fe.create=ry(),ku._configure();var e=Et.Long?"toLong":"toNumber";Et.merge(fe.prototype,{int64:function(){return Mu.call(this)[e](!1)},uint64:function(){return Mu.call(this)[e](!0)},sint64:function(){return Mu.call(this).zzDecode()[e](!1)},fixed64:function(){return ty.call(this)[e](!0)},sfixed64:function(){return ty.call(this)[e](!1)}})}});var ly=g((FN,ay)=>{"use strict";ay.exports=Yn;var oy=Mo();(Yn.prototype=Object.create(oy.prototype)).constructor=Yn;var sy=Ft();function Yn(t){oy.call(this,t)}Yn._configure=function(){sy.Buffer&&(Yn.prototype._slice=sy.Buffer.prototype.slice)};Yn.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};Yn._configure()});var uy=g((LN,cy)=>{"use strict";cy.exports=zi;var Pu=Ft();(zi.prototype=Object.create(Pu.EventEmitter.prototype)).constructor=zi;function zi(t,e,n){if(typeof t!="function")throw TypeError("rpcImpl must be a function");Pu.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=!!e,this.responseDelimited=!!n}zi.prototype.rpcCall=function t(e,n,r,i,s){if(!i)throw TypeError("request must be specified");var o=this;if(!s)return Pu.asPromise(t,o,e,n,r,i);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(e,n[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(l,c){if(l)return o.emit("error",l,e),s(l);if(c===null){o.end(!0);return}if(!(c instanceof r))try{c=r[o.responseDelimited?"decodeDelimited":"decode"](c)}catch(d){return o.emit("error",d,e),s(d)}return o.emit("data",c,e),s(null,c)})}catch(a){o.emit("error",a,e),setTimeout(function(){s(a)},0);return}};zi.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Fu=g(dy=>{"use strict";var rb=dy;rb.Service=uy()});var Lu=g((VN,hy)=>{"use strict";hy.exports={}});var gy=g(py=>{"use strict";var Qe=py;Qe.build="minimal";Qe.Writer=xo();Qe.BufferWriter=Zm();Qe.Reader=Mo();Qe.BufferReader=ly();Qe.util=Ft();Qe.rpc=Fu();Qe.roots=Lu();Qe.configure=fy;function fy(){Qe.util._configure(),Qe.Writer._configure(Qe.BufferWriter),Qe.Reader._configure(Qe.BufferReader)}fy()});var yy=g((qN,my)=>{"use strict";my.exports=Bu;function Bu(t,e){typeof t=="string"&&(e=t,t=void 0);var n=[];function r(s){if(typeof s!="string"){var o=i();if(Bu.verbose&&console.log("codegen: "+o),o="return "+o,s){for(var a=Object.keys(s),l=new Array(a.length+1),c=new Array(a.length),d=0;d<a.length;)l[d]=a[d],c[d]=s[a[d++]];return l[d]=o,Function.apply(null,l).apply(null,c)}return Function(o)()}for(var h=new Array(arguments.length-1),f=0;f<h.length;)h[f]=arguments[++f];if(f=0,s=s.replace(/%([%dfijs])/g,function(m,_){var C=h[f++];switch(_){case"d":case"f":return String(Number(C));case"i":return String(Math.floor(C));case"j":return JSON.stringify(C);case"s":return String(C)}return"%"}),f!==h.length)throw Error("parameter count mismatch");return n.push(s),r}function i(s){return"function "+(s||e||"")+"("+(t&&t.join(",")||"")+`){
  `+n.join(`
  `)+`
}`}return r.toString=i,r}Bu.verbose=!1});var _y=g((zN,vy)=>{"use strict";vy.exports=ji;var ib=Cu(),sb=Tu(),Vu=sb("fs");function ji(t,e,n){return typeof e=="function"?(n=e,e={}):e||(e={}),n?!e.xhr&&Vu&&Vu.readFile?Vu.readFile(t,function(i,s){return i&&typeof XMLHttpRequest<"u"?ji.xhr(t,e,n):i?n(i):n(null,e.binary?s:s.toString("utf8"))}):ji.xhr(t,e,n):ib(ji,this,t,e)}ji.xhr=function(e,n,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===4){if(i.status!==0&&i.status!==200)return r(Error("status "+i.status));if(n.binary){var o=i.response;if(!o){o=[];for(var a=0;a<i.responseText.length;++a)o.push(i.responseText.charCodeAt(a)&255)}return r(null,typeof Uint8Array<"u"?new Uint8Array(o):o)}return r(null,i.responseText)}},n.binary&&("overrideMimeType"in i&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.responseType="arraybuffer"),i.open("GET",e),i.send()}});var wy=g(Ey=>{"use strict";var qu=Ey,Sy=qu.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},Uu=qu.normalize=function(e){e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var n=e.split("/"),r=Sy(e),i="";r&&(i=n.shift()+"/");for(var s=0;s<n.length;)n[s]===".."?s>0&&n[s-1]!==".."?n.splice(--s,2):r?n.splice(s,1):++s:n[s]==="."?n.splice(s,1):++s;return i+n.join("/")};qu.resolve=function(e,n,r){return r||(n=Uu(n)),Sy(n)?n:(r||(e=Uu(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?Uu(e+"/"+n):n)}});var Jn=g(Cy=>{"use strict";var Gi=Cy,ob=Ce(),ab=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function Hi(t,e){var n=0,r={};for(e|=0;n<t.length;)r[ab[n+e]]=t[n++];return r}Gi.basic=Hi([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);Gi.defaults=Hi([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",ob.emptyArray,null]);Gi.long=Hi([0,0,0,1,1],7);Gi.mapKey=Hi([0,0,0,5,5,0,0,0,1,1,0,2],2);Gi.packed=Hi([1,5,0,0,0,5,5,0,0,0,1,1,0])});var Tn=g((HN,Iy)=>{"use strict";Iy.exports=ut;var ko=Xn();((ut.prototype=Object.create(ko.prototype)).constructor=ut).className="Field";var Ty=Ct(),by=Jn(),ye=Ce(),zu,lb=/^required|optional|repeated$/;ut.fromJSON=function(e,n){return new ut(e,n.id,n.type,n.rule,n.extend,n.options,n.comment)};function ut(t,e,n,r,i,s,o){if(ye.isObject(r)?(o=i,s=r,r=i=void 0):ye.isObject(i)&&(o=s,s=i,i=void 0),ko.call(this,t,s),!ye.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!ye.isString(n))throw TypeError("type must be a string");if(r!==void 0&&!lb.test(r=r.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(i!==void 0&&!ye.isString(i))throw TypeError("extend must be a string");r==="proto3_optional"&&(r="optional"),this.rule=r&&r!=="optional"?r:void 0,this.type=n,this.id=e,this.extend=i||void 0,this.required=r==="required",this.optional=!this.required,this.repeated=r==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=ye.Long?by.long[n]!==void 0:!1,this.bytes=n==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=o}Object.defineProperty(ut.prototype,"packed",{get:function(){return this._packed===null&&(this._packed=this.getOption("packed")!==!1),this._packed}});ut.prototype.setOption=function(e,n,r){return e==="packed"&&(this._packed=null),ko.prototype.setOption.call(this,e,n,r)};ut.prototype.toJSON=function(e){var n=e?!!e.keepComments:!1;return ye.toObject(["rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",n?this.comment:void 0])};ut.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=by.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof zu?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof Ty&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&((this.options.packed===!0||this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof Ty))&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=ye.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var e;ye.base64.test(this.typeDefault)?ye.base64.decode(this.typeDefault,e=ye.newBuffer(ye.base64.length(this.typeDefault)),0):ye.utf8.write(this.typeDefault,e=ye.newBuffer(ye.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=ye.emptyObject:this.repeated?this.defaultValue=ye.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof zu&&(this.parent.ctor.prototype[this.name]=this.defaultValue),ko.prototype.resolve.call(this)};ut.d=function(e,n,r,i){return typeof n=="function"?n=ye.decorateType(n).name:n&&typeof n=="object"&&(n=ye.decorateEnum(n).name),function(o,a){ye.decorateType(o.constructor).add(new ut(a,e,n,r,{default:i}))}};ut._configure=function(e){zu=e}});var kr=g(($N,Ry)=>{"use strict";Ry.exports=dt;var Fo=Xn();((dt.prototype=Object.create(Fo.prototype)).constructor=dt).className="OneOf";var Ay=Tn(),Po=Ce();function dt(t,e,n,r){if(Array.isArray(e)||(n=e,e=void 0),Fo.call(this,t,n),!(e===void 0||Array.isArray(e)))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[],this.comment=r}dt.fromJSON=function(e,n){return new dt(e,n.oneof,n.options,n.comment)};dt.prototype.toJSON=function(e){var n=e?!!e.keepComments:!1;return Po.toObject(["options",this.options,"oneof",this.oneof,"comment",n?this.comment:void 0])};function Dy(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e)t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e])}dt.prototype.add=function(e){if(!(e instanceof Ay))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,Dy(this),this};dt.prototype.remove=function(e){if(!(e instanceof Ay))throw TypeError("field must be a Field");var n=this.fieldsArray.indexOf(e);if(n<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(n,1),n=this.oneof.indexOf(e.name),n>-1&&this.oneof.splice(n,1),e.partOf=null,this};dt.prototype.onAdd=function(e){Fo.prototype.onAdd.call(this,e);for(var n=this,r=0;r<this.oneof.length;++r){var i=e.get(this.oneof[r]);i&&!i.partOf&&(i.partOf=n,n.fieldsArray.push(i))}Dy(this)};dt.prototype.onRemove=function(e){for(var n=0,r;n<this.fieldsArray.length;++n)(r=this.fieldsArray[n]).parent&&r.parent.remove(r);Fo.prototype.onRemove.call(this,e)};dt.d=function(){for(var e=new Array(arguments.length),n=0;n<arguments.length;)e[n]=arguments[n++];return function(i,s){Po.decorateType(i.constructor).add(new dt(s,e)),Object.defineProperty(i,s,{get:Po.oneOfGetter(e),set:Po.oneOfSetter(e)})}}});var Lr=g((WN,My)=>{"use strict";My.exports=$;var ju=Xn();(($.prototype=Object.create(ju.prototype)).constructor=$).className="Namespace";var Oy=Tn(),Lo=Ce(),cb=kr(),Pr,$i,Fr;$.fromJSON=function(e,n){return new $(e,n.options).addJSON(n.nested)};function xy(t,e){if(t&&t.length){for(var n={},r=0;r<t.length;++r)n[t[r].name]=t[r].toJSON(e);return n}}$.arrayToJSON=xy;$.isReservedId=function(e,n){if(e){for(var r=0;r<e.length;++r)if(typeof e[r]!="string"&&e[r][0]<=n&&e[r][1]>n)return!0}return!1};$.isReservedName=function(e,n){if(e){for(var r=0;r<e.length;++r)if(e[r]===n)return!0}return!1};function $(t,e){ju.call(this,t,e),this.nested=void 0,this._nestedArray=null}function Ny(t){return t._nestedArray=null,t}Object.defineProperty($.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=Lo.toArray(this.nested))}});$.prototype.toJSON=function(e){return Lo.toObject(["options",this.options,"nested",xy(this.nestedArray,e)])};$.prototype.addJSON=function(e){var n=this;if(e)for(var r=Object.keys(e),i=0,s;i<r.length;++i)s=e[r[i]],n.add((s.fields!==void 0?Pr.fromJSON:s.values!==void 0?Fr.fromJSON:s.methods!==void 0?$i.fromJSON:s.id!==void 0?Oy.fromJSON:$.fromJSON)(r[i],s));return this};$.prototype.get=function(e){return this.nested&&this.nested[e]||null};$.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof Fr)return this.nested[e].values;throw Error("no such enum: "+e)};$.prototype.add=function(e){if(!(e instanceof Oy&&e.extend!==void 0||e instanceof Pr||e instanceof cb||e instanceof Fr||e instanceof $i||e instanceof $))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var n=this.get(e.name);if(n)if(n instanceof $&&e instanceof $&&!(n instanceof Pr||n instanceof $i)){for(var r=n.nestedArray,i=0;i<r.length;++i)e.add(r[i]);this.remove(n),this.nested||(this.nested={}),e.setOptions(n.options,!0)}else throw Error("duplicate name '"+e.name+"' in "+this)}return this.nested[e.name]=e,e.onAdd(this),Ny(this)};$.prototype.remove=function(e){if(!(e instanceof ju))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),Ny(this)};$.prototype.define=function(e,n){if(Lo.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&e[0]==="")throw Error("path must be relative");for(var r=this;e.length>0;){var i=e.shift();if(r.nested&&r.nested[i]){if(r=r.nested[i],!(r instanceof $))throw Error("path conflicts with non-namespace objects")}else r.add(r=new $(i))}return n&&r.addJSON(n),r};$.prototype.resolveAll=function(){for(var e=this.nestedArray,n=0;n<e.length;)e[n]instanceof $?e[n++].resolveAll():e[n++].resolve();return this.resolve()};$.prototype.lookup=function(e,n,r){if(typeof n=="boolean"?(r=n,n=void 0):n&&!Array.isArray(n)&&(n=[n]),Lo.isString(e)&&e.length){if(e===".")return this.root;e=e.split(".")}else if(!e.length)return this;if(e[0]==="")return this.root.lookup(e.slice(1),n);var i=this.get(e[0]);if(i){if(e.length===1){if(!n||n.indexOf(i.constructor)>-1)return i}else if(i instanceof $&&(i=i.lookup(e.slice(1),n,!0)))return i}else for(var s=0;s<this.nestedArray.length;++s)if(this._nestedArray[s]instanceof $&&(i=this._nestedArray[s].lookup(e,n,!0)))return i;return this.parent===null||r?null:this.parent.lookup(e,n)};$.prototype.lookupType=function(e){var n=this.lookup(e,[Pr]);if(!n)throw Error("no such type: "+e);return n};$.prototype.lookupEnum=function(e){var n=this.lookup(e,[Fr]);if(!n)throw Error("no such Enum '"+e+"' in "+this);return n};$.prototype.lookupTypeOrEnum=function(e){var n=this.lookup(e,[Pr,Fr]);if(!n)throw Error("no such Type or Enum '"+e+"' in "+this);return n};$.prototype.lookupService=function(e){var n=this.lookup(e,[$i]);if(!n)throw Error("no such Service '"+e+"' in "+this);return n};$._configure=function(t,e,n){Pr=t,$i=e,Fr=n}});var Bo=g((KN,ky)=>{"use strict";ky.exports=Zt;var Gu=Tn();((Zt.prototype=Object.create(Gu.prototype)).constructor=Zt).className="MapField";var ub=Jn(),Wi=Ce();function Zt(t,e,n,r,i,s){if(Gu.call(this,t,e,r,void 0,void 0,i,s),!Wi.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}Zt.fromJSON=function(e,n){return new Zt(e,n.id,n.keyType,n.type,n.options,n.comment)};Zt.prototype.toJSON=function(e){var n=e?!!e.keepComments:!1;return Wi.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",n?this.comment:void 0])};Zt.prototype.resolve=function(){if(this.resolved)return this;if(ub.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return Gu.prototype.resolve.call(this)};Zt.d=function(e,n,r){return typeof r=="function"?r=Wi.decorateType(r).name:r&&typeof r=="object"&&(r=Wi.decorateEnum(r).name),function(s,o){Wi.decorateType(s.constructor).add(new Zt(o,e,n,r))}}});var Vo=g((QN,Py)=>{"use strict";Py.exports=Zn;var Hu=Xn();((Zn.prototype=Object.create(Hu.prototype)).constructor=Zn).className="Method";var Br=Ce();function Zn(t,e,n,r,i,s,o,a,l){if(Br.isObject(i)?(o=i,i=s=void 0):Br.isObject(s)&&(o=s,s=void 0),!(e===void 0||Br.isString(e)))throw TypeError("type must be a string");if(!Br.isString(n))throw TypeError("requestType must be a string");if(!Br.isString(r))throw TypeError("responseType must be a string");Hu.call(this,t,o),this.type=e||"rpc",this.requestType=n,this.requestStream=i?!0:void 0,this.responseType=r,this.responseStream=s?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=a,this.parsedOptions=l}Zn.fromJSON=function(e,n){return new Zn(e,n.type,n.requestType,n.responseType,n.requestStream,n.responseStream,n.options,n.comment,n.parsedOptions)};Zn.prototype.toJSON=function(e){var n=e?!!e.keepComments:!1;return Br.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",n?this.comment:void 0,"parsedOptions",this.parsedOptions])};Zn.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),Hu.prototype.resolve.call(this))}});var Uo=g((YN,Ly)=>{"use strict";Ly.exports=ht;var bn=Lr();((ht.prototype=Object.create(bn.prototype)).constructor=ht).className="Service";var $u=Vo(),Ki=Ce(),db=Fu();function ht(t,e){bn.call(this,t,e),this.methods={},this._methodsArray=null}ht.fromJSON=function(e,n){var r=new ht(e,n.options);if(n.methods)for(var i=Object.keys(n.methods),s=0;s<i.length;++s)r.add($u.fromJSON(i[s],n.methods[i[s]]));return n.nested&&r.addJSON(n.nested),r.comment=n.comment,r};ht.prototype.toJSON=function(e){var n=bn.prototype.toJSON.call(this,e),r=e?!!e.keepComments:!1;return Ki.toObject(["options",n&&n.options||void 0,"methods",bn.arrayToJSON(this.methodsArray,e)||{},"nested",n&&n.nested||void 0,"comment",r?this.comment:void 0])};Object.defineProperty(ht.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=Ki.toArray(this.methods))}});function Fy(t){return t._methodsArray=null,t}ht.prototype.get=function(e){return this.methods[e]||bn.prototype.get.call(this,e)};ht.prototype.resolveAll=function(){for(var e=this.methodsArray,n=0;n<e.length;++n)e[n].resolve();return bn.prototype.resolve.call(this)};ht.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof $u?(this.methods[e.name]=e,e.parent=this,Fy(this)):bn.prototype.add.call(this,e)};ht.prototype.remove=function(e){if(e instanceof $u){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,Fy(this)}return bn.prototype.remove.call(this,e)};ht.prototype.create=function(e,n,r){for(var i=new db.Service(e,n,r),s=0,o;s<this.methodsArray.length;++s){var a=Ki.lcFirst((o=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"");i[a]=Ki.codegen(["r","c"],Ki.isReserved(a)?a+"_":a)("return this.rpcCall(m,q,s,r,c)")({m:o,q:o.resolvedRequestType.ctor,s:o.resolvedResponseType.ctor})}return i}});var qo=g((JN,By)=>{"use strict";By.exports=Bt;var hb=Ft();function Bt(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)this[e[n]]=t[e[n]]}Bt.create=function(e){return this.$type.create(e)};Bt.encode=function(e,n){return this.$type.encode(e,n)};Bt.encodeDelimited=function(e,n){return this.$type.encodeDelimited(e,n)};Bt.decode=function(e){return this.$type.decode(e)};Bt.decodeDelimited=function(e){return this.$type.decodeDelimited(e)};Bt.verify=function(e){return this.$type.verify(e)};Bt.fromObject=function(e){return this.$type.fromObject(e)};Bt.toObject=function(e,n){return this.$type.toObject(e,n)};Bt.prototype.toJSON=function(){return this.$type.toObject(this,hb.toJSONOptions)}});var Wu=g((XN,Uy)=>{"use strict";Uy.exports=gb;var fb=Ct(),en=Jn(),Vy=Ce();function pb(t){return"missing required '"+t.name+"'"}function gb(t){var e=Vy.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter(function(a){return a.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&e("if((t&7)===4)")("break"),e("switch(t>>>3){");for(var n=0;n<t.fieldsArray.length;++n){var r=t._fieldsArray[n].resolve(),i=r.resolvedType instanceof fb?"int32":r.type,s="m"+Vy.safeProp(r.name);e("case %i: {",r.id),r.map?(e("if(%s===util.emptyObject)",s)("%s={}",s)("var c2 = r.uint32()+r.pos"),en.defaults[r.keyType]!==void 0?e("k=%j",en.defaults[r.keyType]):e("k=null"),en.defaults[i]!==void 0?e("value=%j",en.defaults[i]):e("value=null"),e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",r.keyType)("case 2:"),en.basic[i]===void 0?e("value=types[%i].decode(r,r.uint32())",n):e("value=r.%s()",i),e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),en.long[r.keyType]!==void 0?e('%s[typeof k==="object"?util.longToHash(k):k]=value',s):e("%s[k]=value",s)):r.repeated?(e("if(!(%s&&%s.length))",s,s)("%s=[]",s),en.packed[i]!==void 0&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",s,i)("}else"),en.basic[i]===void 0?e(r.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",s,n):e("%s.push(r.%s())",s,i)):en.basic[i]===void 0?e(r.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",s,n):e("%s=r.%s()",s,i),e("break")("}")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<t._fieldsArray.length;++n){var o=t._fieldsArray[n];o.required&&e("if(!m.hasOwnProperty(%j))",o.name)("throw util.ProtocolError(%j,{instance:m})",pb(o))}return e("return m")}});var Yu=g((ZN,qy)=>{"use strict";qy.exports=vb;var mb=Ct(),Ku=Ce();function ft(t,e){return t.name+": "+e+(t.repeated&&e!=="array"?"[]":t.map&&e!=="object"?"{k:"+t.keyType+"}":"")+" expected"}function Qu(t,e,n,r){if(e.resolvedType)if(e.resolvedType instanceof mb){t("switch(%s){",r)("default:")("return%j",ft(e,"enum value"));for(var i=Object.keys(e.resolvedType.values),s=0;s<i.length;++s)t("case %i:",e.resolvedType.values[i[s]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",n,r)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",r)("return%j",ft(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",r,r,r,r)("return%j",ft(e,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',r)("return%j",ft(e,"number"));break;case"bool":t('if(typeof %s!=="boolean")',r)("return%j",ft(e,"boolean"));break;case"string":t("if(!util.isString(%s))",r)("return%j",ft(e,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',r,r,r)("return%j",ft(e,"buffer"));break}return t}function yb(t,e,n){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",n)("return%j",ft(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",n)("return%j",ft(e,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",n)("return%j",ft(e,"boolean key"));break}return t}function vb(t){var e=Ku.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n=t.oneofsArray,r={};n.length&&e("var p={}");for(var i=0;i<t.fieldsArray.length;++i){var s=t._fieldsArray[i].resolve(),o="m"+Ku.safeProp(s.name);if(s.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",o,s.name),s.map)e("if(!util.isObject(%s))",o)("return%j",ft(s,"object"))("var k=Object.keys(%s)",o)("for(var i=0;i<k.length;++i){"),yb(e,s,"k[i]"),Qu(e,s,i,o+"[k[i]]")("}");else if(s.repeated)e("if(!Array.isArray(%s))",o)("return%j",ft(s,"array"))("for(var i=0;i<%s.length;++i){",o),Qu(e,s,i,o+"[i]")("}");else{if(s.partOf){var a=Ku.safeProp(s.partOf.name);r[s.partOf.name]===1&&e("if(p%s===1)",a)("return%j",s.partOf.name+": multiple values"),r[s.partOf.name]=1,e("p%s=1",a)}Qu(e,s,i,o)}s.optional&&e("}")}return e("return null")}});var Zu=g(jy=>{"use strict";var zy=jy,Qi=Ct(),Vt=Ce();function Ju(t,e,n,r){var i=!1;if(e.resolvedType)if(e.resolvedType instanceof Qi){t("switch(d%s){",r);for(var s=e.resolvedType.values,o=Object.keys(s),a=0;a<o.length;++a)s[o[a]]===e.typeDefault&&!i&&(t("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',r,r,r),e.repeated||t("break"),i=!0),t("case%j:",o[a])("case %i:",s[o[a]])("m%s=%j",r,s[o[a]])("break");t("}")}else t('if(typeof d%s!=="object")',r)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,n,r);else{var l=!1;switch(e.type){case"double":case"float":t("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",r,r);break;case"uint64":l=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,l)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,l?"true":"");break;case"bytes":t('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length >= 0)",r)("m%s=d%s",r,r);break;case"string":t("m%s=String(d%s)",r,r);break;case"bool":t("m%s=Boolean(d%s)",r,r);break}}return t}zy.fromObject=function(e){var n=e.fieldsArray,r=Vt.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!n.length)return r("return new this.ctor");r("var m=new this.ctor");for(var i=0;i<n.length;++i){var s=n[i].resolve(),o=Vt.safeProp(s.name);s.map?(r("if(d%s){",o)('if(typeof d%s!=="object")',o)("throw TypeError(%j)",s.fullName+": object expected")("m%s={}",o)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",o),Ju(r,s,i,o+"[ks[i]]")("}")("}")):s.repeated?(r("if(d%s){",o)("if(!Array.isArray(d%s))",o)("throw TypeError(%j)",s.fullName+": array expected")("m%s=[]",o)("for(var i=0;i<d%s.length;++i){",o),Ju(r,s,i,o+"[i]")("}")("}")):(s.resolvedType instanceof Qi||r("if(d%s!=null){",o),Ju(r,s,i,o),s.resolvedType instanceof Qi||r("}"))}return r("return m")};function Xu(t,e,n,r){if(e.resolvedType)e.resolvedType instanceof Qi?t("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",r,n,r,r,n,r,r):t("d%s=types[%i].toObject(m%s,o)",r,n,r);else{var i=!1;switch(e.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,i?"true":"",r);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:t("d%s=m%s",r,r);break}}return t}zy.toObject=function(e){var n=e.fieldsArray.slice().sort(Vt.compareFieldsById);if(!n.length)return Vt.codegen()("return {}");for(var r=Vt.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),i=[],s=[],o=[],a=0;a<n.length;++a)n[a].partOf||(n[a].resolve().repeated?i:n[a].map?s:o).push(n[a]);if(i.length){for(r("if(o.arrays||o.defaults){"),a=0;a<i.length;++a)r("d%s=[]",Vt.safeProp(i[a].name));r("}")}if(s.length){for(r("if(o.objects||o.defaults){"),a=0;a<s.length;++a)r("d%s={}",Vt.safeProp(s[a].name));r("}")}if(o.length){for(r("if(o.defaults){"),a=0;a<o.length;++a){var l=o[a],c=Vt.safeProp(l.name);if(l.resolvedType instanceof Qi)r("d%s=o.enums===String?%j:%j",c,l.resolvedType.valuesById[l.typeDefault],l.typeDefault);else if(l.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",l.typeDefault.low,l.typeDefault.high,l.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",c)("}else")("d%s=o.longs===String?%j:%i",c,l.typeDefault.toString(),l.typeDefault.toNumber());else if(l.bytes){var d="["+Array.prototype.slice.call(l.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",c,String.fromCharCode.apply(String,l.typeDefault))("else{")("d%s=%s",c,d)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",c,c)("}")}else r("d%s=%j",c,l.typeDefault)}r("}")}var h=!1;for(a=0;a<n.length;++a){var l=n[a],f=e._fieldsArray.indexOf(l),c=Vt.safeProp(l.name);l.map?(h||(h=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",c,c)("d%s={}",c)("for(var j=0;j<ks2.length;++j){"),Xu(r,l,f,c+"[ks2[j]]")("}")):l.repeated?(r("if(m%s&&m%s.length){",c,c)("d%s=[]",c)("for(var j=0;j<m%s.length;++j){",c),Xu(r,l,f,c+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",c,l.name),Xu(r,l,f,c),l.partOf&&r("if(o.oneofs)")("d%s=%j",Vt.safeProp(l.partOf.name),l.name)),r("}")}return r("return d")}});var ed=g(Gy=>{"use strict";var _b=Gy,Sb=qo();_b[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var e=t["@type"].substring(t["@type"].lastIndexOf("/")+1),n=this.lookup(e);if(n){var r=t["@type"].charAt(0)==="."?t["@type"].slice(1):t["@type"];return r.indexOf("/")===-1&&(r="/"+r),this.create({type_url:r,value:n.encode(n.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,e){var n="type.googleapis.com/",r="",i="";if(e&&e.json&&t.type_url&&t.value){i=t.type_url.substring(t.type_url.lastIndexOf("/")+1),r=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1);var s=this.lookup(i);s&&(t=s.decode(t.value))}if(!(t instanceof this.ctor)&&t instanceof Sb){var o=t.$type.toObject(t,e),a=t.$type.fullName[0]==="."?t.$type.fullName.slice(1):t.$type.fullName;return r===""&&(r=n),i=r+a,o["@type"]=i,o}return this.toObject(t,e)}}});var Go=g((nM,$y)=>{"use strict";$y.exports=Z;var Tt=Lr();((Z.prototype=Object.create(Tt.prototype)).constructor=Z).className="Type";var Eb=Ct(),rd=kr(),zo=Tn(),wb=Bo(),Cb=Uo(),td=qo(),nd=Mo(),Tb=xo(),Pe=Ce(),bb=id(),Ib=Wu(),Ab=Yu(),Hy=Zu(),Db=ed();function Z(t,e){Tt.call(this,t,e),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(Z.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var t=Object.keys(this.fields),e=0;e<t.length;++e){var n=this.fields[t[e]],r=n.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=n}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=Pe.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=Pe.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=Z.generateConstructor(this)())},set:function(t){var e=t.prototype;e instanceof td||((t.prototype=new td).constructor=t,Pe.merge(t.prototype,e)),t.$type=t.prototype.$type=this,Pe.merge(t,td,!0),this._ctor=t;for(var n=0;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();var r={};for(n=0;n<this.oneofsArray.length;++n)r[this._oneofsArray[n].resolve().name]={get:Pe.oneOfGetter(this._oneofsArray[n].oneof),set:Pe.oneOfSetter(this._oneofsArray[n].oneof)};n&&Object.defineProperties(t.prototype,r)}}});Z.generateConstructor=function(e){for(var n=Pe.codegen(["p"],e.name),r=0,i;r<e.fieldsArray.length;++r)(i=e._fieldsArray[r]).map?n("this%s={}",Pe.safeProp(i.name)):i.repeated&&n("this%s=[]",Pe.safeProp(i.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function jo(t){return t._fieldsById=t._fieldsArray=t._oneofsArray=null,delete t.encode,delete t.decode,delete t.verify,t}Z.fromJSON=function(e,n){var r=new Z(e,n.options);r.extensions=n.extensions,r.reserved=n.reserved;for(var i=Object.keys(n.fields),s=0;s<i.length;++s)r.add((typeof n.fields[i[s]].keyType<"u"?wb.fromJSON:zo.fromJSON)(i[s],n.fields[i[s]]));if(n.oneofs)for(i=Object.keys(n.oneofs),s=0;s<i.length;++s)r.add(rd.fromJSON(i[s],n.oneofs[i[s]]));if(n.nested)for(i=Object.keys(n.nested),s=0;s<i.length;++s){var o=n.nested[i[s]];r.add((o.id!==void 0?zo.fromJSON:o.fields!==void 0?Z.fromJSON:o.values!==void 0?Eb.fromJSON:o.methods!==void 0?Cb.fromJSON:Tt.fromJSON)(i[s],o))}return n.extensions&&n.extensions.length&&(r.extensions=n.extensions),n.reserved&&n.reserved.length&&(r.reserved=n.reserved),n.group&&(r.group=!0),n.comment&&(r.comment=n.comment),r};Z.prototype.toJSON=function(e){var n=Tt.prototype.toJSON.call(this,e),r=e?!!e.keepComments:!1;return Pe.toObject(["options",n&&n.options||void 0,"oneofs",Tt.arrayToJSON(this.oneofsArray,e),"fields",Tt.arrayToJSON(this.fieldsArray.filter(function(i){return!i.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",n&&n.nested||void 0,"comment",r?this.comment:void 0])};Z.prototype.resolveAll=function(){for(var e=this.fieldsArray,n=0;n<e.length;)e[n++].resolve();var r=this.oneofsArray;for(n=0;n<r.length;)r[n++].resolve();return Tt.prototype.resolveAll.call(this)};Z.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null};Z.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof zo&&e.extend===void 0){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),jo(this)}return e instanceof rd?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),jo(this)):Tt.prototype.add.call(this,e)};Z.prototype.remove=function(e){if(e instanceof zo&&e.extend===void 0){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),jo(this)}if(e instanceof rd){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),jo(this)}return Tt.prototype.remove.call(this,e)};Z.prototype.isReservedId=function(e){return Tt.isReservedId(this.reserved,e)};Z.prototype.isReservedName=function(e){return Tt.isReservedName(this.reserved,e)};Z.prototype.create=function(e){return new this.ctor(e)};Z.prototype.setup=function(){for(var e=this.fullName,n=[],r=0;r<this.fieldsArray.length;++r)n.push(this._fieldsArray[r].resolve().resolvedType);this.encode=bb(this)({Writer:Tb,types:n,util:Pe}),this.decode=Ib(this)({Reader:nd,types:n,util:Pe}),this.verify=Ab(this)({types:n,util:Pe}),this.fromObject=Hy.fromObject(this)({types:n,util:Pe}),this.toObject=Hy.toObject(this)({types:n,util:Pe});var i=Db[e];if(i){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=i.fromObject.bind(s),s.toObject=this.toObject,this.toObject=i.toObject.bind(s)}return this};Z.prototype.encode=function(e,n){return this.setup().encode(e,n)};Z.prototype.encodeDelimited=function(e,n){return this.encode(e,n&&n.len?n.fork():n).ldelim()};Z.prototype.decode=function(e,n){return this.setup().decode(e,n)};Z.prototype.decodeDelimited=function(e){return e instanceof nd||(e=nd.create(e)),this.decode(e,e.uint32())};Z.prototype.verify=function(e){return this.setup().verify(e)};Z.prototype.fromObject=function(e){return this.setup().fromObject(e)};Z.prototype.toObject=function(e,n){return this.setup().toObject(e,n)};Z.d=function(e){return function(r){Pe.decorateType(r,e)}}});var Wo=g((rM,Jy)=>{"use strict";Jy.exports=et;var $o=Lr();((et.prototype=Object.create($o.prototype)).constructor=et).className="Root";var od=Tn(),Ky=Ct(),Rb=kr(),In=Ce(),Qy,sd,Yi;function et(t){$o.call(this,"",t),this.deferred=[],this.files=[]}et.fromJSON=function(e,n){return n||(n=new et),e.options&&n.setOptions(e.options),n.addJSON(e.nested)};et.prototype.resolvePath=In.path.resolve;et.prototype.fetch=In.fetch;function Yy(){}et.prototype.load=function t(e,n,r){typeof n=="function"&&(r=n,n=void 0);var i=this;if(!r)return In.asPromise(t,i,e,n);var s=r===Yy;function o(p,m){if(r){if(s)throw p;var _=r;r=null,_(p,m)}}function a(p){var m=p.lastIndexOf("google/protobuf/");if(m>-1){var _=p.substring(m);if(_ in Yi)return _}return null}function l(p,m){try{if(In.isString(m)&&m.charAt(0)==="{"&&(m=JSON.parse(m)),!In.isString(m))i.setOptions(m.options).addJSON(m.nested);else{sd.filename=p;var _=sd(m,i,n),C,T=0;if(_.imports)for(;T<_.imports.length;++T)(C=a(_.imports[T])||i.resolvePath(p,_.imports[T]))&&c(C);if(_.weakImports)for(T=0;T<_.weakImports.length;++T)(C=a(_.weakImports[T])||i.resolvePath(p,_.weakImports[T]))&&c(C,!0)}}catch(S){o(S)}!s&&!d&&o(null,i)}function c(p,m){if(p=a(p)||p,!(i.files.indexOf(p)>-1)){if(i.files.push(p),p in Yi){s?l(p,Yi[p]):(++d,setTimeout(function(){--d,l(p,Yi[p])}));return}if(s){var _;try{_=In.fs.readFileSync(p).toString("utf8")}catch(C){m||o(C);return}l(p,_)}else++d,i.fetch(p,function(C,T){if(--d,!!r){if(C){m?d||o(null,i):o(C);return}l(p,T)}})}}var d=0;In.isString(e)&&(e=[e]);for(var h=0,f;h<e.length;++h)(f=i.resolvePath("",e[h]))&&c(f);if(s)return i;d||o(null,i)};et.prototype.loadSync=function(e,n){if(!In.isNode)throw Error("not supported");return this.load(e,n,Yy)};et.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return $o.prototype.resolveAll.call(this)};var Ho=/^[A-Z]/;function Wy(t,e){var n=e.parent.lookup(e.extend);if(n){var r=new od(e.fullName,e.id,e.type,e.rule,void 0,e.options);return n.get(r.name)||(r.declaringField=e,e.extensionField=r,n.add(r)),!0}return!1}et.prototype._handleAdd=function(e){if(e instanceof od)e.extend!==void 0&&!e.extensionField&&(Wy(this,e)||this.deferred.push(e));else if(e instanceof Ky)Ho.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof Rb)){if(e instanceof Qy)for(var n=0;n<this.deferred.length;)Wy(this,this.deferred[n])?this.deferred.splice(n,1):++n;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);Ho.test(e.name)&&(e.parent[e.name]=e)}};et.prototype._handleRemove=function(e){if(e instanceof od){if(e.extend!==void 0)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var n=this.deferred.indexOf(e);n>-1&&this.deferred.splice(n,1)}}else if(e instanceof Ky)Ho.test(e.name)&&delete e.parent[e.name];else if(e instanceof $o){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);Ho.test(e.name)&&delete e.parent[e.name]}};et._configure=function(t,e,n){Qy=t,sd=e,Yi=n}});var Ce=g((iM,Zy)=>{"use strict";var pe=Zy.exports=Ft(),Xy=Lu(),ad,ld;pe.codegen=yy();pe.fetch=_y();pe.path=wy();pe.fs=pe.inquire("fs");pe.toArray=function(e){if(e){for(var n=Object.keys(e),r=new Array(n.length),i=0;i<n.length;)r[i]=e[n[i++]];return r}return[]};pe.toObject=function(e){for(var n={},r=0;r<e.length;){var i=e[r++],s=e[r++];s!==void 0&&(n[i]=s)}return n};var Ob=/\\/g,xb=/"/g;pe.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)};pe.safeProp=function(e){return!/^[$\w_]+$/.test(e)||pe.isReserved(e)?'["'+e.replace(Ob,"\\\\").replace(xb,'\\"')+'"]':"."+e};pe.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var Nb=/_([a-z])/g;pe.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(Nb,function(n,r){return r.toUpperCase()})};pe.compareFieldsById=function(e,n){return e.id-n.id};pe.decorateType=function(e,n){if(e.$type)return n&&e.$type.name!==n&&(pe.decorateRoot.remove(e.$type),e.$type.name=n,pe.decorateRoot.add(e.$type)),e.$type;ad||(ad=Go());var r=new ad(n||e.name);return pe.decorateRoot.add(r),r.ctor=e,Object.defineProperty(e,"$type",{value:r,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:r,enumerable:!1}),r};var Mb=0;pe.decorateEnum=function(e){if(e.$type)return e.$type;ld||(ld=Ct());var n=new ld("Enum"+Mb++,e);return pe.decorateRoot.add(n),Object.defineProperty(e,"$type",{value:n,enumerable:!1}),n};pe.setProperty=function(e,n,r){function i(s,o,a){var l=o.shift();if(l==="__proto__"||l==="prototype")return s;if(o.length>0)s[l]=i(s[l]||{},o,a);else{var c=s[l];c&&(a=[].concat(c).concat(a)),s[l]=a}return s}if(typeof e!="object")throw TypeError("dst must be an object");if(!n)throw TypeError("path must be specified");return n=n.split("."),i(e,n,r)};Object.defineProperty(pe,"decorateRoot",{get:function(){return Xy.decorated||(Xy.decorated=new(Wo()))}})});var Xn=g((sM,ev)=>{"use strict";ev.exports=tt;tt.className="ReflectionObject";var Ko=Ce(),Qo;function tt(t,e){if(!Ko.isString(t))throw TypeError("name must be a string");if(e&&!Ko.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(tt.prototype,{root:{get:function(){for(var t=this;t.parent!==null;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join(".")}}});tt.prototype.toJSON=function(){throw Error()};tt.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var n=e.root;n instanceof Qo&&n._handleAdd(this)};tt.prototype.onRemove=function(e){var n=e.root;n instanceof Qo&&n._handleRemove(this),this.parent=null,this.resolved=!1};tt.prototype.resolve=function(){return this.resolved?this:(this.root instanceof Qo&&(this.resolved=!0),this)};tt.prototype.getOption=function(e){if(this.options)return this.options[e]};tt.prototype.setOption=function(e,n,r){return(!r||!this.options||this.options[e]===void 0)&&((this.options||(this.options={}))[e]=n),this};tt.prototype.setParsedOption=function(e,n,r){this.parsedOptions||(this.parsedOptions=[]);var i=this.parsedOptions;if(r){var s=i.find(function(l){return Object.prototype.hasOwnProperty.call(l,e)});if(s){var o=s[e];Ko.setProperty(o,r,n)}else s={},s[e]=Ko.setProperty({},r,n),i.push(s)}else{var a={};a[e]=n,i.push(a)}return this};tt.prototype.setOptions=function(e,n){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)this.setOption(r[i],e[r[i]],n);return this};tt.prototype.toString=function(){var e=this.constructor.className,n=this.fullName;return n.length?e+" "+n:e};tt._configure=function(t){Qo=t}});var Ct=g((oM,rv)=>{"use strict";rv.exports=Ut;var tv=Xn();((Ut.prototype=Object.create(tv.prototype)).constructor=Ut).className="Enum";var nv=Lr(),Yo=Ce();function Ut(t,e,n,r,i,s){if(tv.call(this,t,n),e&&typeof e!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=r,this.comments=i||{},this.valuesOptions=s,this.reserved=void 0,e)for(var o=Object.keys(e),a=0;a<o.length;++a)typeof e[o[a]]=="number"&&(this.valuesById[this.values[o[a]]=e[o[a]]]=o[a])}Ut.fromJSON=function(e,n){var r=new Ut(e,n.values,n.options,n.comment,n.comments);return r.reserved=n.reserved,r};Ut.prototype.toJSON=function(e){var n=e?!!e.keepComments:!1;return Yo.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",n?this.comment:void 0,"comments",n?this.comments:void 0])};Ut.prototype.add=function(e,n,r,i){if(!Yo.isString(e))throw TypeError("name must be a string");if(!Yo.isInteger(n))throw TypeError("id must be an integer");if(this.values[e]!==void 0)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(n))throw Error("id "+n+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[n]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+n+" in "+this);this.values[e]=n}else this.valuesById[this.values[e]=n]=e;return i&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[e]=i||null),this.comments[e]=r||null,this};Ut.prototype.remove=function(e){if(!Yo.isString(e))throw TypeError("name must be a string");var n=this.values[e];if(n==null)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[n],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this};Ut.prototype.isReservedId=function(e){return nv.isReservedId(this.reserved,e)};Ut.prototype.isReservedName=function(e){return nv.isReservedName(this.reserved,e)}});var id=g((aM,sv)=>{"use strict";sv.exports=Pb;var kb=Ct(),cd=Jn(),ud=Ce();function iv(t,e,n,r){return e.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,r,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,r,(e.id<<3|2)>>>0)}function Pb(t){for(var e=ud.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),n,r,i=t.fieldsArray.slice().sort(ud.compareFieldsById),n=0;n<i.length;++n){var s=i[n].resolve(),o=t._fieldsArray.indexOf(s),a=s.resolvedType instanceof kb?"int32":s.type,l=cd.basic[a];r="m"+ud.safeProp(s.name),s.map?(e("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",r,s.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",r)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(s.id<<3|2)>>>0,8|cd.mapKey[s.keyType],s.keyType),l===void 0?e("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",o,r):e(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|l,a,r),e("}")("}")):s.repeated?(e("if(%s!=null&&%s.length){",r,r),s.packed&&cd.packed[a]!==void 0?e("w.uint32(%i).fork()",(s.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",r)("w.%s(%s[i])",a,r)("w.ldelim()"):(e("for(var i=0;i<%s.length;++i)",r),l===void 0?iv(e,s,o,r+"[i]"):e("w.uint32(%i).%s(%s[i])",(s.id<<3|l)>>>0,a,r)),e("}")):(s.optional&&e("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",r,s.name),l===void 0?iv(e,s,o,r):e("w.uint32(%i).%s(%s)",(s.id<<3|l)>>>0,a,r))}return e("return w")}});var av=g((lM,ov)=>{"use strict";var z=ov.exports=gy();z.build="light";function Fb(t,e,n){return typeof e=="function"?(n=e,e=new z.Root):e||(e=new z.Root),e.load(t,n)}z.load=Fb;function Lb(t,e){return e||(e=new z.Root),e.loadSync(t)}z.loadSync=Lb;z.encoder=id();z.decoder=Wu();z.verifier=Yu();z.converter=Zu();z.ReflectionObject=Xn();z.Namespace=Lr();z.Root=Wo();z.Enum=Ct();z.Type=Go();z.Field=Tn();z.OneOf=kr();z.MapField=Bo();z.Service=Uo();z.Method=Vo();z.Message=qo();z.wrappers=ed();z.types=Jn();z.util=Ce();z.ReflectionObject._configure(z.Root);z.Namespace._configure(z.Type,z.Service,z.Enum);z.Root._configure(z.Type);z.Field._configure(z.Type)});var hd=g((cM,uv)=>{"use strict";uv.exports=cv;var dd=/[\s{}=;:[\],'"()<>]/g,Bb=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,Vb=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,Ub=/^ *[*/]+ */,qb=/^\s*\*?\/*/,zb=/\n/g,jb=/\s/,Gb=/\\(.?)/g,Hb={0:"\0",r:"\r",n:`
`,t:"	"};function lv(t){return t.replace(Gb,function(e,n){switch(n){case"\\":case"":return n;default:return Hb[n]||""}})}cv.unescape=lv;function cv(t,e){t=t.toString();var n=0,r=t.length,i=1,s=0,o={},a=[],l=null;function c(A){return Error("illegal "+A+" (line "+i+")")}function d(){var A=l==="'"?Vb:Bb;A.lastIndex=n-1;var P=A.exec(t);if(!P)throw c("string");return n=A.lastIndex,C(l),l=null,lv(P[1])}function h(A){return t.charAt(A)}function f(A,P,L){var q={type:t.charAt(A++),lineEmpty:!1,leading:L},_e;e?_e=2:_e=3;var Re=A-_e,X;do if(--Re<0||(X=t.charAt(Re))===`
`){q.lineEmpty=!0;break}while(X===" "||X==="	");for(var y=t.substring(A,P).split(zb),oe=0;oe<y.length;++oe)y[oe]=y[oe].replace(e?qb:Ub,"").trim();q.text=y.join(`
`).trim(),o[i]=q,s=i}function p(A){var P=m(A),L=t.substring(A,P),q=/^\s*\/\//.test(L);return q}function m(A){for(var P=A;P<r&&h(P)!==`
`;)P++;return P}function _(){if(a.length>0)return a.shift();if(l)return d();var A,P,L,q,_e,Re=n===0;do{if(n===r)return null;for(A=!1;jb.test(L=h(n));)if(L===`
`&&(Re=!0,++i),++n===r)return null;if(h(n)==="/"){if(++n===r)throw c("comment");if(h(n)==="/")if(e){if(q=n,_e=!1,p(n-1)){_e=!0;do if(n=m(n),n===r||(n++,!Re))break;while(p(n))}else n=Math.min(r,m(n)+1);_e&&(f(q,n,Re),Re=!0),i++,A=!0}else{for(_e=h(q=n+1)==="/";h(++n)!==`
`;)if(n===r)return null;++n,_e&&(f(q,n-1,Re),Re=!0),++i,A=!0}else if((L=h(n))==="*"){q=n+1,_e=e||h(q)==="*";do{if(L===`
`&&++i,++n===r)throw c("comment");P=L,L=h(n)}while(P!=="*"||L!=="/");++n,_e&&(f(q,n-2,Re),Re=!0),A=!0}else return"/"}}while(A);var X=n;dd.lastIndex=0;var y=dd.test(h(X++));if(!y)for(;X<r&&!dd.test(h(X));)++X;var oe=t.substring(n,n=X);return(oe==='"'||oe==="'")&&(l=oe),oe}function C(A){a.push(A)}function T(){if(!a.length){var A=_();if(A===null)return null;C(A)}return a[0]}function S(A,P){var L=T(),q=L===A;if(q)return _(),!0;if(!P)throw c("token '"+L+"', '"+A+"' expected");return!1}function O(A){var P=null,L;return A===void 0?(L=o[i-1],delete o[i-1],L&&(e||L.type==="*"||L.lineEmpty)&&(P=L.leading?L.text:null)):(s<A&&T(),L=o[A],delete o[A],L&&!L.lineEmpty&&(e||L.type==="/")&&(P=L.leading?null:L.text)),P}return Object.defineProperty({next:_,peek:T,push:C,skip:S,cmnt:O},"line",{get:function(){return i}})}});var mv=g((uM,gv)=>{"use strict";gv.exports=tn;tn.filename=null;tn.defaults={keepCase:!1};var $b=hd(),dv=Wo(),hv=Go(),fv=Tn(),Wb=Bo(),pv=kr(),Kb=Ct(),Qb=Uo(),Yb=Vo(),fd=Jn(),pd=Ce(),Jb=/^[1-9][0-9]*$/,Xb=/^-?[1-9][0-9]*$/,Zb=/^0[x][0-9a-fA-F]+$/,e1=/^-?0[x][0-9a-fA-F]+$/,t1=/^0[0-7]+$/,n1=/^-?0[0-7]+$/,r1=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,qt=/^[a-zA-Z_][a-zA-Z_0-9]*$/,zt=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,i1=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function tn(t,e,n){e instanceof dv||(n=e,e=new dv),n||(n=tn.defaults);var r=n.preferTrailingComment||!1,i=$b(t,n.alternateCommentMode||!1),s=i.next,o=i.push,a=i.peek,l=i.skip,c=i.cmnt,d=!0,h,f,p,m,_=!1,C=e,T=n.keepCase?function(E){return E}:pd.camelCase;function S(E,w,b){var M=tn.filename;return b||(tn.filename=null),Error("illegal "+(w||"token")+" '"+E+"' ("+(M?M+", ":"")+"line "+i.line+")")}function O(){var E=[],w;do{if((w=s())!=='"'&&w!=="'")throw S(w);E.push(s()),l(w),w=a()}while(w==='"'||w==="'");return E.join("")}function A(E){var w=s();switch(w){case"'":case'"':return o(w),O();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return L(w,!0)}catch{if(E&&zt.test(w))return w;throw S(w,"value")}}function P(E,w){var b,M;do w&&((b=a())==='"'||b==="'")?E.push(O()):E.push([M=q(s()),l("to",!0)?q(s()):M]);while(l(",",!0));l(";")}function L(E,w){var b=1;switch(E.charAt(0)==="-"&&(b=-1,E=E.substring(1)),E){case"inf":case"INF":case"Inf":return b*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(Jb.test(E))return b*parseInt(E,10);if(Zb.test(E))return b*parseInt(E,16);if(t1.test(E))return b*parseInt(E,8);if(r1.test(E))return b*parseFloat(E);throw S(E,"number",w)}function q(E,w){switch(E){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!w&&E.charAt(0)==="-")throw S(E,"id");if(Xb.test(E))return parseInt(E,10);if(e1.test(E))return parseInt(E,16);if(n1.test(E))return parseInt(E,8);throw S(E,"id")}function _e(){if(h!==void 0)throw S("package");if(h=s(),!zt.test(h))throw S(h,"name");C=C.define(h),l(";")}function Re(){var E=a(),w;switch(E){case"weak":w=p||(p=[]),s();break;case"public":s();default:w=f||(f=[]);break}E=O(),l(";"),w.push(E)}function X(){if(l("="),m=O(),_=m==="proto3",!_&&m!=="proto2")throw S(m,"syntax");l(";")}function y(E,w){switch(w){case"option":return te(E,w),l(";"),!0;case"message":return v(E,w),!0;case"enum":return Q(E,w),!0;case"service":return me(E,w),!0;case"extend":return sr(E,w),!0}return!1}function oe(E,w,b){var M=i.line;if(E&&(typeof E.comment!="string"&&(E.comment=c()),E.filename=tn.filename),l("{",!0)){for(var N;(N=s())!=="}";)w(N);l(";",!0)}else b&&b(),l(";"),E&&(typeof E.comment!="string"||r)&&(E.comment=c(M)||E.comment)}function v(E,w){if(!qt.test(w=s()))throw S(w,"type name");var b=new hv(w);oe(b,function(N){if(!y(b,N))switch(N){case"map":j(b,N);break;case"required":case"repeated":u(b,N);break;case"optional":_?u(b,"proto3_optional"):u(b,"optional");break;case"oneof":re(b,N);break;case"extensions":P(b.extensions||(b.extensions=[]));break;case"reserved":P(b.reserved||(b.reserved=[]),!0);break;default:if(!_||!zt.test(N))throw S(N);o(N),u(b,"optional");break}}),E.add(b)}function u(E,w,b){var M=s();if(M==="group"){D(E,w);return}for(;M.endsWith(".")||a().startsWith(".");)M+=s();if(!zt.test(M))throw S(M,"type");var N=s();if(!qt.test(N))throw S(N,"name");N=T(N),l("=");var U=new fv(N,q(s()),M,w,b);if(oe(U,function(Je){if(Je==="option")te(U,Je),l(";");else throw S(Je)},function(){Oe(U)}),w==="proto3_optional"){var Ie=new pv("_"+N);U.setOption("proto3_optional",!0),Ie.add(U),E.add(Ie)}else E.add(U);!_&&U.repeated&&(fd.packed[M]!==void 0||fd.basic[M]===void 0)&&U.setOption("packed",!1,!0)}function D(E,w){var b=s();if(!qt.test(b))throw S(b,"name");var M=pd.lcFirst(b);b===M&&(b=pd.ucFirst(b)),l("=");var N=q(s()),U=new hv(b);U.group=!0;var Ie=new fv(M,N,b,w);Ie.filename=tn.filename,oe(U,function(Je){switch(Je){case"option":te(U,Je),l(";");break;case"required":case"repeated":u(U,Je);break;case"optional":_?u(U,"proto3_optional"):u(U,"optional");break;case"message":v(U,Je);break;case"enum":Q(U,Je);break;default:throw S(Je)}}),E.add(U).add(Ie)}function j(E){l("<");var w=s();if(fd.mapKey[w]===void 0)throw S(w,"type");l(",");var b=s();if(!zt.test(b))throw S(b,"type");l(">");var M=s();if(!qt.test(M))throw S(M,"name");l("=");var N=new Wb(T(M),q(s()),w,b);oe(N,function(Ie){if(Ie==="option")te(N,Ie),l(";");else throw S(Ie)},function(){Oe(N)}),E.add(N)}function re(E,w){if(!qt.test(w=s()))throw S(w,"name");var b=new pv(T(w));oe(b,function(N){N==="option"?(te(b,N),l(";")):(o(N),u(b,"optional"))}),E.add(b)}function Q(E,w){if(!qt.test(w=s()))throw S(w,"name");var b=new Kb(w);oe(b,function(N){switch(N){case"option":te(b,N),l(";");break;case"reserved":P(b.reserved||(b.reserved=[]),!0);break;default:ue(b,N)}}),E.add(b)}function ue(E,w){if(!qt.test(w))throw S(w,"name");l("=");var b=q(s(),!0),M={options:void 0};M.setOption=function(N,U){this.options===void 0&&(this.options={}),this.options[N]=U},oe(M,function(U){if(U==="option")te(M,U),l(";");else throw S(U)},function(){Oe(M)}),E.add(w,b,M.comment,M.options)}function te(E,w){var b=l("(",!0);if(!zt.test(w=s()))throw S(w,"name");var M=w,N=M,U;b&&(l(")"),M="("+M+")",N=M,w=a(),i1.test(w)&&(U=w.slice(1),M+=w,s())),l("=");var Ie=Ue(E,M);ae(E,N,Ie,U)}function Ue(E,w){if(l("{",!0)){for(var b={};!l("}",!0);){if(!qt.test(xe=s()))throw S(xe,"name");if(xe===null)throw S(xe,"end of input");var M,N=xe;if(l(":",!0),a()==="{")M=Ue(E,w+"."+xe);else if(a()==="["){M=[];var U;if(l("[",!0)){do U=A(!0),M.push(U);while(l(",",!0));l("]"),typeof U<"u"&&ge(E,w+"."+xe,U)}}else M=A(!0),ge(E,w+"."+xe,M);var Ie=b[N];Ie&&(M=[].concat(Ie).concat(M)),b[N]=M,l(",",!0),l(";",!0)}return b}var ln=A(!0);return ge(E,w,ln),ln}function ge(E,w,b){E.setOption&&E.setOption(w,b)}function ae(E,w,b,M){E.setParsedOption&&E.setParsedOption(w,b,M)}function Oe(E){if(l("[",!0)){do te(E,"option");while(l(",",!0));l("]")}return E}function me(E,w){if(!qt.test(w=s()))throw S(w,"service name");var b=new Qb(w);oe(b,function(N){if(!y(b,N))if(N==="rpc")qe(b,N);else throw S(N)}),E.add(b)}function qe(E,w){var b=c(),M=w;if(!qt.test(w=s()))throw S(w,"name");var N=w,U,Ie,ln,Je;if(l("("),l("stream",!0)&&(Ie=!0),!zt.test(w=s())||(U=w,l(")"),l("returns"),l("("),l("stream",!0)&&(Je=!0),!zt.test(w=s())))throw S(w);ln=w,l(")");var Es=new Yb(N,M,U,ln,Ie,Je);Es.comment=b,oe(Es,function(fl){if(fl==="option")te(Es,fl),l(";");else throw S(fl)}),E.add(Es)}function sr(E,w){if(!zt.test(w=s()))throw S(w,"reference");var b=w;oe(null,function(N){switch(N){case"required":case"repeated":u(E,N,b);break;case"optional":_?u(E,"proto3_optional",b):u(E,"optional",b);break;default:if(!_||!zt.test(N))throw S(N);o(N),u(E,"optional",b);break}})}for(var xe;(xe=s())!==null;)switch(xe){case"package":if(!d)throw S(xe);_e();break;case"import":if(!d)throw S(xe);Re();break;case"syntax":if(!d)throw S(xe);X();break;case"option":te(C,xe),l(";");break;default:if(y(C,xe)){d=!1;continue}throw S(xe)}return tn.filename=null,{package:h,imports:f,weakImports:p,syntax:m,root:e}}});var _v=g((dM,vv)=>{"use strict";vv.exports=bt;var s1=/\/|\./;function bt(t,e){s1.test(t)||(t="google/protobuf/"+t+".proto",e={nested:{google:{nested:{protobuf:{nested:e}}}}}),bt[t]=e}bt("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var yv;bt("duration",{Duration:yv={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});bt("timestamp",{Timestamp:yv});bt("empty",{Empty:{fields:{}}});bt("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});bt("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});bt("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});bt.get=function(e){return bt[e]||null}});var Ev=g((hM,Sv)=>{"use strict";var An=Sv.exports=av();An.build="full";An.tokenize=hd();An.parse=mv();An.common=_v();An.Root._configure(An.Type,An.parse,An.common)});var Jo=g((fM,wv)=>{"use strict";wv.exports=Ev()});var gd=g((pM,o1)=>{o1.exports={nested:{google:{nested:{protobuf:{nested:{FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}}}}}}}}});var Av=g((V,Iv)=>{"use strict";var $e=Jo();Iv.exports=V=$e.descriptor=$e.Root.fromJSON(gd()).lookup(".google.protobuf");var Cv=$e.Namespace,Ji=$e.Root,nn=$e.Enum,Dn=$e.Type,Rn=$e.Field,a1=$e.MapField,Xo=$e.OneOf,Xi=$e.Service,Zo=$e.Method;Ji.fromDescriptor=function(e){typeof e.length=="number"&&(e=V.FileDescriptorSet.decode(e));var n=new Ji;if(e.file)for(var r,i,s=0,o;s<e.file.length;++s){if(i=n,(r=e.file[s]).package&&r.package.length&&(i=n.define(r.package)),r.name&&r.name.length&&n.files.push(i.filename=r.name),r.messageType)for(o=0;o<r.messageType.length;++o)i.add(Dn.fromDescriptor(r.messageType[o],r.syntax));if(r.enumType)for(o=0;o<r.enumType.length;++o)i.add(nn.fromDescriptor(r.enumType[o]));if(r.extension)for(o=0;o<r.extension.length;++o)i.add(Rn.fromDescriptor(r.extension[o]));if(r.service)for(o=0;o<r.service.length;++o)i.add(Xi.fromDescriptor(r.service[o]));var a=Vr(r.options,V.FileOptions);if(a){var l=Object.keys(a);for(o=0;o<l.length;++o)i.setOption(l[o],a[l[o]])}}return n};Ji.prototype.toDescriptor=function(e){var n=V.FileDescriptorSet.create();return Tv(this,n.file,e),n};function Tv(t,e,n){var r=V.FileDescriptorProto.create({name:t.filename||(t.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});n&&(r.syntax=n),t instanceof Ji||(r.package=t.fullName.substring(1));for(var i=0,s;i<t.nestedArray.length;++i)(s=t._nestedArray[i])instanceof Dn?r.messageType.push(s.toDescriptor(n)):s instanceof nn?r.enumType.push(s.toDescriptor()):s instanceof Rn?r.extension.push(s.toDescriptor(n)):s instanceof Xi?r.service.push(s.toDescriptor()):s instanceof Cv&&Tv(s,e,n);r.options=Ur(t.options,V.FileOptions),r.messageType.length+r.enumType.length+r.extension.length+r.service.length&&e.push(r)}var l1=0;Dn.fromDescriptor=function(e,n){typeof e.length=="number"&&(e=V.DescriptorProto.decode(e));var r=new Dn(e.name.length?e.name:"Type"+l1++,Vr(e.options,V.MessageOptions)),i;if(e.oneofDecl)for(i=0;i<e.oneofDecl.length;++i)r.add(Xo.fromDescriptor(e.oneofDecl[i]));if(e.field)for(i=0;i<e.field.length;++i){var s=Rn.fromDescriptor(e.field[i],n);r.add(s),e.field[i].hasOwnProperty("oneofIndex")&&r.oneofsArray[e.field[i].oneofIndex].add(s)}if(e.extension)for(i=0;i<e.extension.length;++i)r.add(Rn.fromDescriptor(e.extension[i],n));if(e.nestedType)for(i=0;i<e.nestedType.length;++i)r.add(Dn.fromDescriptor(e.nestedType[i],n)),e.nestedType[i].options&&e.nestedType[i].options.mapEntry&&r.setOption("map_entry",!0);if(e.enumType)for(i=0;i<e.enumType.length;++i)r.add(nn.fromDescriptor(e.enumType[i]));if(e.extensionRange&&e.extensionRange.length)for(r.extensions=[],i=0;i<e.extensionRange.length;++i)r.extensions.push([e.extensionRange[i].start,e.extensionRange[i].end]);if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){if(r.reserved=[],e.reservedRange)for(i=0;i<e.reservedRange.length;++i)r.reserved.push([e.reservedRange[i].start,e.reservedRange[i].end]);if(e.reservedName)for(i=0;i<e.reservedName.length;++i)r.reserved.push(e.reservedName[i])}return r};Dn.prototype.toDescriptor=function(e){var n=V.DescriptorProto.create({name:this.name}),r;for(r=0;r<this.fieldsArray.length;++r){var i;if(n.field.push(i=this._fieldsArray[r].toDescriptor(e)),this._fieldsArray[r]instanceof a1){var s=md(this._fieldsArray[r].keyType,this._fieldsArray[r].resolvedKeyType),o=md(this._fieldsArray[r].type,this._fieldsArray[r].resolvedType),a=o===11||o===14?this._fieldsArray[r].resolvedType&&bv(this.parent,this._fieldsArray[r].resolvedType)||this._fieldsArray[r].type:void 0;n.nestedType.push(V.DescriptorProto.create({name:i.typeName,field:[V.FieldDescriptorProto.create({name:"key",number:1,label:1,type:s}),V.FieldDescriptorProto.create({name:"value",number:2,label:1,type:o,typeName:a})],options:V.MessageOptions.create({mapEntry:!0})}))}}for(r=0;r<this.oneofsArray.length;++r)n.oneofDecl.push(this._oneofsArray[r].toDescriptor());for(r=0;r<this.nestedArray.length;++r)this._nestedArray[r]instanceof Rn?n.field.push(this._nestedArray[r].toDescriptor(e)):this._nestedArray[r]instanceof Dn?n.nestedType.push(this._nestedArray[r].toDescriptor(e)):this._nestedArray[r]instanceof nn&&n.enumType.push(this._nestedArray[r].toDescriptor());if(this.extensions)for(r=0;r<this.extensions.length;++r)n.extensionRange.push(V.DescriptorProto.ExtensionRange.create({start:this.extensions[r][0],end:this.extensions[r][1]}));if(this.reserved)for(r=0;r<this.reserved.length;++r)typeof this.reserved[r]=="string"?n.reservedName.push(this.reserved[r]):n.reservedRange.push(V.DescriptorProto.ReservedRange.create({start:this.reserved[r][0],end:this.reserved[r][1]}));return n.options=Ur(this.options,V.MessageOptions),n};var c1=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;Rn.fromDescriptor=function(e,n){if(typeof e.length=="number"&&(e=V.DescriptorProto.decode(e)),typeof e.number!="number")throw Error("missing field id");var r;e.typeName&&e.typeName.length?r=e.typeName:r=p1(e.type);var i;switch(e.label){case 1:i=void 0;break;case 2:i="required";break;case 3:i="repeated";break;default:throw Error("illegal label: "+e.label)}var s=e.extendee;e.extendee!==void 0&&(s=s.length?s:void 0);var o=new Rn(e.name.length?e.name:"field"+e.number,e.number,r,i,s);if(o.options=Vr(e.options,V.FieldOptions),e.defaultValue&&e.defaultValue.length){var a=e.defaultValue;switch(a){case"true":case"TRUE":a=!0;break;case"false":case"FALSE":a=!1;break;default:var l=c1.exec(a);l&&(a=parseInt(a));break}o.setOption("default",a)}return g1(e.type)&&(n==="proto3"?e.options&&!e.options.packed&&o.setOption("packed",!1):e.options&&e.options.packed||o.setOption("packed",!1)),o};Rn.prototype.toDescriptor=function(e){var n=V.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)n.type=11,n.typeName=$e.util.ucFirst(this.name),n.label=3;else{switch(n.type=md(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:n.typeName=this.resolvedType?bv(this.parent,this.resolvedType):this.type;break}switch(this.rule){case"repeated":n.label=3;break;case"required":n.label=2;break;default:n.label=1;break}}if(n.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(n.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(n.options=Ur(this.options,V.FieldOptions),this.options.default!=null&&(n.defaultValue=String(this.options.default))),e==="proto3"?this.packed||((n.options||(n.options=V.FieldOptions.create())).packed=!1):this.packed&&((n.options||(n.options=V.FieldOptions.create())).packed=!0),n};var u1=0;nn.fromDescriptor=function(e){typeof e.length=="number"&&(e=V.EnumDescriptorProto.decode(e));var n={};if(e.value)for(var r=0;r<e.value.length;++r){var i=e.value[r].name,s=e.value[r].number||0;n[i&&i.length?i:"NAME"+s]=s}return new nn(e.name&&e.name.length?e.name:"Enum"+u1++,n,Vr(e.options,V.EnumOptions))};nn.prototype.toDescriptor=function(){for(var e=[],n=0,r=Object.keys(this.values);n<r.length;++n)e.push(V.EnumValueDescriptorProto.create({name:r[n],number:this.values[r[n]]}));return V.EnumDescriptorProto.create({name:this.name,value:e,options:Ur(this.options,V.EnumOptions)})};var d1=0;Xo.fromDescriptor=function(e){return typeof e.length=="number"&&(e=V.OneofDescriptorProto.decode(e)),new Xo(e.name&&e.name.length?e.name:"oneof"+d1++)};Xo.prototype.toDescriptor=function(){return V.OneofDescriptorProto.create({name:this.name})};var h1=0;Xi.fromDescriptor=function(e){typeof e.length=="number"&&(e=V.ServiceDescriptorProto.decode(e));var n=new Xi(e.name&&e.name.length?e.name:"Service"+h1++,Vr(e.options,V.ServiceOptions));if(e.method)for(var r=0;r<e.method.length;++r)n.add(Zo.fromDescriptor(e.method[r]));return n};Xi.prototype.toDescriptor=function(){for(var e=[],n=0;n<this.methodsArray.length;++n)e.push(this._methodsArray[n].toDescriptor());return V.ServiceDescriptorProto.create({name:this.name,method:e,options:Ur(this.options,V.ServiceOptions)})};var f1=0;Zo.fromDescriptor=function(e){return typeof e.length=="number"&&(e=V.MethodDescriptorProto.decode(e)),new Zo(e.name&&e.name.length?e.name:"Method"+f1++,"rpc",e.inputType,e.outputType,!!e.clientStreaming,!!e.serverStreaming,Vr(e.options,V.MethodOptions))};Zo.prototype.toDescriptor=function(){return V.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:Ur(this.options,V.MethodOptions)})};function p1(t){switch(t){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+t)}function g1(t){switch(t){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function md(t,e){switch(t){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(e instanceof nn)return 14;if(e instanceof Dn)return e.group?10:11;throw Error("illegal type: "+t)}function Vr(t,e){if(t){for(var n=[],r=0,i,s,o;r<e.fieldsArray.length;++r)(s=(i=e._fieldsArray[r]).name)!=="uninterpretedOption"&&t.hasOwnProperty(s)&&(o=t[s],i.resolvedType instanceof nn&&typeof o=="number"&&i.resolvedType.valuesById[o]!==void 0&&(o=i.resolvedType.valuesById[o]),n.push(m1(s),o));return n.length?$e.util.toObject(n):void 0}}function Ur(t,e){if(t){for(var n=[],r=0,i=Object.keys(t),s,o;r<i.length;++r)if(o=t[s=i[r]],s!=="default"){var a=e.fields[s];!a&&!(a=e.fields[s=$e.util.camelCase(s)])||n.push(s,o)}return n.length?e.fromObject($e.util.toObject(n)):void 0}}function bv(t,e){var n=t.fullName.split("."),r=e.fullName.split("."),i=0,s=0,o=r.length-1;if(!(t instanceof Ji)&&e instanceof Cv)for(;i<n.length&&s<o&&n[i]===r[s];){var a=e.lookup(n[i++],!0);if(a!==null&&a!==e)break;++s}else for(;i<n.length&&s<o&&n[i]===r[s];++i,++s);return r.slice(s).join(".")}function m1(t){return t.substring(0,1)+t.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(e,n){return"_"+n.toLowerCase()})}});var Dv=g((gM,y1)=>{y1.exports={nested:{google:{nested:{protobuf:{nested:{Api:{fields:{name:{type:"string",id:1},methods:{rule:"repeated",type:"Method",id:2},options:{rule:"repeated",type:"Option",id:3},version:{type:"string",id:4},sourceContext:{type:"SourceContext",id:5},mixins:{rule:"repeated",type:"Mixin",id:6},syntax:{type:"Syntax",id:7}}},Method:{fields:{name:{type:"string",id:1},requestTypeUrl:{type:"string",id:2},requestStreaming:{type:"bool",id:3},responseTypeUrl:{type:"string",id:4},responseStreaming:{type:"bool",id:5},options:{rule:"repeated",type:"Option",id:6},syntax:{type:"Syntax",id:7}}},Mixin:{fields:{name:{type:"string",id:1},root:{type:"string",id:2}}},SourceContext:{fields:{fileName:{type:"string",id:1}}},Option:{fields:{name:{type:"string",id:1},value:{type:"Any",id:2}}},Syntax:{values:{SYNTAX_PROTO2:0,SYNTAX_PROTO3:1}}}}}}}}});var Rv=g((mM,v1)=>{v1.exports={nested:{google:{nested:{protobuf:{nested:{SourceContext:{fields:{fileName:{type:"string",id:1}}}}}}}}}});var Ov=g((yM,_1)=>{_1.exports={nested:{google:{nested:{protobuf:{nested:{Type:{fields:{name:{type:"string",id:1},fields:{rule:"repeated",type:"Field",id:2},oneofs:{rule:"repeated",type:"string",id:3},options:{rule:"repeated",type:"Option",id:4},sourceContext:{type:"SourceContext",id:5},syntax:{type:"Syntax",id:6}}},Field:{fields:{kind:{type:"Kind",id:1},cardinality:{type:"Cardinality",id:2},number:{type:"int32",id:3},name:{type:"string",id:4},typeUrl:{type:"string",id:6},oneofIndex:{type:"int32",id:7},packed:{type:"bool",id:8},options:{rule:"repeated",type:"Option",id:9},jsonName:{type:"string",id:10},defaultValue:{type:"string",id:11}},nested:{Kind:{values:{TYPE_UNKNOWN:0,TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Cardinality:{values:{CARDINALITY_UNKNOWN:0,CARDINALITY_OPTIONAL:1,CARDINALITY_REQUIRED:2,CARDINALITY_REPEATED:3}}}},Enum:{fields:{name:{type:"string",id:1},enumvalue:{rule:"repeated",type:"EnumValue",id:2},options:{rule:"repeated",type:"Option",id:3},sourceContext:{type:"SourceContext",id:4},syntax:{type:"Syntax",id:5}}},EnumValue:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{rule:"repeated",type:"Option",id:3}}},Option:{fields:{name:{type:"string",id:1},value:{type:"Any",id:2}}},Syntax:{values:{SYNTAX_PROTO2:0,SYNTAX_PROTO3:1}},Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}},SourceContext:{fields:{fileName:{type:"string",id:1}}}}}}}}}});var kv=g(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.addCommonProtos=On.loadProtosWithOptionsSync=On.loadProtosWithOptions=void 0;var xv=W("fs"),Nv=W("path"),qr=Jo();function Mv(t,e){let n=t.resolvePath;t.resolvePath=(r,i)=>{if(Nv.isAbsolute(i))return i;for(let s of e){let o=Nv.join(s,i);try{return xv.accessSync(o,xv.constants.R_OK),o}catch{continue}}return process.emitWarning(`${i} not found in any of the include paths ${e}`),n(r,i)}}function S1(t,e){return k(this,null,function*(){let n=new qr.Root;if(e=e||{},e.includeDirs){if(!Array.isArray(e.includeDirs))return Promise.reject(new Error("The includeDirs option must be an array"));Mv(n,e.includeDirs)}let r=yield n.load(t,e);return r.resolveAll(),r})}On.loadProtosWithOptions=S1;function E1(t,e){let n=new qr.Root;if(e=e||{},e.includeDirs){if(!Array.isArray(e.includeDirs))throw new Error("The includeDirs option must be an array");Mv(n,e.includeDirs)}let r=n.loadSync(t,e);return r.resolveAll(),r}On.loadProtosWithOptionsSync=E1;function w1(){let t=Dv(),e=gd(),n=Rv(),r=Ov();qr.common("api",t.nested.google.nested.protobuf.nested),qr.common("descriptor",e.nested.google.nested.protobuf.nested),qr.common("source_context",n.nested.google.nested.protobuf.nested),qr.common("type",r.nested.google.nested.protobuf.nested)}On.addCommonProtos=w1});var Lv=g((Fv,yd)=>{"use strict";var Pv=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function n(v,u,D){this.low=v|0,this.high=u|0,this.unsigned=!!D}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0});function r(v){return(v&&v.__isLong__)===!0}function i(v){var u=Math.clz32(v&-v);return v?31-u:u}n.isLong=r;var s={},o={};function a(v,u){var D,j,re;return u?(v>>>=0,(re=0<=v&&v<256)&&(j=o[v],j)?j:(D=c(v,0,!0),re&&(o[v]=D),D)):(v|=0,(re=-128<=v&&v<128)&&(j=s[v],j)?j:(D=c(v,v<0?-1:0,!1),re&&(s[v]=D),D))}n.fromInt=a;function l(v,u){if(isNaN(v))return u?A:O;if(u){if(v<0)return A;if(v>=C)return Re}else{if(v<=-T)return X;if(v+1>=T)return _e}return v<0?l(-v,u).neg():c(v%_|0,v/_|0,u)}n.fromNumber=l;function c(v,u,D){return new n(v,u,D)}n.fromBits=c;var d=Math.pow;function h(v,u,D){if(v.length===0)throw Error("empty string");if(typeof u=="number"?(D=u,u=!1):u=!!u,v==="NaN"||v==="Infinity"||v==="+Infinity"||v==="-Infinity")return u?A:O;if(D=D||10,D<2||36<D)throw RangeError("radix");var j;if((j=v.indexOf("-"))>0)throw Error("interior hyphen");if(j===0)return h(v.substring(1),u,D).neg();for(var re=l(d(D,8)),Q=O,ue=0;ue<v.length;ue+=8){var te=Math.min(8,v.length-ue),Ue=parseInt(v.substring(ue,ue+te),D);if(te<8){var ge=l(d(D,te));Q=Q.mul(ge).add(l(Ue))}else Q=Q.mul(re),Q=Q.add(l(Ue))}return Q.unsigned=u,Q}n.fromString=h;function f(v,u){return typeof v=="number"?l(v,u):typeof v=="string"?h(v,u):c(v.low,v.high,typeof u=="boolean"?u:v.unsigned)}n.fromValue=f;var p=65536,m=1<<24,_=p*p,C=_*_,T=C/2,S=a(m),O=a(0);n.ZERO=O;var A=a(0,!0);n.UZERO=A;var P=a(1);n.ONE=P;var L=a(1,!0);n.UONE=L;var q=a(-1);n.NEG_ONE=q;var _e=c(-1,2147483647,!1);n.MAX_VALUE=_e;var Re=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=Re;var X=c(0,-2147483648,!1);n.MIN_VALUE=X;var y=n.prototype;y.toInt=function(){return this.unsigned?this.low>>>0:this.low},y.toNumber=function(){return this.unsigned?(this.high>>>0)*_+(this.low>>>0):this.high*_+(this.low>>>0)},y.toString=function(u){if(u=u||10,u<2||36<u)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(X)){var D=l(u),j=this.div(D),re=j.mul(D).sub(this);return j.toString(u)+re.toInt().toString(u)}else return"-"+this.neg().toString(u);for(var Q=l(d(u,6),this.unsigned),ue=this,te="";;){var Ue=ue.div(Q),ge=ue.sub(Ue.mul(Q)).toInt()>>>0,ae=ge.toString(u);if(ue=Ue,ue.isZero())return ae+te;for(;ae.length<6;)ae="0"+ae;te=""+ae+te}},y.getHighBits=function(){return this.high},y.getHighBitsUnsigned=function(){return this.high>>>0},y.getLowBits=function(){return this.low},y.getLowBitsUnsigned=function(){return this.low>>>0},y.getNumBitsAbs=function(){if(this.isNegative())return this.eq(X)?64:this.neg().getNumBitsAbs();for(var u=this.high!=0?this.high:this.low,D=31;D>0&&!(u&1<<D);D--);return this.high!=0?D+33:D+1},y.isZero=function(){return this.high===0&&this.low===0},y.eqz=y.isZero,y.isNegative=function(){return!this.unsigned&&this.high<0},y.isPositive=function(){return this.unsigned||this.high>=0},y.isOdd=function(){return(this.low&1)===1},y.isEven=function(){return(this.low&1)===0},y.equals=function(u){return r(u)||(u=f(u)),this.unsigned!==u.unsigned&&this.high>>>31===1&&u.high>>>31===1?!1:this.high===u.high&&this.low===u.low},y.eq=y.equals,y.notEquals=function(u){return!this.eq(u)},y.neq=y.notEquals,y.ne=y.notEquals,y.lessThan=function(u){return this.comp(u)<0},y.lt=y.lessThan,y.lessThanOrEqual=function(u){return this.comp(u)<=0},y.lte=y.lessThanOrEqual,y.le=y.lessThanOrEqual,y.greaterThan=function(u){return this.comp(u)>0},y.gt=y.greaterThan,y.greaterThanOrEqual=function(u){return this.comp(u)>=0},y.gte=y.greaterThanOrEqual,y.ge=y.greaterThanOrEqual,y.compare=function(u){if(r(u)||(u=f(u)),this.eq(u))return 0;var D=this.isNegative(),j=u.isNegative();return D&&!j?-1:!D&&j?1:this.unsigned?u.high>>>0>this.high>>>0||u.high===this.high&&u.low>>>0>this.low>>>0?-1:1:this.sub(u).isNegative()?-1:1},y.comp=y.compare,y.negate=function(){return!this.unsigned&&this.eq(X)?X:this.not().add(P)},y.neg=y.negate,y.add=function(u){r(u)||(u=f(u));var D=this.high>>>16,j=this.high&65535,re=this.low>>>16,Q=this.low&65535,ue=u.high>>>16,te=u.high&65535,Ue=u.low>>>16,ge=u.low&65535,ae=0,Oe=0,me=0,qe=0;return qe+=Q+ge,me+=qe>>>16,qe&=65535,me+=re+Ue,Oe+=me>>>16,me&=65535,Oe+=j+te,ae+=Oe>>>16,Oe&=65535,ae+=D+ue,ae&=65535,c(me<<16|qe,ae<<16|Oe,this.unsigned)},y.subtract=function(u){return r(u)||(u=f(u)),this.add(u.neg())},y.sub=y.subtract,y.multiply=function(u){if(this.isZero())return this;if(r(u)||(u=f(u)),e){var D=e.mul(this.low,this.high,u.low,u.high);return c(D,e.get_high(),this.unsigned)}if(u.isZero())return this.unsigned?A:O;if(this.eq(X))return u.isOdd()?X:O;if(u.eq(X))return this.isOdd()?X:O;if(this.isNegative())return u.isNegative()?this.neg().mul(u.neg()):this.neg().mul(u).neg();if(u.isNegative())return this.mul(u.neg()).neg();if(this.lt(S)&&u.lt(S))return l(this.toNumber()*u.toNumber(),this.unsigned);var j=this.high>>>16,re=this.high&65535,Q=this.low>>>16,ue=this.low&65535,te=u.high>>>16,Ue=u.high&65535,ge=u.low>>>16,ae=u.low&65535,Oe=0,me=0,qe=0,sr=0;return sr+=ue*ae,qe+=sr>>>16,sr&=65535,qe+=Q*ae,me+=qe>>>16,qe&=65535,qe+=ue*ge,me+=qe>>>16,qe&=65535,me+=re*ae,Oe+=me>>>16,me&=65535,me+=Q*ge,Oe+=me>>>16,me&=65535,me+=ue*Ue,Oe+=me>>>16,me&=65535,Oe+=j*ae+re*ge+Q*Ue+ue*te,Oe&=65535,c(qe<<16|sr,Oe<<16|me,this.unsigned)},y.mul=y.multiply,y.divide=function(u){if(r(u)||(u=f(u)),u.isZero())throw Error("division by zero");if(e){if(!this.unsigned&&this.high===-2147483648&&u.low===-1&&u.high===-1)return this;var D=(this.unsigned?e.div_u:e.div_s)(this.low,this.high,u.low,u.high);return c(D,e.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?A:O;var j,re,Q;if(this.unsigned){if(u.unsigned||(u=u.toUnsigned()),u.gt(this))return A;if(u.gt(this.shru(1)))return L;Q=A}else{if(this.eq(X)){if(u.eq(P)||u.eq(q))return X;if(u.eq(X))return P;var ue=this.shr(1);return j=ue.div(u).shl(1),j.eq(O)?u.isNegative()?P:q:(re=this.sub(u.mul(j)),Q=j.add(re.div(u)),Q)}else if(u.eq(X))return this.unsigned?A:O;if(this.isNegative())return u.isNegative()?this.neg().div(u.neg()):this.neg().div(u).neg();if(u.isNegative())return this.div(u.neg()).neg();Q=O}for(re=this;re.gte(u);){j=Math.max(1,Math.floor(re.toNumber()/u.toNumber()));for(var te=Math.ceil(Math.log(j)/Math.LN2),Ue=te<=48?1:d(2,te-48),ge=l(j),ae=ge.mul(u);ae.isNegative()||ae.gt(re);)j-=Ue,ge=l(j,this.unsigned),ae=ge.mul(u);ge.isZero()&&(ge=P),Q=Q.add(ge),re=re.sub(ae)}return Q},y.div=y.divide,y.modulo=function(u){if(r(u)||(u=f(u)),e){var D=(this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,u.low,u.high);return c(D,e.get_high(),this.unsigned)}return this.sub(this.div(u).mul(u))},y.mod=y.modulo,y.rem=y.modulo,y.not=function(){return c(~this.low,~this.high,this.unsigned)},y.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},y.clz=y.countLeadingZeros,y.countTrailingZeros=function(){return this.low?i(this.low):i(this.high)+32},y.ctz=y.countTrailingZeros,y.and=function(u){return r(u)||(u=f(u)),c(this.low&u.low,this.high&u.high,this.unsigned)},y.or=function(u){return r(u)||(u=f(u)),c(this.low|u.low,this.high|u.high,this.unsigned)},y.xor=function(u){return r(u)||(u=f(u)),c(this.low^u.low,this.high^u.high,this.unsigned)},y.shiftLeft=function(u){return r(u)&&(u=u.toInt()),(u&=63)===0?this:u<32?c(this.low<<u,this.high<<u|this.low>>>32-u,this.unsigned):c(0,this.low<<u-32,this.unsigned)},y.shl=y.shiftLeft,y.shiftRight=function(u){return r(u)&&(u=u.toInt()),(u&=63)===0?this:u<32?c(this.low>>>u|this.high<<32-u,this.high>>u,this.unsigned):c(this.high>>u-32,this.high>=0?0:-1,this.unsigned)},y.shr=y.shiftRight,y.shiftRightUnsigned=function(u){return r(u)&&(u=u.toInt()),(u&=63)===0?this:u<32?c(this.low>>>u|this.high<<32-u,this.high>>>u,this.unsigned):u===32?c(this.high,0,this.unsigned):c(this.high>>>u-32,0,this.unsigned)},y.shru=y.shiftRightUnsigned,y.shr_u=y.shiftRightUnsigned,y.rotateLeft=function(u){var D;return r(u)&&(u=u.toInt()),(u&=63)===0?this:u===32?c(this.high,this.low,this.unsigned):u<32?(D=32-u,c(this.low<<u|this.high>>>D,this.high<<u|this.low>>>D,this.unsigned)):(u-=32,D=32-u,c(this.high<<u|this.low>>>D,this.low<<u|this.high>>>D,this.unsigned))},y.rotl=y.rotateLeft,y.rotateRight=function(u){var D;return r(u)&&(u=u.toInt()),(u&=63)===0?this:u===32?c(this.high,this.low,this.unsigned):u<32?(D=32-u,c(this.high<<D|this.low>>>u,this.low<<D|this.high>>>u,this.unsigned)):(u-=32,D=32-u,c(this.low<<D|this.high>>>u,this.high<<D|this.low>>>u,this.unsigned))},y.rotr=y.rotateRight,y.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},y.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},y.toBytes=function(u){return u?this.toBytesLE():this.toBytesBE()},y.toBytesLE=function(){var u=this.high,D=this.low;return[D&255,D>>>8&255,D>>>16&255,D>>>24,u&255,u>>>8&255,u>>>16&255,u>>>24]},y.toBytesBE=function(){var u=this.high,D=this.low;return[u>>>24,u>>>16&255,u>>>8&255,u&255,D>>>24,D>>>16&255,D>>>8&255,D&255]},n.fromBytes=function(u,D,j){return j?n.fromBytesLE(u,D):n.fromBytesBE(u,D)},n.fromBytesLE=function(u,D){return new n(u[0]|u[1]<<8|u[2]<<16|u[3]<<24,u[4]|u[5]<<8|u[6]<<16|u[7]<<24,D)},n.fromBytesBE=function(u,D){return new n(u[4]<<24|u[5]<<16|u[6]<<8|u[7],u[0]<<24|u[1]<<16|u[2]<<8|u[3],D)};var oe=n;return t.default=oe,"default"in t?t.default:t}({});typeof define=="function"&&define.amd?define([],function(){return Pv}):typeof yd=="object"&&typeof Fv=="object"&&(yd.exports=Pv)});var Ed=g(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.loadFileDescriptorSetFromObject=Fe.loadFileDescriptorSetFromBuffer=Fe.fromJSON=Fe.loadSync=Fe.load=Fe.isAnyExtension=Fe.Long=void 0;var C1=Tm(),jt=Jo(),_d=Av(),Sd=kv(),T1=Lv();Fe.Long=T1;function b1(t){return"@type"in t&&typeof t["@type"]=="string"}Fe.isAnyExtension=b1;var Uv={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function I1(t,e){return t===""?e:t+"."+e}function A1(t){return t instanceof jt.Service||t instanceof jt.Type||t instanceof jt.Enum}function D1(t){return t instanceof jt.Namespace||t instanceof jt.Root}function qv(t,e){let n=I1(e,t.name);return A1(t)?[[n,t]]:D1(t)&&typeof t.nested<"u"?Object.keys(t.nested).map(r=>qv(t.nested[r],n)).reduce((r,i)=>r.concat(i),[]):[]}function Bv(t,e){return function(r){return t.toObject(t.decode(r),e)}}function Vv(t){return function(n){if(Array.isArray(n))throw new Error(`Failed to serialize message: expected object with ${t.name} structure, got array instead`);let r=t.fromObject(n);return t.encode(r).finish()}}function R1(t,e,n,r){let i=t.resolvedRequestType,s=t.resolvedResponseType;return{path:"/"+e+"/"+t.name,requestStream:!!t.requestStream,responseStream:!!t.responseStream,requestSerialize:Vv(i),requestDeserialize:Bv(i,n),responseSerialize:Vv(s),responseDeserialize:Bv(s,n),originalName:C1(t.name),requestType:vd(i,r),responseType:vd(s,r)}}function O1(t,e,n,r){let i={};for(let s of t.methodsArray)i[s.name]=R1(s,e,n,r);return i}function vd(t,e){let n=t.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:n.$type.toObject(n,Uv),fileDescriptorProtos:e}}function x1(t,e){let n=t.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:n.$type.toObject(n,Uv),fileDescriptorProtos:e}}function N1(t,e,n,r){if(t instanceof jt.Service)return O1(t,e,n,r);if(t instanceof jt.Type)return vd(t,r);if(t instanceof jt.Enum)return x1(t,r);throw new Error("Type mismatch in reflection object handling")}function ea(t,e){let n={};t.resolveAll();let i=t.toDescriptor("proto3").file.map(s=>Buffer.from(_d.FileDescriptorProto.encode(s).finish()));for(let[s,o]of qv(t,""))n[s]=N1(o,s,e,i);return n}function zv(t,e){e=e||{};let n=jt.Root.fromDescriptor(t);return n.resolveAll(),ea(n,e)}function M1(t,e){return(0,Sd.loadProtosWithOptions)(t,e).then(n=>ea(n,e))}Fe.load=M1;function k1(t,e){let n=(0,Sd.loadProtosWithOptionsSync)(t,e);return ea(n,e)}Fe.loadSync=k1;function P1(t,e){e=e||{};let n=jt.Root.fromJSON(t);return n.resolveAll(),ea(n,e)}Fe.fromJSON=P1;function F1(t,e){let n=_d.FileDescriptorSet.decode(t);return zv(n,e)}Fe.loadFileDescriptorSetFromBuffer=F1;function L1(t,e){let n=_d.FileDescriptorSet.fromObject(t);return zv(n,e)}Fe.loadFileDescriptorSetFromObject=L1;(0,Sd.addCommonProtos)()});var er=g(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.setup=ie.getChannelzServiceDefinition=ie.getChannelzHandlers=ie.unregisterChannelzRef=ie.registerChannelzSocket=ie.registerChannelzServer=ie.registerChannelzSubchannel=ie.registerChannelzChannel=ie.ChannelzCallTracker=ie.ChannelzChildrenTracker=ie.ChannelzTrace=void 0;var jv=W("net"),Zi=st(),ts=H(),B1=kt(),V1=Eo(),U1=vu();function wd(t){return{channel_id:t.id,name:t.name}}function Id(t){return{subchannel_id:t.id,name:t.name}}function q1(t){return{server_id:t.id}}function na(t){return{socket_id:t.id,name:t.name}}var Gv=32,Cd=class{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(e,n,r){let i=new Date;this.events.push({description:n,severity:e,timestamp:i,childChannel:r?.kind==="channel"?r:void 0,childSubchannel:r?.kind==="subchannel"?r:void 0}),this.events.length>=Gv*2&&(this.events=this.events.slice(Gv)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:rn(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map(e=>({description:e.description,severity:e.severity,timestamp:rn(e.timestamp),channel_ref:e.childChannel?wd(e.childChannel):null,subchannel_ref:e.childSubchannel?Id(e.childSubchannel):null}))}}};ie.ChannelzTrace=Cd;var Td=class{constructor(){this.channelChildren=new Map,this.subchannelChildren=new Map,this.socketChildren=new Map}refChild(e){var n,r,i;switch(e.kind){case"channel":{let s=(n=this.channelChildren.get(e.id))!==null&&n!==void 0?n:{ref:e,count:0};s.count+=1,this.channelChildren.set(e.id,s);break}case"subchannel":{let s=(r=this.subchannelChildren.get(e.id))!==null&&r!==void 0?r:{ref:e,count:0};s.count+=1,this.subchannelChildren.set(e.id,s);break}case"socket":{let s=(i=this.socketChildren.get(e.id))!==null&&i!==void 0?i:{ref:e,count:0};s.count+=1,this.socketChildren.set(e.id,s);break}}}unrefChild(e){switch(e.kind){case"channel":{let n=this.channelChildren.get(e.id);n!==void 0&&(n.count-=1,n.count===0?this.channelChildren.delete(e.id):this.channelChildren.set(e.id,n));break}case"subchannel":{let n=this.subchannelChildren.get(e.id);n!==void 0&&(n.count-=1,n.count===0?this.subchannelChildren.delete(e.id):this.subchannelChildren.set(e.id,n));break}case"socket":{let n=this.socketChildren.get(e.id);n!==void 0&&(n.count-=1,n.count===0?this.socketChildren.delete(e.id):this.socketChildren.set(e.id,n));break}}}getChildLists(){let e=[];for(let{ref:i}of this.channelChildren.values())e.push(i);let n=[];for(let{ref:i}of this.subchannelChildren.values())n.push(i);let r=[];for(let{ref:i}of this.socketChildren.values())r.push(i);return{channels:e,subchannels:n,sockets:r}}};ie.ChannelzChildrenTracker=Td;var bd=class{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}};ie.ChannelzCallTracker=bd;var z1=1;function ra(){return z1++}var es=[],Ad=[],xn=[],Dd=[];function j1(t,e,n){let r=ra(),i={id:r,name:t,kind:"channel"};return n&&(es[r]={ref:i,getInfo:e}),i}ie.registerChannelzChannel=j1;function G1(t,e,n){let r=ra(),i={id:r,name:t,kind:"subchannel"};return n&&(Ad[r]={ref:i,getInfo:e}),i}ie.registerChannelzSubchannel=G1;function H1(t,e){let n=ra(),r={id:n,kind:"server"};return e&&(xn[n]={ref:r,getInfo:t}),r}ie.registerChannelzServer=H1;function $1(t,e,n){let r=ra(),i={id:r,name:t,kind:"socket"};return n&&(Dd[r]={ref:i,getInfo:e}),i}ie.registerChannelzSocket=$1;function W1(t){switch(t.kind){case"channel":delete es[t.id];return;case"subchannel":delete Ad[t.id];return;case"server":delete xn[t.id];return;case"socket":delete Dd[t.id];return}}ie.unregisterChannelzRef=W1;function K1(t){let e=Number.parseInt(t,16);return[e/256|0,e%256]}function Hv(t){if(t==="")return[];let e=t.split(":").map(r=>K1(r));return[].concat(...e)}function Q1(t){if((0,jv.isIPv4)(t))return Buffer.from(Uint8Array.from(t.split(".").map(e=>Number.parseInt(e))));if((0,jv.isIPv6)(t)){let e,n,r=t.indexOf("::");r===-1?(e=t,n=""):(e=t.substring(0,r),n=t.substring(r+2));let i=Buffer.from(Hv(e)),s=Buffer.from(Hv(n)),o=Buffer.alloc(16-i.length-s.length,0);return Buffer.concat([i,o,s])}else return null}function Wv(t){switch(t){case Zi.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case Zi.ConnectivityState.IDLE:return{state:"IDLE"};case Zi.ConnectivityState.READY:return{state:"READY"};case Zi.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case Zi.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function rn(t){if(!t)return null;let e=t.getTime();return{seconds:e/1e3|0,nanos:e%1e3*1e6}}function Kv(t){let e=t.getInfo();return{ref:wd(t.ref),data:{target:e.target,state:Wv(e.state),calls_started:e.callTracker.callsStarted,calls_succeeded:e.callTracker.callsSucceeded,calls_failed:e.callTracker.callsFailed,last_call_started_timestamp:rn(e.callTracker.lastCallStartedTimestamp),trace:e.trace.getTraceMessage()},channel_ref:e.children.channels.map(n=>wd(n)),subchannel_ref:e.children.subchannels.map(n=>Id(n))}}function Y1(t,e){let n=Number.parseInt(t.request.channel_id),r=es[n];if(r===void 0){e({code:ts.Status.NOT_FOUND,details:"No channel data found for id "+n});return}e(null,{channel:Kv(r)})}function J1(t,e){let n=Number.parseInt(t.request.max_results),r=[],i=Number.parseInt(t.request.start_channel_id);for(;i<es.length;i++){let s=es[i];if(s!==void 0&&(r.push(Kv(s)),r.length>=n))break}e(null,{channel:r,end:i>=xn.length})}function Qv(t){let e=t.getInfo();return{ref:q1(t.ref),data:{calls_started:e.callTracker.callsStarted,calls_succeeded:e.callTracker.callsSucceeded,calls_failed:e.callTracker.callsFailed,last_call_started_timestamp:rn(e.callTracker.lastCallStartedTimestamp),trace:e.trace.getTraceMessage()},listen_socket:e.listenerChildren.sockets.map(n=>na(n))}}function X1(t,e){let n=Number.parseInt(t.request.server_id),r=xn[n];if(r===void 0){e({code:ts.Status.NOT_FOUND,details:"No server data found for id "+n});return}e(null,{server:Qv(r)})}function Z1(t,e){let n=Number.parseInt(t.request.max_results),r=[],i=Number.parseInt(t.request.start_server_id);for(;i<xn.length;i++){let s=xn[i];if(s!==void 0&&(r.push(Qv(s)),r.length>=n))break}e(null,{server:r,end:i>=xn.length})}function eI(t,e){let n=Number.parseInt(t.request.subchannel_id),r=Ad[n];if(r===void 0){e({code:ts.Status.NOT_FOUND,details:"No subchannel data found for id "+n});return}let i=r.getInfo(),s={ref:Id(r.ref),data:{target:i.target,state:Wv(i.state),calls_started:i.callTracker.callsStarted,calls_succeeded:i.callTracker.callsSucceeded,calls_failed:i.callTracker.callsFailed,last_call_started_timestamp:rn(i.callTracker.lastCallStartedTimestamp),trace:i.trace.getTraceMessage()},socket_ref:i.children.sockets.map(o=>na(o))};e(null,{subchannel:s})}function $v(t){var e;return(0,B1.isTcpSubchannelAddress)(t)?{address:"tcpip_address",tcpip_address:{ip_address:(e=Q1(t.host))!==null&&e!==void 0?e:void 0,port:t.port}}:{address:"uds_address",uds_address:{filename:t.path}}}function tI(t,e){var n,r,i,s,o;let a=Number.parseInt(t.request.socket_id),l=Dd[a];if(l===void 0){e({code:ts.Status.NOT_FOUND,details:"No socket data found for id "+a});return}let c=l.getInfo(),d=c.security?{model:"tls",tls:{cipher_suite:c.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:(n=c.security.cipherSuiteStandardName)!==null&&n!==void 0?n:void 0,other_name:(r=c.security.cipherSuiteOtherName)!==null&&r!==void 0?r:void 0,local_certificate:(i=c.security.localCertificate)!==null&&i!==void 0?i:void 0,remote_certificate:(s=c.security.remoteCertificate)!==null&&s!==void 0?s:void 0}}:null,h={ref:na(l.ref),local:c.localAddress?$v(c.localAddress):null,remote:c.remoteAddress?$v(c.remoteAddress):null,remote_name:(o=c.remoteName)!==null&&o!==void 0?o:void 0,security:d,data:{keep_alives_sent:c.keepAlivesSent,streams_started:c.streamsStarted,streams_succeeded:c.streamsSucceeded,streams_failed:c.streamsFailed,last_local_stream_created_timestamp:rn(c.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:rn(c.lastRemoteStreamCreatedTimestamp),messages_received:c.messagesReceived,messages_sent:c.messagesSent,last_message_received_timestamp:rn(c.lastMessageReceivedTimestamp),last_message_sent_timestamp:rn(c.lastMessageSentTimestamp),local_flow_control_window:c.localFlowControlWindow?{value:c.localFlowControlWindow}:null,remote_flow_control_window:c.remoteFlowControlWindow?{value:c.remoteFlowControlWindow}:null}};e(null,{socket:h})}function nI(t,e){let n=Number.parseInt(t.request.server_id),r=xn[n];if(r===void 0){e({code:ts.Status.NOT_FOUND,details:"No server data found for id "+n});return}let i=Number.parseInt(t.request.start_socket_id),s=Number.parseInt(t.request.max_results),a=r.getInfo().sessionChildren.sockets.sort((d,h)=>d.id-h.id),l=[],c=0;for(;c<a.length&&!(a[c].id>=i&&(l.push(na(a[c])),l.length>=s));c++);e(null,{socket_ref:l,end:c>=a.length})}function Yv(){return{GetChannel:Y1,GetTopChannels:J1,GetServer:X1,GetServers:Z1,GetSubchannel:eI,GetSocket:tI,GetServerSockets:nI}}ie.getChannelzHandlers=Yv;var ta=null;function Jv(){if(ta)return ta;let t=Ed().loadSync,e=t("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]});return ta=(0,U1.loadPackageDefinition)(e).grpc.channelz.v1.Channelz.service,ta}ie.getChannelzServiceDefinition=Jv;function rI(){(0,V1.registerAdminService)(Jv,Yv)}ie.setup=rI});var Xv=g(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.Subchannel=void 0;var ee=st(),iI=ki(),Rd=ce(),ia=H(),sI=Ze(),oI=kt(),zr=er(),aI="subchannel",lI=~(1<<31),Od=class{constructor(e,n,r,i,s){var o;this.channelTarget=e,this.subchannelAddress=n,this.options=r,this.credentials=i,this.connector=s,this.connectivityState=ee.ConnectivityState.IDLE,this.transport=null,this.continueConnecting=!1,this.stateListeners=new Set,this.refcount=0,this.channelzEnabled=!0,this.callTracker=new zr.ChannelzCallTracker,this.childrenTracker=new zr.ChannelzChildrenTracker,this.streamTracker=new zr.ChannelzCallTracker;let a={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new iI.BackoffTimeout(()=>{this.handleBackoffTimer()},a),this.backoffTimeout.unref(),this.subchannelAddressString=(0,oI.subchannelAddressToString)(n),this.keepaliveTime=(o=r["grpc.keepalive_time_ms"])!==null&&o!==void 0?o:-1,r["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzTrace=new zr.ChannelzTrace,this.channelzRef=(0,zr.registerChannelzSubchannel)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(r,void 0,2))}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace(e){Rd.trace(ia.LogVerbosity.DEBUG,aI,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}refTrace(e){Rd.trace(ia.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([ee.ConnectivityState.TRANSIENT_FAILURE],ee.ConnectivityState.CONNECTING):this.transitionToState([ee.ConnectivityState.TRANSIENT_FAILURE],ee.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}startConnectingInternal(){let e=this.options;if(e["grpc.keepalive_time_ms"]){let n=Math.min(this.keepaliveTime,lI);e=Object.assign(Object.assign({},e),{"grpc.keepalive_time_ms":n})}this.connector.connect(this.subchannelAddress,this.credentials,e).then(n=>{this.transitionToState([ee.ConnectivityState.CONNECTING],ee.ConnectivityState.READY)?(this.transport=n,this.channelzEnabled&&this.childrenTracker.refChild(n.getChannelzRef()),n.addDisconnectListener(r=>{this.transitionToState([ee.ConnectivityState.READY],ee.ConnectivityState.IDLE),r&&this.keepaliveTime>0&&(this.keepaliveTime*=2,Rd.log(ia.LogVerbosity.ERROR,`Connection to ${(0,sI.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`))})):n.shutdown()},n=>{this.transitionToState([ee.ConnectivityState.CONNECTING],ee.ConnectivityState.TRANSIENT_FAILURE,`${n}`)})}transitionToState(e,n,r){var i,s;if(e.indexOf(this.connectivityState)===-1)return!1;this.trace(ee.ConnectivityState[this.connectivityState]+" -> "+ee.ConnectivityState[n]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+ee.ConnectivityState[n]);let o=this.connectivityState;switch(this.connectivityState=n,n){case ee.ConnectivityState.READY:this.stopBackoff();break;case ee.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case ee.ConnectivityState.TRANSIENT_FAILURE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),(i=this.transport)===null||i===void 0||i.shutdown(),this.transport=null,this.backoffTimeout.isRunning()||process.nextTick(()=>{this.handleBackoffTimer()});break;case ee.ConnectivityState.IDLE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),(s=this.transport)===null||s===void 0||s.shutdown(),this.transport=null;break;default:throw new Error(`Invalid state: unknown ConnectivityState ${n}`)}for(let a of this.stateListeners)a(this,o,n,this.keepaliveTime,r);return!0}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,this.refcount===0&&(this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Shutting down"),this.channelzEnabled&&(0,zr.unregisterChannelzRef)(this.channelzRef),process.nextTick(()=>{this.transitionToState([ee.ConnectivityState.CONNECTING,ee.ConnectivityState.READY],ee.ConnectivityState.IDLE)}))}unrefIfOneRef(){return this.refcount===1?(this.unref(),!0):!1}createCall(e,n,r,i){if(!this.transport)throw new Error("Cannot create call, subchannel not READY");let s;return this.channelzEnabled?(this.callTracker.addCallStarted(),this.streamTracker.addCallStarted(),s={onCallEnd:o=>{o.code===ia.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}}):s={},this.transport.createCall(e,n,r,i,s)}startConnecting(){process.nextTick(()=>{this.transitionToState([ee.ConnectivityState.IDLE],ee.ConnectivityState.CONNECTING)||this.connectivityState===ee.ConnectivityState.TRANSIENT_FAILURE&&(this.continueConnecting=!0)})}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.add(e)}removeConnectivityStateListener(e){this.stateListeners.delete(e)}resetBackoff(){process.nextTick(()=>{this.backoffTimeout.reset(),this.transitionToState([ee.ConnectivityState.TRANSIENT_FAILURE],ee.ConnectivityState.CONNECTING)})}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}getRealSubchannel(){return this}realSubchannelEquals(e){return e.getRealSubchannel()===this}throttleKeepalive(e){e>this.keepaliveTime&&(this.keepaliveTime=e)}};sa.Subchannel=Od});var kd=g(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.setup=kn.DEFAULT_PORT=void 0;var Zv=Nt(),t0=W("dns"),n0=W("util"),cI=Hc(),xd=H(),Nd=He(),uI=ce(),dI=H(),Nn=Ze(),e0=W("net"),hI=ki(),fI="dns_resolver";function Mn(t){uI.trace(dI.LogVerbosity.DEBUG,fI,t)}kn.DEFAULT_PORT=443;var pI=3e4,gI=n0.promisify(t0.resolveTxt),mI=n0.promisify(t0.lookup);function yI(...t){let e=[];for(let n=0;n<Math.max.apply(null,t.map(r=>r.length));n++)for(let r of t)n<r.length&&e.push(r[n]);return e}var Md=class{constructor(e,n,r){var i,s,o;this.target=e,this.listener=n,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,this.isServiceConfigEnabled=!0,this.returnedIpResult=!1,Mn("Resolver constructed for target "+(0,Nn.uriToString)(e));let a=(0,Nn.splitHostPort)(e.path);a===null?(this.ipResult=null,this.dnsHostname=null,this.port=null):(0,e0.isIPv4)(a.host)||(0,e0.isIPv6)(a.host)?(this.ipResult=[{host:a.host,port:(i=a.port)!==null&&i!==void 0?i:kn.DEFAULT_PORT}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=a.host,this.port=(s=a.port)!==null&&s!==void 0?s:kn.DEFAULT_PORT),this.percentage=Math.random()*100,r["grpc.service_config_disable_resolution"]===1&&(this.isServiceConfigEnabled=!1),this.defaultResolutionError={code:xd.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0,Nn.uriToString)(this.target)}`,metadata:new Nd.Metadata};let l={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoff=new hI.BackoffTimeout(()=>{this.continueResolving&&this.startResolutionWithBackoff()},l),this.backoff.unref(),this.minTimeBetweenResolutionsMs=(o=r["grpc.dns_min_time_between_resolutions_ms"])!==null&&o!==void 0?o:pI,this.nextResolutionTimer=setTimeout(()=>{},0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(this.ipResult!==null){this.returnedIpResult||(Mn("Returning IP address for target "+(0,Nn.uriToString)(this.target)),setImmediate(()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})}),this.returnedIpResult=!0),this.backoff.stop(),this.backoff.reset(),this.stopNextResolutionTimer();return}if(this.dnsHostname===null)Mn("Failed to parse DNS address "+(0,Nn.uriToString)(this.target)),setImmediate(()=>{this.listener.onError({code:xd.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0,Nn.uriToString)(this.target)}`,metadata:new Nd.Metadata})}),this.stopNextResolutionTimer();else{if(this.pendingLookupPromise!==null)return;Mn("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;let e=this.dnsHostname;this.pendingLookupPromise=mI(e,{all:!0}),this.pendingLookupPromise.then(n=>{if(this.pendingLookupPromise===null)return;this.pendingLookupPromise=null,this.backoff.reset(),this.backoff.stop();let r=n.filter(o=>o.family===4),i=n.filter(o=>o.family===6);this.latestLookupResult=yI(i,r).map(o=>({host:o.address,port:+this.port}));let s="["+this.latestLookupResult.map(o=>o.host+":"+o.port).join(",")+"]";if(Mn("Resolved addresses for target "+(0,Nn.uriToString)(this.target)+": "+s),this.latestLookupResult.length===0){this.listener.onError(this.defaultResolutionError);return}this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})},n=>{this.pendingLookupPromise!==null&&(Mn("Resolution error for target "+(0,Nn.uriToString)(this.target)+": "+n.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener.onError(this.defaultResolutionError))}),this.isServiceConfigEnabled&&this.pendingTxtPromise===null&&(this.pendingTxtPromise=gI(e),this.pendingTxtPromise.then(n=>{if(this.pendingTxtPromise!==null){this.pendingTxtPromise=null;try{this.latestServiceConfig=(0,cI.extractAndSelectServiceConfig)(n,this.percentage)}catch(r){this.latestServiceConfigError={code:xd.Status.UNAVAILABLE,details:`Parsing service config failed with error ${r.message}`,metadata:new Nd.Metadata}}this.latestLookupResult!==null&&this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})}},n=>{}))}}startNextResolutionTimer(){var e,n;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=(n=(e=setTimeout(()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()},this.minTimeBetweenResolutionsMs)).unref)===null||n===void 0?void 0:n.call(e),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){this.pendingLookupPromise===null&&(this.continueResolving=!1,this.backoff.runOnce(),this.startNextResolutionTimer(),this.startResolution())}updateResolution(){this.pendingLookupPromise===null&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?(this.isNextResolutionTimerRunning?Mn('resolution update delayed by "min time between resolutions" rate limit'):Mn("resolution update delayed by backoff timer until "+this.backoff.getEndTime().toISOString()),this.continueResolving=!0):this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.reset(),this.backoff.stop(),this.stopNextResolutionTimer(),this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.returnedIpResult=!1}static getDefaultAuthority(e){return e.path}};function vI(){(0,Zv.registerResolver)("dns",Md),(0,Zv.registerDefaultScheme)("dns")}kn.setup=vI});var Pd=g(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.getProxiedConnection=Hr.mapProxyName=void 0;var ns=ce(),jr=H(),_I=Nt(),SI=W("http"),EI=W("tls"),wI=ce(),r0=kt(),Gr=Ze(),CI=W("url"),TI=kd(),bI="proxy";function Pn(t){wI.trace(jr.LogVerbosity.DEBUG,bI,t)}function II(){let t="",e="";if(process.env.grpc_proxy)e="grpc_proxy",t=process.env.grpc_proxy;else if(process.env.https_proxy)e="https_proxy",t=process.env.https_proxy;else if(process.env.http_proxy)e="http_proxy",t=process.env.http_proxy;else return{};let n;try{n=new CI.URL(t)}catch{return(0,ns.log)(jr.LogVerbosity.ERROR,`cannot parse value of "${e}" env var`),{}}if(n.protocol!=="http:")return(0,ns.log)(jr.LogVerbosity.ERROR,`"${n.protocol}" scheme not supported in proxy URI`),{};let r=null;n.username&&(n.password?((0,ns.log)(jr.LogVerbosity.INFO,"userinfo found in proxy URI"),r=`${n.username}:${n.password}`):r=n.username);let i=n.hostname,s=n.port;s===""&&(s="80");let o={address:`${i}:${s}`};return r&&(o.creds=r),Pn("Proxy server "+o.address+" set by environment variable "+e),o}function AI(){let t=process.env.no_grpc_proxy,e="no_grpc_proxy";return t||(t=process.env.no_proxy,e="no_proxy"),t?(Pn("No proxy server list set by environment variable "+e),t.split(",")):[]}function DI(t,e){var n;let r={target:t,extraOptions:{}};if(((n=e["grpc.enable_http_proxy"])!==null&&n!==void 0?n:1)===0||t.scheme==="unix")return r;let i=II();if(!i.address)return r;let s=(0,Gr.splitHostPort)(t.path);if(!s)return r;let o=s.host;for(let l of AI())if(l===o)return Pn("Not using proxy for target in no_proxy list: "+(0,Gr.uriToString)(t)),r;let a={"grpc.http_connect_target":(0,Gr.uriToString)(t)};return i.creds&&(a["grpc.http_connect_creds"]=i.creds),{target:{scheme:"dns",path:i.address},extraOptions:a}}Hr.mapProxyName=DI;function RI(t,e,n){var r;if(!("grpc.http_connect_target"in e))return Promise.resolve({});let i=e["grpc.http_connect_target"],s=(0,Gr.parseUri)(i);if(s===null)return Promise.resolve({});let o=(0,Gr.splitHostPort)(s.path);if(o===null)return Promise.resolve({});let a=`${o.host}:${(r=o.port)!==null&&r!==void 0?r:TI.DEFAULT_PORT}`,l={method:"CONNECT",path:a},c={Host:a};(0,r0.isTcpSubchannelAddress)(t)?(l.host=t.host,l.port=t.port):l.socketPath=t.path,"grpc.http_connect_creds"in e&&(c["Proxy-Authorization"]="Basic "+Buffer.from(e["grpc.http_connect_creds"]).toString("base64")),l.headers=c;let d=(0,r0.subchannelAddressToString)(t);return Pn("Using proxy "+d+" to connect to "+l.path),new Promise((h,f)=>{let p=SI.request(l);p.once("connect",(m,_,C)=>{var T;if(p.removeAllListeners(),_.removeAllListeners(),m.statusCode===200)if(Pn("Successfully connected to "+l.path+" through proxy "+d),"secureContext"in n){let S=(0,_I.getDefaultAuthority)(s),O=(0,Gr.splitHostPort)(S),A=(T=O?.host)!==null&&T!==void 0?T:S,P=EI.connect(Object.assign({host:A,servername:A,socket:_},n),()=>{Pn("Successfully established a TLS connection to "+l.path+" through proxy "+d),h({socket:P,realTarget:s})});P.on("error",L=>{Pn("Failed to establish a TLS connection to "+l.path+" through proxy "+d+" with error "+L.message),f()})}else Pn("Successfully established a plaintext connection to "+l.path+" through proxy "+d),h({socket:_,realTarget:s});else(0,ns.log)(jr.LogVerbosity.ERROR,"Failed to connect to "+l.path+" through proxy "+d+" with status "+m.statusCode),f()}),p.once("error",m=>{p.removeAllListeners(),(0,ns.log)(jr.LogVerbosity.ERROR,"Failed to connect to proxy "+d+" with error "+m.message),f()}),p.end()})}Hr.getProxiedConnection=RI});var Ld=g(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});oa.StreamDecoder=void 0;var sn=function(t){return t[t.NO_DATA=0]="NO_DATA",t[t.READING_SIZE=1]="READING_SIZE",t[t.READING_MESSAGE=2]="READING_MESSAGE",t}(sn||{}),Fd=class{constructor(){this.readState=sn.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(e){let n=0,r,i=[];for(;n<e.length;)switch(this.readState){case sn.NO_DATA:this.readCompressFlag=e.slice(n,n+1),n+=1,this.readState=sn.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case sn.READING_SIZE:if(r=Math.min(e.length-n,this.readSizeRemaining),e.copy(this.readPartialSize,4-this.readSizeRemaining,n,n+r),this.readSizeRemaining-=r,n+=r,this.readSizeRemaining===0)if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=sn.READING_MESSAGE;else{let s=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=sn.NO_DATA,i.push(s)}break;case sn.READING_MESSAGE:if(r=Math.min(e.length-n,this.readMessageRemaining),this.readPartialMessage.push(e.slice(n,n+r)),this.readMessageRemaining-=r,n+=r,this.readMessageRemaining===0){let s=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),o=Buffer.concat(s,this.readMessageSize+5);this.readState=sn.NO_DATA,i.push(o)}break;default:throw new Error("Unexpected read state")}return i}};oa.StreamDecoder=Fd});var i0=g(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});aa.Http2SubchannelCall=void 0;var on=W("http2"),OI=W("os"),J=H(),Fn=He(),xI=Ld(),NI=ce(),MI=H(),kI="subchannel_call";function PI(t){for(let[e,n]of Object.entries(OI.constants.errno))if(n===t)return e;return"Unknown system error "+t}var Bd=class{constructor(e,n,r,i,s){this.http2Stream=e,this.callEventTracker=n,this.listener=r,this.transport=i,this.callId=s,this.decoder=new xI.StreamDecoder,this.isReadFilterPending=!1,this.isPushPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.mappedStatusCode=J.Status.UNKNOWN,this.finalStatus=null,this.internalError=null,e.on("response",(o,a)=>{let l="";for(let c of Object.keys(o))l+="		"+c+": "+o[c]+`
`;switch(this.trace(`Received server headers:
`+l),o[":status"]){case 400:this.mappedStatusCode=J.Status.INTERNAL;break;case 401:this.mappedStatusCode=J.Status.UNAUTHENTICATED;break;case 403:this.mappedStatusCode=J.Status.PERMISSION_DENIED;break;case 404:this.mappedStatusCode=J.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:this.mappedStatusCode=J.Status.UNAVAILABLE;break;default:this.mappedStatusCode=J.Status.UNKNOWN}if(a&on.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(o);else{let c;try{c=Fn.Metadata.fromHttp2Headers(o)}catch(d){this.endCall({code:J.Status.UNKNOWN,details:d.message,metadata:new Fn.Metadata});return}this.listener.onReceiveMetadata(c)}}),e.on("trailers",o=>{this.handleTrailers(o)}),e.on("data",o=>{if(this.statusOutput)return;this.trace("receive HTTP/2 data frame of length "+o.length);let a=this.decoder.write(o);for(let l of a)this.trace("parsed message of length "+l.length),this.callEventTracker.addMessageReceived(),this.tryPush(l)}),e.on("end",()=>{this.readsClosed=!0,this.maybeOutputStatus()}),e.on("close",()=>{process.nextTick(()=>{var o;if(this.trace("HTTP/2 stream closed with code "+e.rstCode),((o=this.finalStatus)===null||o===void 0?void 0:o.code)===J.Status.OK)return;let a,l="";switch(e.rstCode){case on.constants.NGHTTP2_NO_ERROR:if(this.finalStatus!==null)return;a=J.Status.INTERNAL,l=`Received RST_STREAM with code ${e.rstCode}`;break;case on.constants.NGHTTP2_REFUSED_STREAM:a=J.Status.UNAVAILABLE,l="Stream refused by server";break;case on.constants.NGHTTP2_CANCEL:a=J.Status.CANCELLED,l="Call cancelled";break;case on.constants.NGHTTP2_ENHANCE_YOUR_CALM:a=J.Status.RESOURCE_EXHAUSTED,l="Bandwidth exhausted or memory limit exceeded";break;case on.constants.NGHTTP2_INADEQUATE_SECURITY:a=J.Status.PERMISSION_DENIED,l="Protocol not secure enough";break;case on.constants.NGHTTP2_INTERNAL_ERROR:a=J.Status.INTERNAL,this.internalError===null?l=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`:this.internalError.code==="ECONNRESET"||this.internalError.code==="ETIMEDOUT"?(a=J.Status.UNAVAILABLE,l=this.internalError.message):l=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:a=J.Status.INTERNAL,l=`Received RST_STREAM with code ${e.rstCode}`}this.endCall({code:a,details:l,metadata:new Fn.Metadata,rstCode:e.rstCode})})}),e.on("error",o=>{o.code!=="ERR_HTTP2_STREAM_ERROR"&&(this.trace("Node error event: message="+o.message+" code="+o.code+" errno="+PI(o.errno)+" syscall="+o.syscall),this.internalError=o),this.callEventTracker.onStreamEnd(!1)})}onDisconnect(){this.endCall({code:J.Status.UNAVAILABLE,details:"Connection dropped",metadata:new Fn.Metadata})}outputStatus(){this.statusOutput||(this.statusOutput=!0,this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"'),this.callEventTracker.onCallEnd(this.finalStatus),process.nextTick(()=>{this.listener.onReceiveStatus(this.finalStatus)}),this.http2Stream.resume())}trace(e){NI.trace(MI.LogVerbosity.DEBUG,kI,"["+this.callId+"] "+e)}endCall(e){(this.finalStatus===null||this.finalStatus.code===J.Status.OK)&&(this.finalStatus=e,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){this.finalStatus!==null&&(this.finalStatus.code!==J.Status.OK||this.readsClosed&&this.unpushedReadMessages.length===0&&!this.isReadFilterPending&&!this.isPushPending)&&this.outputStatus()}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null)),this.canPush=!1,this.isPushPending=!0,process.nextTick(()=>{this.isPushPending=!1,!this.statusOutput&&(this.listener.onReceiveMessage(e),this.maybeOutputStatus())})}tryPush(e){this.canPush?(this.http2Stream.pause(),this.push(e)):(this.trace("unpushedReadMessages.push message of length "+e.length),this.unpushedReadMessages.push(e))}handleTrailers(e){this.callEventTracker.onStreamEnd(!0);let n="";for(let l of Object.keys(e))n+="		"+l+": "+e[l]+`
`;this.trace(`Received server trailers:
`+n);let r;try{r=Fn.Metadata.fromHttp2Headers(e)}catch{r=new Fn.Metadata}let i=r.getMap(),s=this.mappedStatusCode;if(s===J.Status.UNKNOWN&&typeof i["grpc-status"]=="string"){let l=Number(i["grpc-status"]);l in J.Status&&(s=l,this.trace("received status code "+l+" from server")),r.remove("grpc-status")}let o="";if(typeof i["grpc-message"]=="string"){try{o=decodeURI(i["grpc-message"])}catch{o=i["grpc-message"]}r.remove("grpc-message"),this.trace('received status details string "'+o+'" from server')}let a={code:s,details:o,metadata:r};this.endCall(a)}destroyHttp2Stream(){var e;if(!this.http2Stream.destroyed){let n;((e=this.finalStatus)===null||e===void 0?void 0:e.code)===J.Status.OK?n=on.constants.NGHTTP2_NO_ERROR:n=on.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+n),this.http2Stream.close(n)}}cancelWithStatus(e,n){this.trace("cancelWithStatus code: "+e+' details: "'+n+'"'),this.endCall({code:e,details:n,metadata:new Fn.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}startRead(){if(this.finalStatus!==null&&this.finalStatus.code!==J.Status.OK){this.readsClosed=!0,this.maybeOutputStatus();return}if(this.canPush=!0,this.unpushedReadMessages.length>0){let e=this.unpushedReadMessages.shift();this.push(e);return}this.http2Stream.resume()}sendMessageWithContext(e,n){this.trace("write() called with message of length "+n.length);let r=i=>{process.nextTick(()=>{var s;let o=J.Status.UNAVAILABLE;i?.code==="ERR_STREAM_WRITE_AFTER_END"&&(o=J.Status.INTERNAL),i&&this.cancelWithStatus(o,`Write error: ${i.message}`),(s=e.callback)===null||s===void 0||s.call(e)})};this.trace("sending data chunk of length "+n.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write(n,r)}catch(i){this.endCall({code:J.Status.UNAVAILABLE,details:`Write failed with error ${i.message}`,metadata:new Fn.Metadata})}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end()}};aa.Http2SubchannelCall=Bd});var Vd=g(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.getNextCallNumber=void 0;var FI=0;function LI(){return FI++}la.getNextCallNumber=LI});var a0=g(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});ua.Http2SubchannelConnector=void 0;var Gd=W("http2"),s0=W("tls"),Ud=er(),rs=H(),BI=Pd(),Wr=ce(),o0=Nt(),ca=kt(),$r=Ze(),VI=W("net"),UI=i0(),qI=Vd(),qd="transport",zI="transport_flowctrl",jI=Ac().version,{HTTP2_HEADER_AUTHORITY:GI,HTTP2_HEADER_CONTENT_TYPE:HI,HTTP2_HEADER_METHOD:$I,HTTP2_HEADER_PATH:WI,HTTP2_HEADER_TE:KI,HTTP2_HEADER_USER_AGENT:QI}=Gd.constants,YI=2e4,JI=Buffer.from("too_many_pings","ascii"),zd=class{constructor(e,n,r,i){this.session=e,this.remoteName=i,this.keepaliveTimeMs=-1,this.keepaliveTimeoutMs=YI,this.keepaliveTimerId=null,this.pendingSendKeepalivePing=!1,this.keepaliveTimeoutId=null,this.keepaliveWithoutCalls=!1,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=!1,this.channelzEnabled=!0,this.streamTracker=new Ud.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.subchannelAddressString=(0,ca.subchannelAddressToString)(n),r["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzRef=(0,Ud.registerChannelzSocket)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.userAgent=[r["grpc.primary_user_agent"],`grpc-node-js/${jI}`,r["grpc.secondary_user_agent"]].filter(s=>s).join(" "),"grpc.keepalive_time_ms"in r&&(this.keepaliveTimeMs=r["grpc.keepalive_time_ms"]),"grpc.keepalive_timeout_ms"in r&&(this.keepaliveTimeoutMs=r["grpc.keepalive_timeout_ms"]),"grpc.keepalive_permit_without_calls"in r?this.keepaliveWithoutCalls=r["grpc.keepalive_permit_without_calls"]===1:this.keepaliveWithoutCalls=!1,e.once("close",()=>{this.trace("session closed"),this.stopKeepalivePings(),this.handleDisconnect()}),e.once("goaway",(s,o,a)=>{let l=!1;s===Gd.constants.NGHTTP2_ENHANCE_YOUR_CALM&&a&&a.equals(JI)&&(l=!0),this.trace("connection closed by GOAWAY with code "+s+" and data "+a?.toString()),this.reportDisconnectToOwner(l)}),e.once("error",s=>{this.trace("connection closed with error "+s.message)}),Wr.isTracerEnabled(qd)&&(e.on("remoteSettings",s=>{this.trace("new settings received"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(s))}),e.on("localSettings",s=>{this.trace("local settings acknowledged by remote"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(s))})),this.keepaliveWithoutCalls&&this.maybeStartKeepalivePingTimer()}getChannelzInfo(){var e,n,r;let i=this.session.socket,s=i.remoteAddress?(0,ca.stringToSubchannelAddress)(i.remoteAddress,i.remotePort):null,o=i.localAddress?(0,ca.stringToSubchannelAddress)(i.localAddress,i.localPort):null,a;if(this.session.encrypted){let c=i,d=c.getCipher(),h=c.getCertificate(),f=c.getPeerCertificate();a={cipherSuiteStandardName:(e=d.standardName)!==null&&e!==void 0?e:null,cipherSuiteOtherName:d.standardName?null:d.name,localCertificate:h&&"raw"in h?h.raw:null,remoteCertificate:f&&"raw"in f?f.raw:null}}else a=null;return{remoteAddress:s,localAddress:o,security:a,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:(n=this.session.state.localWindowSize)!==null&&n!==void 0?n:null,remoteFlowControlWindow:(r=this.session.state.remoteWindowSize)!==null&&r!==void 0?r:null}}trace(e){Wr.trace(rs.LogVerbosity.DEBUG,qd,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}keepaliveTrace(e){Wr.trace(rs.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}flowControlTrace(e){Wr.trace(rs.LogVerbosity.DEBUG,zI,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}internalsTrace(e){Wr.trace(rs.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}reportDisconnectToOwner(e){this.disconnectHandled||(this.disconnectHandled=!0,this.disconnectListeners.forEach(n=>n(e)))}handleDisconnect(){this.reportDisconnectToOwner(!1),setImmediate(()=>{for(let e of this.activeCalls)e.onDisconnect()})}addDisconnectListener(e){this.disconnectListeners.push(e)}clearKeepaliveTimer(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null)}clearKeepaliveTimeout(){this.keepaliveTimeoutId&&(clearTimeout(this.keepaliveTimeoutId),this.keepaliveTimeoutId=null)}canSendPing(){return this.keepaliveTimeMs>0&&(this.keepaliveWithoutCalls||this.activeCalls.size>0)}maybeSendPing(){var e,n;if(this.clearKeepaliveTimer(),!this.canSendPing()){this.pendingSendKeepalivePing=!0;return}this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimeoutId||(this.keepaliveTimeoutId=setTimeout(()=>{this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()},this.keepaliveTimeoutMs),(n=(e=this.keepaliveTimeoutId).unref)===null||n===void 0||n.call(e));try{this.session.ping((r,i,s)=>{r&&(this.keepaliveTrace("Ping failed with error "+r.message),this.handleDisconnect()),this.keepaliveTrace("Received ping response"),this.clearKeepaliveTimeout(),this.maybeStartKeepalivePingTimer()})}catch{this.handleDisconnect()}}maybeStartKeepalivePingTimer(){var e,n;this.canSendPing()&&(this.pendingSendKeepalivePing?(this.pendingSendKeepalivePing=!1,this.maybeSendPing()):!this.keepaliveTimerId&&!this.keepaliveTimeoutId&&(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),this.keepaliveTimerId=(n=(e=setTimeout(()=>{this.maybeSendPing()},this.keepaliveTimeMs)).unref)===null||n===void 0?void 0:n.call(e)))}stopKeepalivePings(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null),this.clearKeepaliveTimeout()}removeActiveCall(e){this.activeCalls.delete(e),this.activeCalls.size===0&&this.session.unref()}addActiveCall(e){this.activeCalls.add(e),this.activeCalls.size===1&&(this.session.ref(),this.keepaliveWithoutCalls||this.maybeStartKeepalivePingTimer())}createCall(e,n,r,i,s){let o=e.toHttp2Headers();o[GI]=n,o[QI]=this.userAgent,o[HI]="application/grpc",o[$I]="POST",o[WI]=r,o[KI]="trailers";let a;try{a=this.session.request(o)}catch(d){throw this.handleDisconnect(),d}this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed);let l,c;return this.channelzEnabled?(this.streamTracker.addCallStarted(),l={addMessageSent:()=>{var d;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,(d=s.addMessageSent)===null||d===void 0||d.call(s)},addMessageReceived:()=>{var d;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,(d=s.addMessageReceived)===null||d===void 0||d.call(s)},onCallEnd:d=>{var h;(h=s.onCallEnd)===null||h===void 0||h.call(s,d),this.removeActiveCall(c)},onStreamEnd:d=>{var h;d?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed(),(h=s.onStreamEnd)===null||h===void 0||h.call(s,d)}}):l={addMessageSent:()=>{var d;(d=s.addMessageSent)===null||d===void 0||d.call(s)},addMessageReceived:()=>{var d;(d=s.addMessageReceived)===null||d===void 0||d.call(s)},onCallEnd:d=>{var h;(h=s.onCallEnd)===null||h===void 0||h.call(s,d),this.removeActiveCall(c)},onStreamEnd:d=>{var h;(h=s.onStreamEnd)===null||h===void 0||h.call(s,d)}},c=new UI.Http2SubchannelCall(a,l,i,this,(0,qI.getNextCallNumber)()),this.addActiveCall(c),c}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}shutdown(){this.session.close(),(0,Ud.unregisterChannelzRef)(this.channelzRef)}},jd=class{constructor(e){this.channelTarget=e,this.session=null,this.isShutdown=!1}trace(e){Wr.trace(rs.LogVerbosity.DEBUG,qd,(0,$r.uriToString)(this.channelTarget)+" "+e)}createSession(e,n,r,i){return this.isShutdown?Promise.reject():new Promise((s,o)=>{var a,l,c;let d;i.realTarget?(d=(0,$r.uriToString)(i.realTarget),this.trace("creating HTTP/2 session through proxy to "+(0,$r.uriToString)(i.realTarget))):(d=null,this.trace("creating HTTP/2 session to "+(0,ca.subchannelAddressToString)(e)));let h=(0,o0.getDefaultAuthority)((a=i.realTarget)!==null&&a!==void 0?a:this.channelTarget),f=n._getConnectionOptions()||{};f.maxSendHeaderBlockLength=Number.MAX_SAFE_INTEGER,"grpc-node.max_session_memory"in r?f.maxSessionMemory=r["grpc-node.max_session_memory"]:f.maxSessionMemory=Number.MAX_SAFE_INTEGER;let p="http://";if("secureContext"in f){if(p="https://",r["grpc.ssl_target_name_override"]){let C=r["grpc.ssl_target_name_override"];f.checkServerIdentity=(T,S)=>(0,s0.checkServerIdentity)(C,S),f.servername=C}else{let C=(c=(l=(0,$r.splitHostPort)(h))===null||l===void 0?void 0:l.host)!==null&&c!==void 0?c:"localhost";f.servername=C}i.socket&&(f.createConnection=(C,T)=>i.socket)}else f.createConnection=(C,T)=>i.socket?i.socket:VI.connect(e);f=Object.assign(Object.assign(Object.assign({},f),e),{enableTrace:r["grpc-node.tls_enable_trace"]===1});let m=Gd.connect(p+h,f);this.session=m;let _="Failed to connect";m.unref(),m.once("connect",()=>{m.removeAllListeners(),s(new zd(m,e,r,d)),this.session=null}),m.once("close",()=>{this.session=null,setImmediate(()=>{o(`${_} (${new Date().toISOString()})`)})}),m.once("error",C=>{_=C.message,this.trace("connection failed with error "+_)})})}connect(e,n,r){var i,s;if(this.isShutdown)return Promise.reject();let o=n._getConnectionOptions()||{};if("secureContext"in o){if(o.ALPNProtocols=["h2"],r["grpc.ssl_target_name_override"]){let a=r["grpc.ssl_target_name_override"];o.checkServerIdentity=(l,c)=>(0,s0.checkServerIdentity)(a,c),o.servername=a}else if("grpc.http_connect_target"in r){let a=(0,o0.getDefaultAuthority)((i=(0,$r.parseUri)(r["grpc.http_connect_target"]))!==null&&i!==void 0?i:{path:"localhost"}),l=(0,$r.splitHostPort)(a);o.servername=(s=l?.host)!==null&&s!==void 0?s:a}r["grpc-node.tls_enable_trace"]&&(o.enableTrace=!0)}return(0,BI.getProxiedConnection)(e,r,o).then(a=>this.createSession(e,n,r,a))}shutdown(){var e;this.isShutdown=!0,(e=this.session)===null||e===void 0||e.close(),this.session=null}};ua.Http2SubchannelConnector=jd});var l0=g(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.getSubchannelPool=Kr.SubchannelPool=void 0;var XI=$g(),ZI=Xv(),eA=kt(),tA=Ze(),nA=a0(),rA=1e4,is=class{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let e=!0;for(let n in this.pool){let i=this.pool[n].filter(s=>!s.subchannel.unrefIfOneRef());i.length>0&&(e=!1),this.pool[n]=i}e&&this.cleanupTimer!==null&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var e,n;this.cleanupTimer===null&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},rA),(n=(e=this.cleanupTimer).unref)===null||n===void 0||n.call(e))}getOrCreateSubchannel(e,n,r,i){this.ensureCleanupTask();let s=(0,tA.uriToString)(e);if(s in this.pool){let a=this.pool[s];for(let l of a)if((0,eA.subchannelAddressEqual)(n,l.subchannelAddress)&&(0,XI.channelOptionsEqual)(r,l.channelArguments)&&i._equals(l.channelCredentials))return l.subchannel}let o=new ZI.Subchannel(e,n,r,i,new nA.Http2SubchannelConnector(e));return s in this.pool||(this.pool[s]=[]),this.pool[s].push({subchannelAddress:n,channelArguments:r,channelCredentials:i,subchannel:o}),o.ref(),o}};Kr.SubchannelPool=is;var iA=new is;function sA(t){return t?iA:new is}Kr.getSubchannelPool=sA});var $d=g(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.FilterStackFactory=Qr.FilterStack=void 0;var da=class{constructor(e){this.filters=e}sendMetadata(e){let n=e;for(let r=0;r<this.filters.length;r++)n=this.filters[r].sendMetadata(n);return n}receiveMetadata(e){let n=e;for(let r=this.filters.length-1;r>=0;r--)n=this.filters[r].receiveMetadata(n);return n}sendMessage(e){let n=e;for(let r=0;r<this.filters.length;r++)n=this.filters[r].sendMessage(n);return n}receiveMessage(e){let n=e;for(let r=this.filters.length-1;r>=0;r--)n=this.filters[r].receiveMessage(n);return n}receiveTrailers(e){let n=e;for(let r=this.filters.length-1;r>=0;r--)n=this.filters[r].receiveTrailers(n);return n}push(e){this.filters.unshift(...e)}getFilters(){return this.filters}};Qr.FilterStack=da;var Hd=class t{constructor(e){this.factories=e}push(e){this.factories.unshift(...e)}clone(){return new t([...this.factories])}createFilter(){return new da(this.factories.map(e=>e.createFilter()))}};Qr.FilterStackFactory=Hd});var Wd=g(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.CompressionAlgorithms=void 0;var c0=function(t){return t[t.identity=0]="identity",t[t.deflate=1]="deflate",t[t.gzip=2]="gzip",t}(c0||(ha.CompressionAlgorithms=c0={}))});var pa=g(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});fa.BaseFilter=void 0;var Kd=class{sendMetadata(e){return k(this,null,function*(){return e})}receiveMetadata(e){return e}sendMessage(e){return k(this,null,function*(){return e})}receiveMessage(e){return k(this,null,function*(){return e})}receiveTrailers(e){return e}};fa.BaseFilter=Kd});var h0=g(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.CompressionFilterFactory=Jr.CompressionFilter=void 0;var ga=W("zlib"),d0=Wd(),oA=H(),aA=pa(),lA=ce(),cA=t=>typeof t=="number"&&typeof d0.CompressionAlgorithms[t]=="string",Yr=class{writeMessage(e,n){return k(this,null,function*(){let r=e;n&&(r=yield this.compressMessage(r));let i=Buffer.allocUnsafe(r.length+5);return i.writeUInt8(n?1:0,0),i.writeUInt32BE(r.length,1),r.copy(i,5),i})}readMessage(e){return k(this,null,function*(){let n=e.readUInt8(0)===1,r=e.slice(5);return n&&(r=yield this.decompressMessage(r)),r})}},tr=class extends Yr{compressMessage(e){return k(this,null,function*(){return e})}writeMessage(e,n){return k(this,null,function*(){let r=Buffer.allocUnsafe(e.length+5);return r.writeUInt8(0,0),r.writeUInt32BE(e.length,1),e.copy(r,5),r})}decompressMessage(e){return Promise.reject(new Error('Received compressed message but "grpc-encoding" header was identity'))}},Qd=class extends Yr{compressMessage(e){return new Promise((n,r)=>{ga.deflate(e,(i,s)=>{i?r(i):n(s)})})}decompressMessage(e){return new Promise((n,r)=>{ga.inflate(e,(i,s)=>{i?r(i):n(s)})})}},Yd=class extends Yr{compressMessage(e){return new Promise((n,r)=>{ga.gzip(e,(i,s)=>{i?r(i):n(s)})})}decompressMessage(e){return new Promise((n,r)=>{ga.unzip(e,(i,s)=>{i?r(i):n(s)})})}},Jd=class extends Yr{constructor(e){super(),this.compressionName=e}compressMessage(e){return Promise.reject(new Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(new Error(`Compression method not supported: ${this.compressionName}`))}};function u0(t){switch(t){case"identity":return new tr;case"deflate":return new Qd;case"gzip":return new Yd;default:return new Jd(t)}}var ma=class extends aA.BaseFilter{constructor(e,n){var r;super(),this.sharedFilterConfig=n,this.sendCompression=new tr,this.receiveCompression=new tr,this.currentCompressionAlgorithm="identity";let i=e["grpc.default_compression_algorithm"];if(i!==void 0)if(cA(i)){let s=d0.CompressionAlgorithms[i],o=(r=n.serverSupportedEncodingHeader)===null||r===void 0?void 0:r.split(",");(!o||o.includes(s))&&(this.currentCompressionAlgorithm=s,this.sendCompression=u0(this.currentCompressionAlgorithm))}else lA.log(oA.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${i}`)}sendMetadata(e){return k(this,null,function*(){let n=yield e;return n.set("grpc-accept-encoding","identity,deflate,gzip"),n.set("accept-encoding","identity"),this.currentCompressionAlgorithm==="identity"?n.remove("grpc-encoding"):n.set("grpc-encoding",this.currentCompressionAlgorithm),n})}receiveMetadata(e){let n=e.get("grpc-encoding");if(n.length>0){let i=n[0];typeof i=="string"&&(this.receiveCompression=u0(i))}e.remove("grpc-encoding");let r=e.get("grpc-accept-encoding")[0];return r&&(this.sharedFilterConfig.serverSupportedEncodingHeader=r,r.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new tr,this.currentCompressionAlgorithm="identity")),e.remove("grpc-accept-encoding"),e}sendMessage(e){return k(this,null,function*(){var n;let r=yield e,i;return this.sendCompression instanceof tr?i=!1:i=(((n=r.flags)!==null&&n!==void 0?n:0)&2)===0,{message:yield this.sendCompression.writeMessage(r.message,i),flags:r.flags}})}receiveMessage(e){return k(this,null,function*(){return this.receiveCompression.readMessage(yield e)})}};Jr.CompressionFilter=ma;var Xd=class{constructor(e,n){this.options=n,this.sharedFilterConfig={}}createFilter(){return new ma(this.options,this.sharedFilterConfig)}};Jr.CompressionFilterFactory=Xd});var p0=g(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.MaxMessageSizeFilterFactory=Xr.MaxMessageSizeFilter=void 0;var uA=pa(),ya=H(),f0=He(),va=class extends uA.BaseFilter{constructor(e){super(),this.maxSendMessageSize=ya.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=ya.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,"grpc.max_send_message_length"in e&&(this.maxSendMessageSize=e["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in e&&(this.maxReceiveMessageSize=e["grpc.max_receive_message_length"])}sendMessage(e){return k(this,null,function*(){if(this.maxSendMessageSize===-1)return e;{let n=yield e;if(n.message.length>this.maxSendMessageSize)throw{code:ya.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${n.message.length} vs. ${this.maxSendMessageSize})`,metadata:new f0.Metadata};return n}})}receiveMessage(e){return k(this,null,function*(){if(this.maxReceiveMessageSize===-1)return e;{let n=yield e;if(n.length>this.maxReceiveMessageSize)throw{code:ya.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${n.length} vs. ${this.maxReceiveMessageSize})`,metadata:new f0.Metadata};return n}})}};Xr.MaxMessageSizeFilter=va;var Zd=class{constructor(e){this.options=e}createFilter(){return new va(this.options)}};Xr.MaxMessageSizeFilterFactory=Zd});var _a=g(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.deadlineToString=Gt.getRelativeTimeout=Gt.getDeadlineTimeoutString=Gt.minDeadline=void 0;function dA(...t){let e=1/0;for(let n of t){let r=n instanceof Date?n.getTime():n;r<e&&(e=r)}return e}Gt.minDeadline=dA;var hA=[["m",1],["S",1e3],["M",60*1e3],["H",60*60*1e3]];function fA(t){let e=new Date().getTime();t instanceof Date&&(t=t.getTime());let n=Math.max(t-e,0);for(let[r,i]of hA){let s=n/i;if(s<1e8)return String(Math.ceil(s))+r}throw new Error("Deadline is too far in the future")}Gt.getDeadlineTimeoutString=fA;var pA=2147483647;function gA(t){let e=t instanceof Date?t.getTime():t,n=new Date().getTime(),r=e-n;return r<0?0:r>pA?1/0:r}Gt.getRelativeTimeout=gA;function mA(t){if(t instanceof Date)return t.toISOString();{let e=new Date(t);return Number.isNaN(e.getTime())?""+t:e.toISOString()}}Gt.deadlineToString=mA});var Ea=g(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa.restrictControlPlaneStatusCode=void 0;var Ht=H(),yA=[Ht.Status.OK,Ht.Status.INVALID_ARGUMENT,Ht.Status.NOT_FOUND,Ht.Status.ALREADY_EXISTS,Ht.Status.FAILED_PRECONDITION,Ht.Status.ABORTED,Ht.Status.OUT_OF_RANGE,Ht.Status.DATA_LOSS];function vA(t,e){return yA.includes(t)?{code:Ht.Status.INTERNAL,details:`Invalid status from control plane: ${t} ${Ht.Status[t]} ${e}`}:{code:t,details:e}}Sa.restrictControlPlaneStatusCode=vA});var m0=g(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.LoadBalancingCall=void 0;var g0=st(),wa=H(),_A=_a(),Ca=He(),ss=Sn(),SA=Ze(),EA=ce(),eh=Ea(),wA=W("http2"),CA="load_balancing_call",th=class{constructor(e,n,r,i,s,o,a){var l,c;this.channel=e,this.callConfig=n,this.methodName=r,this.host=i,this.credentials=s,this.deadline=o,this.callNumber=a,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.metadata=null,this.listener=null,this.onCallEnded=null;let d=this.methodName.split("/"),h="";d.length>=2&&(h=d[1]);let f=(c=(l=(0,SA.splitHostPort)(this.host))===null||l===void 0?void 0:l.host)!==null&&c!==void 0?c:"localhost";this.serviceUrl=`https://${f}/${h}`}trace(e){EA.trace(wa.LogVerbosity.DEBUG,CA,"["+this.callNumber+"] "+e)}outputStatus(e,n){var r,i;if(!this.ended){this.ended=!0,this.trace("ended with status: code="+e.code+' details="'+e.details+'"');let s=Object.assign(Object.assign({},e),{progress:n});(r=this.listener)===null||r===void 0||r.onReceiveStatus(s),(i=this.onCallEnded)===null||i===void 0||i.call(this,s.code)}}doPick(){var e,n;if(this.ended)return;if(!this.metadata)throw new Error("doPick called before start");this.trace("Pick called");let r=this.channel.doPick(this.metadata,this.callConfig.pickInformation),i=r.subchannel?"("+r.subchannel.getChannelzRef().id+") "+r.subchannel.getAddress():""+r.subchannel;switch(this.trace("Pick result: "+ss.PickResultType[r.pickResultType]+" subchannel: "+i+" status: "+((e=r.status)===null||e===void 0?void 0:e.code)+" "+((n=r.status)===null||n===void 0?void 0:n.details)),r.pickResultType){case ss.PickResultType.COMPLETE:this.credentials.generateMetadata({service_url:this.serviceUrl}).then(a=>{var l,c,d;if(this.ended){this.trace("Credentials metadata generation finished after call ended");return}let h=this.metadata.clone();if(h.merge(a),h.get("authorization").length>1&&this.outputStatus({code:wa.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new Ca.Metadata},"PROCESSED"),r.subchannel.getConnectivityState()!==g0.ConnectivityState.READY){this.trace("Picked subchannel "+i+" has state "+g0.ConnectivityState[r.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),this.doPick();return}this.deadline!==1/0&&h.set("grpc-timeout",(0,_A.getDeadlineTimeoutString)(this.deadline));try{this.child=r.subchannel.getRealSubchannel().createCall(h,this.host,this.methodName,{onReceiveMetadata:f=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(f)},onReceiveMessage:f=>{this.trace("Received message"),this.listener.onReceiveMessage(f)},onReceiveStatus:f=>{this.trace("Received status"),f.rstCode===wA.constants.NGHTTP2_REFUSED_STREAM?this.outputStatus(f,"REFUSED"):this.outputStatus(f,"PROCESSED")}})}catch(f){this.trace("Failed to start call on picked subchannel "+i+" with error "+f.message),this.outputStatus({code:wa.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+f.message,metadata:new Ca.Metadata},"NOT_STARTED");return}(c=(l=this.callConfig).onCommitted)===null||c===void 0||c.call(l),(d=r.onCallStarted)===null||d===void 0||d.call(r),this.onCallEnded=r.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending&&this.child.startRead(),this.pendingMessage&&this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.pendingHalfClose&&this.child.halfClose()},a=>{let{code:l,details:c}=(0,eh.restrictControlPlaneStatusCode)(typeof a.code=="number"?a.code:wa.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${a.message}`);this.outputStatus({code:l,details:c,metadata:new Ca.Metadata},"PROCESSED")});break;case ss.PickResultType.DROP:let{code:s,details:o}=(0,eh.restrictControlPlaneStatusCode)(r.status.code,r.status.details);setImmediate(()=>{this.outputStatus({code:s,details:o,metadata:r.status.metadata},"DROP")});break;case ss.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else{let{code:a,details:l}=(0,eh.restrictControlPlaneStatusCode)(r.status.code,r.status.details);setImmediate(()=>{this.outputStatus({code:a,details:l,metadata:r.status.metadata},"PROCESSED")})}break;case ss.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus(e,n){var r;this.trace("cancelWithStatus code: "+e+' details: "'+n+'"'),(r=this.child)===null||r===void 0||r.cancelWithStatus(e,n),this.outputStatus({code:e,details:n,metadata:new Ca.Metadata},"PROCESSED")}getPeer(){var e,n;return(n=(e=this.child)===null||e===void 0?void 0:e.getPeer())!==null&&n!==void 0?n:this.channel.getTarget()}start(e,n){this.trace("start called"),this.listener=n,this.metadata=e,this.doPick()}sendMessageWithContext(e,n){this.trace("write() called with message of length "+n.length),this.child?this.child.sendMessageWithContext(e,n):this.pendingMessage={context:e,message:n}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){throw new Error("Method not implemented.")}getCallNumber(){return this.callNumber}};Ta.LoadBalancingCall=th});var v0=g(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.ResolvingCall=void 0;var Zr=H(),ba=_a(),y0=He(),TA=ce(),bA=Ea(),IA="resolving_call",nh=class{constructor(e,n,r,i,s,o){this.channel=e,this.method=n,this.filterStackFactory=i,this.credentials=s,this.callNumber=o,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.readFilterPending=!1,this.writeFilterPending=!1,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout(()=>{},0),this.filterStack=null,this.deadline=r.deadline,this.host=r.host,r.parentCall&&(r.flags&Zr.Propagate.CANCELLATION&&r.parentCall.on("cancelled",()=>{this.cancelWithStatus(Zr.Status.CANCELLED,"Cancelled by parent call")}),r.flags&Zr.Propagate.DEADLINE&&(this.trace("Propagating deadline from parent: "+r.parentCall.getDeadline()),this.deadline=(0,ba.minDeadline)(this.deadline,r.parentCall.getDeadline()))),this.trace("Created"),this.runDeadlineTimer()}trace(e){TA.trace(Zr.LogVerbosity.DEBUG,IA,"["+this.callNumber+"] "+e)}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.trace("Deadline: "+(0,ba.deadlineToString)(this.deadline));let e=(0,ba.getRelativeTimeout)(this.deadline);if(e!==1/0){this.trace("Deadline will be reached in "+e+"ms");let n=()=>{this.cancelWithStatus(Zr.Status.DEADLINE_EXCEEDED,"Deadline exceeded")};e<=0?process.nextTick(n):this.deadlineTimer=setTimeout(n,e)}}outputStatus(e){if(!this.ended){this.ended=!0,this.filterStack||(this.filterStack=this.filterStackFactory.createFilter()),clearTimeout(this.deadlineTimer);let n=this.filterStack.receiveTrailers(e);this.trace("ended with status: code="+n.code+' details="'+n.details+'"'),this.statusWatchers.forEach(r=>r(n)),process.nextTick(()=>{var r;(r=this.listener)===null||r===void 0||r.onReceiveStatus(n)})}}sendMessageOnChild(e,n){if(!this.child)throw new Error("sendMessageonChild called with child not populated");let r=this.child;this.writeFilterPending=!0,this.filterStack.sendMessage(Promise.resolve({message:n,flags:e.flags})).then(i=>{this.writeFilterPending=!1,r.sendMessageWithContext(e,i.message),this.pendingHalfClose&&r.halfClose()},i=>{this.cancelWithStatus(i.code,i.details)})}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw new Error("getConfig called before start");let e=this.channel.getConfig(this.method,this.metadata);if(e.type==="NONE"){this.channel.queueCallForConfig(this);return}else if(e.type==="ERROR"){this.metadata.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e.error);return}let n=e.config;if(n.status!==Zr.Status.OK){let{code:r,details:i}=(0,bA.restrictControlPlaneStatusCode)(n.status,"Failed to route call to method "+this.method);this.outputStatus({code:r,details:i,metadata:new y0.Metadata});return}if(n.methodConfig.timeout){let r=new Date;r.setSeconds(r.getSeconds()+n.methodConfig.timeout.seconds),r.setMilliseconds(r.getMilliseconds()+n.methodConfig.timeout.nanos/1e6),this.deadline=(0,ba.minDeadline)(this.deadline,r),this.runDeadlineTimer()}this.filterStackFactory.push(n.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then(r=>{this.child=this.channel.createInnerCall(n,this.method,this.host,this.credentials,this.deadline),this.trace("Created child ["+this.child.getCallNumber()+"]"),this.child.start(r,{onReceiveMetadata:i=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(i))},onReceiveMessage:i=>{this.trace("Received message"),this.readFilterPending=!0,this.filterStack.receiveMessage(i).then(s=>{this.trace("Finished filtering received message"),this.readFilterPending=!1,this.listener.onReceiveMessage(s),this.pendingChildStatus&&this.outputStatus(this.pendingChildStatus)},s=>{this.cancelWithStatus(s.code,s.details)})},onReceiveStatus:i=>{this.trace("Received status"),this.readFilterPending?this.pendingChildStatus=i:this.outputStatus(i)}}),this.readPending&&this.child.startRead(),this.pendingMessage?this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message):this.pendingHalfClose&&this.child.halfClose()},r=>{this.outputStatus(r)})}reportResolverError(e){var n;!((n=this.metadata)===null||n===void 0)&&n.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e)}cancelWithStatus(e,n){var r;this.trace("cancelWithStatus code: "+e+' details: "'+n+'"'),(r=this.child)===null||r===void 0||r.cancelWithStatus(e,n),this.outputStatus({code:e,details:n,metadata:new y0.Metadata})}getPeer(){var e,n;return(n=(e=this.child)===null||e===void 0?void 0:e.getPeer())!==null&&n!==void 0?n:this.channel.getTarget()}start(e,n){this.trace("start called"),this.metadata=e.clone(),this.listener=n,this.getConfig()}sendMessageWithContext(e,n){this.trace("write() called with message of length "+n.length),this.child?this.sendMessageOnChild(e,n):this.pendingMessage={context:e,message:n}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child&&!this.writeFilterPending?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){this.credentials=this.credentials.compose(e)}addStatusWatcher(e){this.statusWatchers.push(e)}getCallNumber(){return this.callNumber}};Ia.ResolvingCall=nh});var _0=g(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.RetryingCall=Ln.MessageBufferTracker=Ln.RetryThrottler=void 0;var Aa=H(),AA=He(),DA=ce(),RA="retrying_call",ih=class{constructor(e,n,r){this.maxTokens=e,this.tokenRatio=n,r?this.tokens=r.tokens*(e/r.maxTokens):this.tokens=e}addCallSucceeded(){this.tokens=Math.max(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.min(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}};Ln.RetryThrottler=ih;var sh=class{constructor(e,n){this.totalLimit=e,this.limitPerCall=n,this.totalAllocated=0,this.allocatedPerCall=new Map}allocate(e,n){var r;let i=(r=this.allocatedPerCall.get(n))!==null&&r!==void 0?r:0;return this.limitPerCall-i<e||this.totalLimit-this.totalAllocated<e?!1:(this.allocatedPerCall.set(n,i+e),this.totalAllocated+=e,!0)}free(e,n){var r;if(this.totalAllocated<e)throw new Error(`Invalid buffer allocation state: call ${n} freed ${e} > total allocated ${this.totalAllocated}`);this.totalAllocated-=e;let i=(r=this.allocatedPerCall.get(n))!==null&&r!==void 0?r:0;if(i<e)throw new Error(`Invalid buffer allocation state: call ${n} freed ${e} > allocated for call ${i}`);this.allocatedPerCall.set(n,i-e)}freeAll(e){var n;let r=(n=this.allocatedPerCall.get(e))!==null&&n!==void 0?n:0;if(this.totalAllocated<r)throw new Error(`Invalid buffer allocation state: call ${e} allocated ${r} > total allocated ${this.totalAllocated}`);this.totalAllocated-=r,this.allocatedPerCall.delete(e)}};Ln.MessageBufferTracker=sh;var rh="grpc-previous-rpc-attempts",oh=class{constructor(e,n,r,i,s,o,a,l,c){if(this.channel=e,this.callConfig=n,this.methodName=r,this.host=i,this.credentials=s,this.deadline=o,this.callNumber=a,this.bufferTracker=l,this.retryThrottler=c,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.writeBufferOffset=0,this.readStarted=!1,this.transparentRetryUsed=!1,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0,n.methodConfig.retryPolicy){this.state="RETRY";let d=n.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(d.initialBackoff.substring(0,d.initialBackoff.length-1))}else n.methodConfig.hedgingPolicy?this.state="HEDGING":this.state="TRANSPARENT_ONLY"}getCallNumber(){return this.callNumber}trace(e){DA.trace(Aa.LogVerbosity.DEBUG,RA,"["+this.callNumber+"] "+e)}reportStatus(e){this.trace("ended with status: code="+e.code+' details="'+e.details+'"'),this.bufferTracker.freeAll(this.callNumber),this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length,this.writeBuffer=[],process.nextTick(()=>{var n;(n=this.listener)===null||n===void 0||n.onReceiveStatus({code:e.code,details:e.details,metadata:e.metadata})})}cancelWithStatus(e,n){this.trace("cancelWithStatus code: "+e+' details: "'+n+'"'),this.reportStatus({code:e,details:n,metadata:new AA.Metadata});for(let{call:r}of this.underlyingCalls)r.cancelWithStatus(e,n)}getPeer(){return this.committedCallIndex!==null?this.underlyingCalls[this.committedCallIndex].call.getPeer():"unknown"}getBufferEntry(e){var n;return(n=this.writeBuffer[e-this.writeBufferOffset])!==null&&n!==void 0?n:{entryType:"FREED",allocated:!1}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if(this.state!=="COMMITTED")return;let e=this.underlyingCalls[this.committedCallIndex].nextMessageToSend;for(let n=this.writeBufferOffset;n<e;n++){let r=this.getBufferEntry(n);r.allocated&&this.bufferTracker.free(r.message.message.length,this.callNumber)}this.writeBuffer=this.writeBuffer.slice(e-this.writeBufferOffset),this.writeBufferOffset=e}commitCall(e){if(this.state!=="COMMITTED"&&this.underlyingCalls[e].state!=="COMPLETED"){this.trace("Committing call ["+this.underlyingCalls[e].call.getCallNumber()+"] at index "+e),this.state="COMMITTED",this.committedCallIndex=e;for(let n=0;n<this.underlyingCalls.length;n++)n!==e&&this.underlyingCalls[n].state!=="COMPLETED"&&(this.underlyingCalls[n].state="COMPLETED",this.underlyingCalls[n].call.cancelWithStatus(Aa.Status.CANCELLED,"Discarded in favor of other hedged attempt"));this.clearSentMessages()}}commitCallWithMostMessages(){if(this.state==="COMMITTED")return;let e=-1,n=-1;for(let[r,i]of this.underlyingCalls.entries())i.state==="ACTIVE"&&i.nextMessageToSend>e&&(e=i.nextMessageToSend,n=r);n===-1?this.state="TRANSPARENT_ONLY":this.commitCall(n)}isStatusCodeInList(e,n){return e.some(r=>r===n||r.toString().toLowerCase()===Aa.Status[n].toLowerCase())}getNextRetryBackoffMs(){var e;let n=(e=this.callConfig)===null||e===void 0?void 0:e.methodConfig.retryPolicy;if(!n)return 0;let r=Math.random()*this.nextRetryBackoffSec*1e3,i=Number(n.maxBackoff.substring(0,n.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*n.backoffMultiplier,i),r}maybeRetryCall(e,n){if(this.state!=="RETRY"){n(!1);return}let r=this.callConfig.methodConfig.retryPolicy;if(this.attempts>=Math.min(r.maxAttempts,5)){n(!1);return}let i;if(e===null)i=this.getNextRetryBackoffMs();else if(e<0){this.state="TRANSPARENT_ONLY",n(!1);return}else i=e,this.nextRetryBackoffSec=this.initialRetryBackoffSec;setTimeout(()=>{var s,o;if(this.state!=="RETRY"){n(!1);return}(!((o=(s=this.retryThrottler)===null||s===void 0?void 0:s.canRetryCall())!==null&&o!==void 0)||o)&&(n(!0),this.attempts+=1,this.startNewAttempt())},i)}countActiveCalls(){let e=0;for(let n of this.underlyingCalls)n?.state==="ACTIVE"&&(e+=1);return e}handleProcessedStatus(e,n,r){var i,s,o;switch(this.state){case"COMMITTED":case"TRANSPARENT_ONLY":this.commitCall(n),this.reportStatus(e);break;case"HEDGING":if(this.isStatusCodeInList((i=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)!==null&&i!==void 0?i:[],e.code)){(s=this.retryThrottler)===null||s===void 0||s.addCallFailed();let a;if(r===null)a=0;else if(r<0){this.state="TRANSPARENT_ONLY",this.commitCall(n),this.reportStatus(e);return}else a=r;setTimeout(()=>{this.maybeStartHedgingAttempt(),this.countActiveCalls()===0&&(this.commitCall(n),this.reportStatus(e))},a)}else this.commitCall(n),this.reportStatus(e);break;case"RETRY":this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,e.code)?((o=this.retryThrottler)===null||o===void 0||o.addCallFailed(),this.maybeRetryCall(r,a=>{a||(this.commitCall(n),this.reportStatus(e))})):(this.commitCall(n),this.reportStatus(e));break}}getPushback(e){let n=e.get("grpc-retry-pushback-ms");if(n.length===0)return null;try{return parseInt(n[0])}catch{return-1}}handleChildStatus(e,n){var r;if(this.underlyingCalls[n].state==="COMPLETED")return;if(this.trace("state="+this.state+" handling status with progress "+e.progress+" from child ["+this.underlyingCalls[n].call.getCallNumber()+"] in state "+this.underlyingCalls[n].state),this.underlyingCalls[n].state="COMPLETED",e.code===Aa.Status.OK){(r=this.retryThrottler)===null||r===void 0||r.addCallSucceeded(),this.commitCall(n),this.reportStatus(e);return}if(this.state==="COMMITTED"){this.reportStatus(e);return}let i=this.getPushback(e.metadata);switch(e.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":this.transparentRetryUsed?this.handleProcessedStatus(e,n,i):(this.transparentRetryUsed=!0,this.startNewAttempt());break;case"DROP":this.commitCall(n),this.reportStatus(e);break;case"PROCESSED":this.handleProcessedStatus(e,n,i);break}}maybeStartHedgingAttempt(){if(this.state!=="HEDGING"||!this.callConfig.methodConfig.hedgingPolicy)return;let e=this.callConfig.methodConfig.hedgingPolicy;this.attempts>=Math.min(e.maxAttempts,5)||(this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer())}maybeStartHedgingTimer(){var e,n,r;if(this.hedgingTimer&&clearTimeout(this.hedgingTimer),this.state!=="HEDGING"||!this.callConfig.methodConfig.hedgingPolicy)return;let i=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=Math.min(i.maxAttempts,5))return;let s=(e=i.hedgingDelay)!==null&&e!==void 0?e:"0s",o=Number(s.substring(0,s.length-1));this.hedgingTimer=setTimeout(()=>{this.maybeStartHedgingAttempt()},o*1e3),(r=(n=this.hedgingTimer).unref)===null||r===void 0||r.call(n)}startNewAttempt(){let e=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+e.getCallNumber()+"] for attempt "+this.attempts);let n=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:e,nextMessageToSend:0});let r=this.attempts-1,i=this.initialMetadata.clone();r>0&&i.set(rh,`${r}`);let s=!1;e.start(i,{onReceiveMetadata:o=>{this.trace("Received metadata from child ["+e.getCallNumber()+"]"),this.commitCall(n),s=!0,r>0&&o.set(rh,`${r}`),this.underlyingCalls[n].state==="ACTIVE"&&this.listener.onReceiveMetadata(o)},onReceiveMessage:o=>{this.trace("Received message from child ["+e.getCallNumber()+"]"),this.commitCall(n),this.underlyingCalls[n].state==="ACTIVE"&&this.listener.onReceiveMessage(o)},onReceiveStatus:o=>{this.trace("Received status from child ["+e.getCallNumber()+"]"),!s&&r>0&&o.metadata.set(rh,`${r}`),this.handleChildStatus(o,n)}}),this.sendNextChildMessage(n),this.readStarted&&e.startRead()}start(e,n){this.trace("start called"),this.listener=n,this.initialMetadata=e,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}handleChildWriteCompleted(e){var n,r;let i=this.underlyingCalls[e],s=i.nextMessageToSend;(r=(n=this.getBufferEntry(s)).callback)===null||r===void 0||r.call(n),this.clearSentMessages(),i.nextMessageToSend+=1,this.sendNextChildMessage(e)}sendNextChildMessage(e){let n=this.underlyingCalls[e];if(n.state!=="COMPLETED"&&this.getBufferEntry(n.nextMessageToSend)){let r=this.getBufferEntry(n.nextMessageToSend);switch(r.entryType){case"MESSAGE":n.call.sendMessageWithContext({callback:i=>{this.handleChildWriteCompleted(e)}},r.message.message);break;case"HALF_CLOSE":n.nextMessageToSend+=1,n.call.halfClose();break;case"FREED":break}}}sendMessageWithContext(e,n){var r;this.trace("write() called with message of length "+n.length);let i={message:n,flags:e.flags},s=this.getNextBufferIndex(),o={entryType:"MESSAGE",message:i,allocated:this.bufferTracker.allocate(n.length,this.callNumber)};if(this.writeBuffer.push(o),o.allocated){(r=e.callback)===null||r===void 0||r.call(e);for(let[a,l]of this.underlyingCalls.entries())l.state==="ACTIVE"&&l.nextMessageToSend===s&&l.call.sendMessageWithContext({callback:c=>{this.handleChildWriteCompleted(a)}},n)}else{if(this.commitCallWithMostMessages(),this.committedCallIndex===null)return;let a=this.underlyingCalls[this.committedCallIndex];o.callback=e.callback,a.state==="ACTIVE"&&a.nextMessageToSend===s&&a.call.sendMessageWithContext({callback:l=>{this.handleChildWriteCompleted(this.committedCallIndex)}},n)}}startRead(){this.trace("startRead called"),this.readStarted=!0;for(let e of this.underlyingCalls)e?.state==="ACTIVE"&&e.call.startRead()}halfClose(){this.trace("halfClose called");let e=this.getNextBufferIndex();this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:!1});for(let n of this.underlyingCalls)n?.state==="ACTIVE"&&n.nextMessageToSend===e&&(n.nextMessageToSend+=1,n.call.halfClose())}setCredentials(e){throw new Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}};Ln.RetryingCall=oh});var Ra=g(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.BaseSubchannelWrapper=void 0;var ah=class{constructor(e){this.child=e}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e)}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive(e){this.child.throttleKeepalive(e)}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}getRealSubchannel(){return this.child.getRealSubchannel()}realSubchannelEquals(e){return this.getRealSubchannel()===e.getRealSubchannel()}};Da.BaseSubchannelWrapper=ah});var w0=g(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0});Na.InternalChannel=void 0;var OA=ho(),xA=Hg(),NA=l0(),S0=Sn(),os=H(),MA=$d(),kA=h0(),E0=Nt(),lh=ce(),PA=p0(),FA=Pd(),Oa=Ze(),$t=st(),as=er(),LA=m0(),BA=_a(),VA=v0(),ch=Vd(),UA=Ea(),uh=_0(),qA=Ra(),zA=2147483647,jA=1e3,GA=30*60*1e3,xa=new Map,HA=1<<24,$A=1<<20,dh=class extends qA.BaseSubchannelWrapper{constructor(e,n){super(e),this.channel=n,this.refCount=0,this.subchannelStateListener=(r,i,s,o)=>{n.throttleKeepalive(o)},e.addConnectivityStateListener(this.subchannelStateListener)}ref(){this.child.ref(),this.refCount+=1}unref(){this.child.unref(),this.refCount-=1,this.refCount<=0&&(this.child.removeConnectivityStateListener(this.subchannelStateListener),this.channel.removeWrappedSubchannel(this))}},hh=class{constructor(e,n,r){var i,s,o,a,l,c,d,h;if(this.credentials=n,this.options=r,this.connectivityState=$t.ConnectivityState.IDLE,this.currentPicker=new S0.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.callCount=0,this.idleTimer=null,this.channelzEnabled=!0,this.callTracker=new as.ChannelzCallTracker,this.childrenTracker=new as.ChannelzChildrenTracker,typeof e!="string")throw new TypeError("Channel target must be a string");if(!(n instanceof OA.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(r&&typeof r!="object")throw new TypeError("Channel options must be an object");this.originalTarget=e;let f=(0,Oa.parseUri)(e);if(f===null)throw new Error(`Could not parse target name "${e}"`);let p=(0,E0.mapUriDefaultScheme)(f);if(p===null)throw new Error(`Could not find a default scheme for target name "${e}"`);this.callRefTimer=setInterval(()=>{},zA),(s=(i=this.callRefTimer).unref)===null||s===void 0||s.call(i),this.options["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzTrace=new as.ChannelzTrace,this.channelzRef=(0,as.registerChannelzChannel)(e,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=(0,E0.getDefaultAuthority)(p);let m=(0,FA.mapProxyName)(p,r);this.target=m.target,this.options=Object.assign({},this.options,m.extraOptions),this.subchannelPool=(0,NA.getSubchannelPool)(((o=r["grpc.use_local_subchannel_pool"])!==null&&o!==void 0?o:0)===0),this.retryBufferTracker=new uh.MessageBufferTracker((a=r["grpc.retry_buffer_size"])!==null&&a!==void 0?a:HA,(l=r["grpc.per_rpc_retry_buffer_size"])!==null&&l!==void 0?l:$A),this.keepaliveTime=(c=r["grpc.keepalive_time_ms"])!==null&&c!==void 0?c:-1,this.idleTimeoutMs=Math.max((d=r["grpc.client_idle_timeout_ms"])!==null&&d!==void 0?d:GA,jA);let _={createSubchannel:(T,S)=>{let O=this.subchannelPool.getOrCreateSubchannel(this.target,T,Object.assign({},this.options,S),this.credentials);O.throttleKeepalive(this.keepaliveTime),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Created subchannel or used existing subchannel",O.getChannelzRef());let A=new dh(O,this);return this.wrappedSubchannels.add(A),A},updateState:(T,S)=>{this.currentPicker=S;let O=this.pickQueue.slice();this.pickQueue=[],O.length>0&&this.callRefTimerUnref();for(let A of O)A.doPick();this.updateState(T)},requestReresolution:()=>{throw new Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:T=>{this.channelzEnabled&&this.childrenTracker.refChild(T)},removeChannelzChild:T=>{this.channelzEnabled&&this.childrenTracker.unrefChild(T)}};this.resolvingLoadBalancer=new xA.ResolvingLoadBalancer(this.target,_,r,(T,S)=>{T.retryThrottling?xa.set(this.getTarget(),new uh.RetryThrottler(T.retryThrottling.maxTokens,T.retryThrottling.tokenRatio,xa.get(this.getTarget()))):xa.delete(this.getTarget()),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Address resolution succeeded"),this.configSelector=S,this.currentResolutionError=null,process.nextTick(()=>{let O=this.configSelectionQueue;this.configSelectionQueue=[],O.length>0&&this.callRefTimerUnref();for(let A of O)A.getConfig()})},T=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_WARNING","Address resolution failed with code "+T.code+' and details "'+T.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),this.configSelector===null&&(this.currentResolutionError=Object.assign(Object.assign({},(0,UA.restrictControlPlaneStatusCode)(T.code,T.details)),{metadata:T.metadata}));let S=this.configSelectionQueue;this.configSelectionQueue=[],S.length>0&&this.callRefTimerUnref();for(let O of S)O.reportResolverError(T)}),this.filterStackFactory=new MA.FilterStackFactory([new PA.MaxMessageSizeFilterFactory(this.options),new kA.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(r,void 0,2));let C=new Error;(0,lh.trace)(os.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+`) Channel constructed 
`+((h=C.stack)===null||h===void 0?void 0:h.substring(C.stack.indexOf(`
`)+1))),this.lastActivityTimestamp=new Date}getChannelzInfo(){return{target:this.originalTarget,state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}}trace(e,n){(0,lh.trace)(n??os.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,Oa.uriToString)(this.target)+" "+e)}callRefTimerRef(){var e,n,r,i;!((n=(e=this.callRefTimer).hasRef)===null||n===void 0)&&n.call(e)||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),(i=(r=this.callRefTimer).ref)===null||i===void 0||i.call(r))}callRefTimerUnref(){var e,n;(!this.callRefTimer.hasRef||this.callRefTimer.hasRef())&&(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),(n=(e=this.callRefTimer).unref)===null||n===void 0||n.call(e))}removeConnectivityStateWatcher(e){let n=this.connectivityStateWatchers.findIndex(r=>r===e);n>=0&&this.connectivityStateWatchers.splice(n,1)}updateState(e){(0,lh.trace)(os.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,Oa.uriToString)(this.target)+" "+$t.ConnectivityState[this.connectivityState]+" -> "+$t.ConnectivityState[e]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+$t.ConnectivityState[e]),this.connectivityState=e;let n=this.connectivityStateWatchers.slice();for(let r of n)e!==r.currentState&&(r.timer&&clearTimeout(r.timer),this.removeConnectivityStateWatcher(r),r.callback());e!==$t.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}throttleKeepalive(e){if(e>this.keepaliveTime){this.keepaliveTime=e;for(let n of this.wrappedSubchannels)n.throttleKeepalive(e)}}removeWrappedSubchannel(e){this.wrappedSubchannels.delete(e)}doPick(e,n){return this.currentPicker.pick({metadata:e,extraPickInfo:n})}queueCallForPick(e){this.pickQueue.push(e),this.callRefTimerRef()}getConfig(e,n){return this.resolvingLoadBalancer.exitIdle(),this.configSelector?{type:"SUCCESS",config:this.configSelector(e,n)}:this.currentResolutionError?{type:"ERROR",error:this.currentResolutionError}:{type:"NONE"}}queueCallForConfig(e){this.configSelectionQueue.push(e),this.callRefTimerRef()}enterIdle(){this.resolvingLoadBalancer.destroy(),this.updateState($t.ConnectivityState.IDLE),this.currentPicker=new S0.QueuePicker(this.resolvingLoadBalancer),this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null)}startIdleTimeout(e){var n,r;this.idleTimer=setTimeout(()=>{if(this.callCount>0){this.startIdleTimeout(this.idleTimeoutMs);return}let s=new Date().valueOf()-this.lastActivityTimestamp.valueOf();s>=this.idleTimeoutMs?(this.trace("Idle timer triggered after "+this.idleTimeoutMs+"ms of inactivity"),this.enterIdle()):this.startIdleTimeout(this.idleTimeoutMs-s)},e),(r=(n=this.idleTimer).unref)===null||r===void 0||r.call(n)}maybeStartIdleTimer(){this.connectivityState!==$t.ConnectivityState.SHUTDOWN&&!this.idleTimer&&this.startIdleTimeout(this.idleTimeoutMs)}onCallStart(){this.channelzEnabled&&this.callTracker.addCallStarted(),this.callCount+=1}onCallEnd(e){this.channelzEnabled&&(e.code===os.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()),this.callCount-=1,this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()}createLoadBalancingCall(e,n,r,i,s){let o=(0,ch.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+o+'] method="'+n+'"'),new LA.LoadBalancingCall(this,e,n,r,i,s,o)}createRetryingCall(e,n,r,i,s){let o=(0,ch.getNextCallNumber)();return this.trace("createRetryingCall ["+o+'] method="'+n+'"'),new uh.RetryingCall(this,e,n,r,i,s,o,this.retryBufferTracker,xa.get(this.getTarget()))}createInnerCall(e,n,r,i,s){return this.options["grpc.enable_retries"]===0?this.createLoadBalancingCall(e,n,r,i,s):this.createRetryingCall(e,n,r,i,s)}createResolvingCall(e,n,r,i,s){let o=(0,ch.getNextCallNumber)();this.trace("createResolvingCall ["+o+'] method="'+e+'", deadline='+(0,BA.deadlineToString)(n));let a={deadline:n,flags:s??os.Propagate.DEFAULTS,host:r??this.defaultAuthority,parentCall:i},l=new VA.ResolvingCall(this,e,a,this.filterStackFactory.clone(),this.credentials._getCallCredentials(),o);return this.onCallStart(),l.addStatusWatcher(c=>{this.onCallEnd(c)}),l}close(){this.resolvingLoadBalancer.destroy(),this.updateState($t.ConnectivityState.SHUTDOWN),clearInterval(this.callRefTimer),this.idleTimer&&clearTimeout(this.idleTimer),this.channelzEnabled&&(0,as.unregisterChannelzRef)(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels()}getTarget(){return(0,Oa.uriToString)(this.target)}getConnectivityState(e){let n=this.connectivityState;return e&&(this.resolvingLoadBalancer.exitIdle(),this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()),n}watchConnectivityState(e,n,r){if(this.connectivityState===$t.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");let i=null;if(n!==1/0){let o=n instanceof Date?n:new Date(n),a=new Date;if(n===-1/0||o<=a){process.nextTick(r,new Error("Deadline passed without connectivity state change"));return}i=setTimeout(()=>{this.removeConnectivityStateWatcher(s),r(new Error("Deadline passed without connectivity state change"))},o.getTime()-a.getTime())}let s={currentState:e,callback:r,timer:i};this.connectivityStateWatchers.push(s)}getChannelzRef(){return this.channelzRef}createCall(e,n,r,i,s){if(typeof e!="string")throw new TypeError("Channel#createCall: method must be a string");if(!(typeof n=="number"||n instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===$t.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");return this.createResolvingCall(e,n,r,i,s)}};Na.InternalChannel=hh});var mu=g(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});Ma.ChannelImplementation=void 0;var WA=ho(),KA=w0(),fh=class{constructor(e,n,r){if(typeof e!="string")throw new TypeError("Channel target must be a string");if(!(n instanceof WA.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(r&&typeof r!="object")throw new TypeError("Channel options must be an object");this.internalChannel=new KA.InternalChannel(e,n,r)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(e){return this.internalChannel.getConnectivityState(e)}watchConnectivityState(e,n,r){this.internalChannel.watchConnectivityState(e,n,r)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(e,n,r,i,s){if(typeof e!="string")throw new TypeError("Channel#createCall: method must be a string");if(!(typeof n=="number"||n instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall(e,n,r,i,s)}};Ma.ChannelImplementation=fh});var N0=g(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.Http2ServerCallStream=pt.ServerDuplexStreamImpl=pt.ServerWritableStreamImpl=pt.ServerReadableStreamImpl=pt.ServerUnaryCallImpl=void 0;var A0=W("events"),ei=W("http2"),mh=W("stream"),D0=W("zlib"),R0=W("util"),se=H(),yh=He(),QA=Ld(),O0=ce(),cs=so(),x0="server_call",YA=(0,R0.promisify)(D0.unzip),JA=(0,R0.promisify)(D0.inflate);function ls(t){O0.trace(se.LogVerbosity.DEBUG,x0,t)}var XA="grpc-accept-encoding",ZA="grpc-encoding",C0="grpc-message",T0="grpc-status",b0="grpc-timeout",eD=/(\d{1,8})\s*([HMSmun])/,tD={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},nD={[XA]:"identity,deflate,gzip",[ZA]:"identity"},I0={[ei.constants.HTTP2_HEADER_STATUS]:ei.constants.HTTP_STATUS_OK,[ei.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},rD={waitForTrailers:!0},ph=class extends A0.EventEmitter{constructor(e,n,r){super(),this.call=e,this.metadata=n,this.request=r,this.cancelled=!1,this.call.setupSurfaceCall(this)}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}};pt.ServerUnaryCallImpl=ph;var ka=class extends mh.Readable{constructor(e,n,r,i){super({objectMode:!0}),this.call=e,this.metadata=n,this.deserialize=r,this.cancelled=!1,this.call.setupSurfaceCall(this),this.call.setupReadable(this,i)}_read(e){this.call.consumeUnpushedMessages(this)&&this.call.resume()}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}};pt.ServerReadableStreamImpl=ka;var us=class extends mh.Writable{constructor(e,n,r,i){super({objectMode:!0}),this.call=e,this.metadata=n,this.serialize=r,this.request=i,this.cancelled=!1,this.trailingMetadata=new yh.Metadata,this.call.setupSurfaceCall(this),this.on("error",s=>{this.call.sendError(s),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}_write(e,n,r){try{let i=this.call.serializeMessage(e);if(!this.call.write(i)){this.call.once("drain",r);return}}catch(i){this.emit("error",{details:(0,cs.getErrorMessage)(i),code:se.Status.INTERNAL})}r()}_final(e){this.call.sendStatus({code:se.Status.OK,details:"OK",metadata:this.trailingMetadata}),e(null)}end(e){return e&&(this.trailingMetadata=e),super.end()}};pt.ServerWritableStreamImpl=us;var ti=class extends mh.Duplex{constructor(e,n,r,i,s){super({objectMode:!0}),this.call=e,this.metadata=n,this.serialize=r,this.deserialize=i,this.cancelled=!1,this.trailingMetadata=new yh.Metadata,this.call.setupSurfaceCall(this),this.call.setupReadable(this,s),this.on("error",o=>{this.call.sendError(o),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}end(e){return e&&(this.trailingMetadata=e),super.end()}};pt.ServerDuplexStreamImpl=ti;ti.prototype._read=ka.prototype._read;ti.prototype._write=us.prototype._write;ti.prototype._final=us.prototype._final;var gh=class extends A0.EventEmitter{constructor(e,n,r){super(),this.stream=e,this.handler=n,this.cancelled=!1,this.deadlineTimer=null,this.statusSent=!1,this.deadline=1/0,this.wantTrailers=!1,this.metadataSent=!1,this.canPush=!1,this.isPushPending=!1,this.bufferedMessages=[],this.messagesToPush=[],this.maxSendMessageSize=se.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=se.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.stream.once("error",i=>{}),this.stream.once("close",()=>{var i;ls("Request to method "+((i=this.handler)===null||i===void 0?void 0:i.path)+" stream closed with rstCode "+this.stream.rstCode),this.statusSent||(this.cancelled=!0,this.emit("cancelled","cancelled"),this.emit("streamEnd",!1),this.sendStatus({code:se.Status.CANCELLED,details:"Cancelled by client",metadata:null}),this.deadlineTimer&&clearTimeout(this.deadlineTimer))}),this.stream.on("drain",()=>{this.emit("drain")}),"grpc.max_send_message_length"in r&&(this.maxSendMessageSize=r["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in r&&(this.maxReceiveMessageSize=r["grpc.max_receive_message_length"])}checkCancelled(){return(this.stream.destroyed||this.stream.closed)&&(this.cancelled=!0),this.cancelled}getDecompressedMessage(e,n){return n==="deflate"?JA(e.subarray(5)):n==="gzip"?YA(e.subarray(5)):n==="identity"?e.subarray(5):Promise.reject({code:se.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${n}"`})}sendMetadata(e){if(this.checkCancelled()||this.metadataSent)return;this.metadataSent=!0;let n=e?e.toHttp2Headers():null,r=Object.assign(Object.assign(Object.assign({},I0),nD),n);this.stream.respond(r,rD)}receiveMetadata(e){let n=yh.Metadata.fromHttp2Headers(e);O0.isTracerEnabled(x0)&&ls("Request to "+this.handler.path+" received headers "+JSON.stringify(n.toJSON()));let r=n.get(b0);if(r.length>0){let i=r[0].toString().match(eD);if(i===null){let a=new Error("Invalid deadline");return a.code=se.Status.OUT_OF_RANGE,this.sendError(a),n}let s=+i[1]*tD[i[2]]|0,o=new Date;this.deadline=o.setMilliseconds(o.getMilliseconds()+s),this.deadlineTimer=setTimeout(iD,s,this),n.remove(b0)}return n.remove(ei.constants.HTTP2_HEADER_ACCEPT_ENCODING),n.remove(ei.constants.HTTP2_HEADER_TE),n.remove(ei.constants.HTTP2_HEADER_CONTENT_TYPE),n.remove("grpc-accept-encoding"),n}receiveUnaryMessage(e){return new Promise((n,r)=>{let{stream:i}=this,s=0,o=this,a=[],l=this.maxReceiveMessageSize;this.stream.on("data",c),this.stream.on("end",d),this.stream.on("error",d);function c(h){if(s+=h.byteLength,l!==-1&&s>l){i.removeListener("data",c),i.removeListener("end",d),i.removeListener("error",d),r({code:se.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${s} vs. ${l})`});return}a.push(h)}function d(h){if(i.removeListener("data",c),i.removeListener("end",d),i.removeListener("error",d),h!==void 0){r({code:se.Status.INTERNAL,details:h.message});return}if(s===0){r({code:se.Status.INTERNAL,details:"received empty unary message"});return}o.emit("receiveMessage");let f=Buffer.concat(a,s),m=f.readUInt8(0)===1?e:"identity",_=o.getDecompressedMessage(f,m);if(Buffer.isBuffer(_)){n(o.deserializeMessageWithInternalError(_));return}_.then(C=>n(o.deserializeMessageWithInternalError(C)),C=>r(C.code?C:{code:se.Status.INTERNAL,details:`Received "grpc-encoding" header "${e}" but ${e} decompression failed`}))}})}deserializeMessageWithInternalError(e){return k(this,null,function*(){try{return this.deserializeMessage(e)}catch(n){throw{details:(0,cs.getErrorMessage)(n),code:se.Status.INTERNAL}}})}serializeMessage(e){let n=this.handler.serialize(e),r=n.byteLength,i=Buffer.allocUnsafe(r+5);return i.writeUInt8(0,0),i.writeUInt32BE(r,1),n.copy(i,5),i}deserializeMessage(e){return this.handler.deserialize(e)}sendUnaryMessage(e,n,r,i){return k(this,null,function*(){if(!this.checkCancelled()){if(r===void 0&&(r=null),e){!Object.prototype.hasOwnProperty.call(e,"metadata")&&r&&(e.metadata=r),this.sendError(e);return}try{let s=this.serializeMessage(n);this.write(s),this.sendStatus({code:se.Status.OK,details:"OK",metadata:r})}catch(s){this.sendError({details:(0,cs.getErrorMessage)(s),code:se.Status.INTERNAL})}}})}sendStatus(e){var n,r;if(this.emit("callEnd",e.code),this.emit("streamEnd",e.code===se.Status.OK),!this.checkCancelled())if(ls("Request to method "+((n=this.handler)===null||n===void 0?void 0:n.path)+" ended with status code: "+se.Status[e.code]+" details: "+e.details),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.stream.headersSent)this.wantTrailers||(this.wantTrailers=!0,this.stream.once("wantTrailers",()=>{var i;let s=Object.assign({[T0]:e.code,[C0]:encodeURI(e.details)},(i=e.metadata)===null||i===void 0?void 0:i.toHttp2Headers());this.stream.sendTrailers(s),this.statusSent=!0}),this.stream.end());else{let i=Object.assign(Object.assign({[T0]:e.code,[C0]:encodeURI(e.details)},I0),(r=e.metadata)===null||r===void 0?void 0:r.toHttp2Headers());this.stream.respond(i,{endStream:!0}),this.statusSent=!0}}sendError(e){let n={code:se.Status.UNKNOWN,details:"message"in e?e.message:"Unknown Error",metadata:"metadata"in e&&e.metadata!==void 0?e.metadata:null};"code"in e&&typeof e.code=="number"&&Number.isInteger(e.code)&&(n.code=e.code,"details"in e&&typeof e.details=="string"&&(n.details=e.details)),this.sendStatus(n)}write(e){if(!this.checkCancelled()){if(this.maxSendMessageSize!==-1&&e.length>this.maxSendMessageSize){this.sendError({code:se.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${e.length} vs. ${this.maxSendMessageSize})`});return}return this.sendMetadata(),this.emit("sendMessage"),this.stream.write(e)}}resume(){this.stream.resume()}setupSurfaceCall(e){this.once("cancelled",n=>{e.cancelled=!0,e.emit("cancelled",n)}),this.once("callEnd",n=>e.emit("callEnd",n))}setupReadable(e,n){let r=new QA.StreamDecoder,i=!1,s=!1,o=!1,a=()=>k(this,null,function*(){!o&&i&&!s&&(o=!0,yield this.pushOrBufferMessage(e,null))});this.stream.on("data",l=>k(this,null,function*(){let c=r.write(l);s=!0,this.stream.pause();for(let d of c){if(this.maxReceiveMessageSize!==-1&&d.length>this.maxReceiveMessageSize){this.sendError({code:se.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${d.length} vs. ${this.maxReceiveMessageSize})`});return}this.emit("receiveMessage");let f=d.readUInt8(0)===1?n:"identity",p=yield this.getDecompressedMessage(d,f);if(!p)return;yield this.pushOrBufferMessage(e,p)}s=!1,this.stream.resume(),yield a()})),this.stream.once("end",()=>k(this,null,function*(){i=!0,yield a()}))}consumeUnpushedMessages(e){for(this.canPush=!0;this.messagesToPush.length>0;){let n=this.messagesToPush.shift(),r=e.push(n);if(n===null||r===!1){this.canPush=!1;break}}return this.canPush}pushOrBufferMessage(e,n){return k(this,null,function*(){this.isPushPending?this.bufferedMessages.push(n):yield this.pushMessage(e,n)})}pushMessage(e,n){return k(this,null,function*(){if(n===null){ls("Received end of stream"),this.canPush?e.push(null):this.messagesToPush.push(null);return}ls("Received message of length "+n.length),this.isPushPending=!0;try{let r=yield this.deserializeMessage(n);this.canPush?e.push(r)||(this.canPush=!1,this.stream.pause()):this.messagesToPush.push(r)}catch(r){this.bufferedMessages.length=0;let i=(0,cs.getErrorCode)(r);(i===null||i<se.Status.OK||i>se.Status.UNAUTHENTICATED)&&(i=se.Status.INTERNAL),e.emit("error",{details:(0,cs.getErrorMessage)(r),code:i})}this.isPushPending=!1,this.bufferedMessages.length>0&&(yield this.pushMessage(e,this.bufferedMessages.shift()))})}getPeer(){var e;let n=(e=this.stream.session)===null||e===void 0?void 0:e.socket;return n?.remoteAddress?n.remotePort?`${n.remoteAddress}:${n.remotePort}`:n.remoteAddress:"unknown"}getDeadline(){return this.deadline}getPath(){return this.handler.path}};pt.Http2ServerCallStream=gh;function iD(t){let e=new Error("Deadline exceeded");e.code=se.Status.DEADLINE_EXCEEDED,t.sendError(e),t.cancelled=!0,t.emit("cancelled","deadline")}});var Sh=g(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.ServerCredentials=void 0;var M0=Uc(),ds=class{static createInsecure(){return new vh}static createSsl(e,n,r=!1){if(e!==null&&!Buffer.isBuffer(e))throw new TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(n))throw new TypeError("keyCertPairs must be an array");if(typeof r!="boolean")throw new TypeError("checkClientCertificate must be a boolean");let i=[],s=[];for(let o=0;o<n.length;o++){let a=n[o];if(a===null||typeof a!="object")throw new TypeError(`keyCertPair[${o}] must be an object`);if(!Buffer.isBuffer(a.private_key))throw new TypeError(`keyCertPair[${o}].private_key must be a Buffer`);if(!Buffer.isBuffer(a.cert_chain))throw new TypeError(`keyCertPair[${o}].cert_chain must be a Buffer`);i.push(a.cert_chain),s.push(a.private_key)}return new _h({ca:e||(0,M0.getDefaultRootsData)()||void 0,cert:i,key:s,requestCert:r,ciphers:M0.CIPHER_SUITES})}};Pa.ServerCredentials=ds;var vh=class extends ds{_isSecure(){return!1}_getSettings(){return null}},_h=class extends ds{constructor(e){super(),this.options=e}_isSecure(){return!0}_getSettings(){return this.options}}});var F0=g(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.Server=void 0;var Bn=W("http2"),an=H(),nr=N0(),sD=Sh(),k0=Nt(),Fa=ce(),It=kt(),oD=Ze(),Ye=er(),La=~(1<<31),aD=~(1<<31),lD=2e4,{HTTP2_HEADER_PATH:P0}=Bn.constants,cD="server";function uD(){}function Eh(t){return{code:an.Status.UNIMPLEMENTED,details:`The server does not implement the method ${t}`}}function dD(t,e){let n=Eh(e);switch(t){case"unary":return(r,i)=>{i(n,null)};case"clientStream":return(r,i)=>{i(n,null)};case"serverStream":return r=>{r.emit("error",n)};case"bidi":return r=>{r.emit("error",n)};default:throw new Error(`Invalid handlerType ${t}`)}}var wh=class{constructor(e){var n,r,i,s;this.http2ServerList=[],this.handlers=new Map,this.sessions=new Map,this.started=!1,this.shutdown=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.channelzTrace=new Ye.ChannelzTrace,this.callTracker=new Ye.ChannelzCallTracker,this.listenerChildrenTracker=new Ye.ChannelzChildrenTracker,this.sessionChildrenTracker=new Ye.ChannelzChildrenTracker,this.options=e??{},this.options["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzRef=(0,Ye.registerChannelzServer)(()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=(n=this.options["grpc.max_connection_age_ms"])!==null&&n!==void 0?n:La,this.maxConnectionAgeGraceMs=(r=this.options["grpc.max_connection_age_grace_ms"])!==null&&r!==void 0?r:La,this.keepaliveTimeMs=(i=this.options["grpc.keepalive_time_ms"])!==null&&i!==void 0?i:aD,this.keepaliveTimeoutMs=(s=this.options["grpc.keepalive_timeout_ms"])!==null&&s!==void 0?s:lD,this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfoGetter(e){return()=>{var n,r,i;let s=this.sessions.get(e),o=e.socket,a=o.remoteAddress?(0,It.stringToSubchannelAddress)(o.remoteAddress,o.remotePort):null,l=o.localAddress?(0,It.stringToSubchannelAddress)(o.localAddress,o.localPort):null,c;if(e.encrypted){let h=o,f=h.getCipher(),p=h.getCertificate(),m=h.getPeerCertificate();c={cipherSuiteStandardName:(n=f.standardName)!==null&&n!==void 0?n:null,cipherSuiteOtherName:f.standardName?null:f.name,localCertificate:p&&"raw"in p?p.raw:null,remoteCertificate:m&&"raw"in m?m.raw:null}}else c=null;return{remoteAddress:a,localAddress:l,security:c,remoteName:null,streamsStarted:s.streamTracker.callsStarted,streamsSucceeded:s.streamTracker.callsSucceeded,streamsFailed:s.streamTracker.callsFailed,messagesSent:s.messagesSent,messagesReceived:s.messagesReceived,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:s.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:s.lastMessageSentTimestamp,lastMessageReceivedTimestamp:s.lastMessageReceivedTimestamp,localFlowControlWindow:(r=e.state.localWindowSize)!==null&&r!==void 0?r:null,remoteFlowControlWindow:(i=e.state.remoteWindowSize)!==null&&i!==void 0?i:null}}}trace(e){Fa.trace(an.LogVerbosity.DEBUG,cD,"("+this.channelzRef.id+") "+e)}addProtoService(){throw new Error("Not implemented. Use addService() instead")}addService(e,n){if(e===null||typeof e!="object"||n===null||typeof n!="object")throw new Error("addService() requires two objects as arguments");let r=Object.keys(e);if(r.length===0)throw new Error("Cannot add an empty service to a server");r.forEach(i=>{let s=e[i],o;s.requestStream?s.responseStream?o="bidi":o="clientStream":s.responseStream?o="serverStream":o="unary";let a=n[i],l;if(a===void 0&&typeof s.originalName=="string"&&(a=n[s.originalName]),a!==void 0?l=a.bind(n):l=dD(o,i),this.register(s.path,l,s.responseSerialize,s.requestDeserialize,o)===!1)throw new Error(`Method handler for ${s.path} already provided.`)})}removeService(e){if(e===null||typeof e!="object")throw new Error("removeService() requires object as argument");Object.keys(e).forEach(r=>{let i=e[r];this.unregister(i.path)})}bind(e,n){throw new Error("Not implemented. Use bindAsync() instead")}bindAsync(e,n,r){if(this.started===!0)throw new Error("server is already started");if(this.shutdown)throw new Error("bindAsync called after shutdown");if(typeof e!="string")throw new TypeError("port must be a string");if(n===null||!(n instanceof sD.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");if(typeof r!="function")throw new TypeError("callback must be a function");let i=(0,oD.parseUri)(e);if(i===null)throw new Error(`Could not parse port "${e}"`);let s=(0,k0.mapUriDefaultScheme)(i);if(s===null)throw new Error(`Could not get a default scheme for port "${e}"`);let o={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER};"grpc-node.max_session_memory"in this.options?o.maxSessionMemory=this.options["grpc-node.max_session_memory"]:o.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(o.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]});let a=(p,m)=>{process.nextTick(()=>r(p,m))},l=()=>{let p;if(n._isSecure()){let m=Object.assign(o,n._getSettings());m.enableTrace=this.options["grpc-node.tls_enable_trace"]===1,p=Bn.createSecureServer(m),p.on("secureConnection",_=>{_.on("error",C=>{this.trace("An incoming TLS connection closed with error: "+C.message)})})}else p=Bn.createServer(o);return p.setTimeout(0,uD),this._setupHandlers(p),p},c=(p,m,_)=>p.length===0?Promise.resolve({port:m,count:_}):Promise.all(p.map(C=>{this.trace("Attempting to bind "+(0,It.subchannelAddressToString)(C));let T;(0,It.isTcpSubchannelAddress)(C)?T={host:C.host,port:m}:T=C;let S=l();return new Promise((O,A)=>{let P=L=>{this.trace("Failed to bind "+(0,It.subchannelAddressToString)(C)+" with error "+L.message),O(L)};S.once("error",P),S.listen(T,()=>{if(this.shutdown){S.close(),O(new Error("bindAsync failed because server is shutdown"));return}let L=S.address(),q;typeof L=="string"?q={path:L}:q={host:L.address,port:L.port};let _e=(0,Ye.registerChannelzSocket)((0,It.subchannelAddressToString)(q),()=>({localAddress:q,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(_e),this.http2ServerList.push({server:S,channelzRef:_e}),this.trace("Successfully bound "+(0,It.subchannelAddressToString)(q)),O("port"in q?q.port:m),S.removeListener("error",P)})})})).then(C=>{let T=0;for(let S of C)if(typeof S=="number"&&(T+=1,S!==m))throw new Error("Invalid state: multiple port numbers added from single address");return{port:m,count:T+_}}),d=p=>{if(p.length===0)return Promise.resolve({port:0,count:0});let m=p[0],_=l();return new Promise((C,T)=>{let S=O=>{this.trace("Failed to bind "+(0,It.subchannelAddressToString)(m)+" with error "+O.message),C(d(p.slice(1)))};_.once("error",S),_.listen(m,()=>{if(this.shutdown){_.close(),C({port:0,count:0});return}let O=_.address(),A={host:O.address,port:O.port},P=(0,Ye.registerChannelzSocket)((0,It.subchannelAddressToString)(A),()=>({localAddress:A,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(P),this.http2ServerList.push({server:_,channelzRef:P}),this.trace("Successfully bound "+(0,It.subchannelAddressToString)(A)),C(c(p.slice(1),O.port,1)),_.removeListener("error",S)})})},h={onSuccessfulResolution:(p,m,_)=>{if(h.onSuccessfulResolution=()=>{},this.shutdown&&a(new Error("bindAsync failed because server is shutdown"),0),p.length===0){a(new Error(`No addresses resolved for port ${e}`),0);return}let C;(0,It.isTcpSubchannelAddress)(p[0])?p[0].port===0?C=d(p):C=c(p,p[0].port,0):C=c(p,1,0),C.then(T=>{if(T.count===0){let S=`No address added out of total ${p.length} resolved`;Fa.log(an.LogVerbosity.ERROR,S),a(new Error(S),0)}else T.count<p.length&&Fa.log(an.LogVerbosity.INFO,`WARNING Only ${T.count} addresses added out of total ${p.length} resolved`),a(null,T.port)},T=>{let S=`No address added out of total ${p.length} resolved`;Fa.log(an.LogVerbosity.ERROR,S),a(new Error(S),0)})},onError:p=>{a(new Error(p.details),0)}};(0,k0.createResolver)(s,h,this.options).updateResolution()}forceShutdown(){for(let{server:e,channelzRef:n}of this.http2ServerList)e.listening&&e.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(n),(0,Ye.unregisterChannelzRef)(n))});this.started=!1,this.shutdown=!0,this.sessions.forEach((e,n)=>{n.destroy(Bn.constants.NGHTTP2_CANCEL)}),this.sessions.clear(),this.channelzEnabled&&(0,Ye.unregisterChannelzRef)(this.channelzRef)}register(e,n,r,i,s){return this.handlers.has(e)?!1:(this.handlers.set(e,{func:n,serialize:r,deserialize:i,type:s,path:e}),!0)}unregister(e){return this.handlers.delete(e)}start(){if(this.http2ServerList.length===0||this.http2ServerList.every(({server:e})=>e.listening!==!0))throw new Error("server must be bound in order to start");if(this.started===!0)throw new Error("server is already started");this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Starting"),this.started=!0}tryShutdown(e){let n=s=>{this.channelzEnabled&&(0,Ye.unregisterChannelzRef)(this.channelzRef),e(s)},r=0;function i(){r--,r===0&&n()}this.started=!1,this.shutdown=!0;for(let{server:s,channelzRef:o}of this.http2ServerList)s.listening&&(r++,s.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(o),(0,Ye.unregisterChannelzRef)(o)),i()}));this.sessions.forEach((s,o)=>{o.closed||(r+=1,o.close(i))}),r===0&&n()}addHttp2Port(){throw new Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(e,n){let r=n[Bn.constants.HTTP2_HEADER_CONTENT_TYPE];return typeof r!="string"||!r.startsWith("application/grpc")?(e.respond({[Bn.constants.HTTP2_HEADER_STATUS]:Bn.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1):!0}_retrieveHandler(e){this.trace("Received call to method "+e+" at address "+this.serverAddressString);let n=this.handlers.get(e);return n===void 0?(this.trace("No handler registered for method "+e+". Sending UNIMPLEMENTED status."),null):n}_respondWithError(e,n,r=null){let i=new nr.Http2ServerCallStream(n,null,this.options);e.code===void 0&&(e.code=an.Status.INTERNAL),this.channelzEnabled&&(this.callTracker.addCallFailed(),r?.streamTracker.addCallFailed()),i.sendError(e)}_channelzHandler(e,n){let r=this.sessions.get(e.session);if(this.callTracker.addCallStarted(),r?.streamTracker.addCallStarted(),!this._verifyContentType(e,n)){this.callTracker.addCallFailed(),r?.streamTracker.addCallFailed();return}let i=n[P0],s=this._retrieveHandler(i);if(!s){this._respondWithError(Eh(i),e,r);return}let o=new nr.Http2ServerCallStream(e,s,this.options);o.once("callEnd",a=>{a===an.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}),r&&(o.once("streamEnd",a=>{a?r.streamTracker.addCallSucceeded():r.streamTracker.addCallFailed()}),o.on("sendMessage",()=>{r.messagesSent+=1,r.lastMessageSentTimestamp=new Date}),o.on("receiveMessage",()=>{r.messagesReceived+=1,r.lastMessageReceivedTimestamp=new Date})),this._runHandlerForCall(o,s,n)||(this.callTracker.addCallFailed(),r?.streamTracker.addCallFailed(),o.sendError({code:an.Status.INTERNAL,details:`Unknown handler type: ${s.type}`}))}_streamHandler(e,n){if(this._verifyContentType(e,n)!==!0)return;let r=n[P0],i=this._retrieveHandler(r);if(!i){this._respondWithError(Eh(r),e,null);return}let s=new nr.Http2ServerCallStream(e,i,this.options);this._runHandlerForCall(s,i,n)||s.sendError({code:an.Status.INTERNAL,details:`Unknown handler type: ${i.type}`})}_runHandlerForCall(e,n,r){var i;let s=e.receiveMetadata(r),o=(i=s.get("grpc-encoding")[0])!==null&&i!==void 0?i:"identity";s.remove("grpc-encoding");let{type:a}=n;if(a==="unary")hD(e,n,s,o);else if(a==="clientStream")fD(e,n,s,o);else if(a==="serverStream")pD(e,n,s,o);else if(a==="bidi")gD(e,n,s,o);else return!1;return!0}_setupHandlers(e){if(e===null)return;let n=e.address(),r="null";n&&(typeof n=="string"?r=n:r=n.address+":"+n.port),this.serverAddressString=r;let i=this.channelzEnabled?this._channelzHandler:this._streamHandler;e.on("stream",i.bind(this)),e.on("session",s=>{var o,a,l,c,d;if(!this.started){s.destroy();return}let h=(0,Ye.registerChannelzSocket)((o=s.socket.remoteAddress)!==null&&o!==void 0?o:"unknown",this.getChannelzSessionInfoGetter(s),this.channelzEnabled),f={ref:h,streamTracker:new Ye.ChannelzCallTracker,messagesSent:0,messagesReceived:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};this.sessions.set(s,f);let p=s.socket.remoteAddress;this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection established by client "+p),this.sessionChildrenTracker.refChild(h));let m=null,_=null,C=!1;if(this.maxConnectionAgeMs!==La){let S=this.maxConnectionAgeMs/10,O=Math.random()*S*2-S;m=(l=(a=setTimeout(()=>{var A,P;C=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+p);try{s.goaway(Bn.constants.NGHTTP2_NO_ERROR,~(1<<31),Buffer.from("max_age"))}catch{s.destroy();return}s.close(),this.maxConnectionAgeGraceMs!==La&&(_=(P=(A=setTimeout(()=>{s.destroy()},this.maxConnectionAgeGraceMs)).unref)===null||P===void 0?void 0:P.call(A))},this.maxConnectionAgeMs+O)).unref)===null||l===void 0?void 0:l.call(a)}let T=(d=(c=setInterval(()=>{var S,O;let A=(O=(S=setTimeout(()=>{C=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+p),s.close()},this.keepaliveTimeoutMs)).unref)===null||O===void 0?void 0:O.call(S);try{s.ping((P,L,q)=>{clearTimeout(A)})}catch{s.destroy()}},this.keepaliveTimeMs)).unref)===null||d===void 0?void 0:d.call(c);s.on("close",()=>{this.channelzEnabled&&(C||this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+p),this.sessionChildrenTracker.unrefChild(h),(0,Ye.unregisterChannelzRef)(h)),m&&clearTimeout(m),_&&clearTimeout(_),T&&clearTimeout(T),this.sessions.delete(s)})})}};Ba.Server=wh;function hD(t,e,n,r){return k(this,null,function*(){try{let i=yield t.receiveUnaryMessage(r);if(i===void 0||t.cancelled)return;let s=new nr.ServerUnaryCallImpl(t,n,i);e.func(s,(o,a,l,c)=>{t.sendUnaryMessage(o,a,l,c)})}catch(i){t.sendError(i)}})}function fD(t,e,n,r){let i=new nr.ServerReadableStreamImpl(t,n,e.deserialize,r);function s(o,a,l,c){i.destroy(),t.sendUnaryMessage(o,a,l,c)}t.cancelled||(i.on("error",s),e.func(i,s))}function pD(t,e,n,r){return k(this,null,function*(){try{let i=yield t.receiveUnaryMessage(r);if(i===void 0||t.cancelled)return;let s=new nr.ServerWritableStreamImpl(t,n,e.serialize,i);e.func(s)}catch(i){t.sendError(i)}})}function gD(t,e,n,r){let i=new nr.ServerDuplexStreamImpl(t,n,e.serialize,e.deserialize,r);t.cancelled||e.func(i)}});var L0=g(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.StatusBuilder=void 0;var Ch=class{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(e){return this.code=e,this}withDetails(e){return this.details=e,this}withMetadata(e){return this.metadata=e,this}build(){let e={};return this.code!==null&&(e.code=this.code),this.details!==null&&(e.details=this.details),this.metadata!==null&&(e.metadata=this.metadata),e}};Va.StatusBuilder=Ch});var Th=g(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.isDuration=Vn.durationToMs=Vn.msToDuration=void 0;function mD(t){return{seconds:t/1e3|0,nanos:t%1e3*1e6|0}}Vn.msToDuration=mD;function yD(t){return t.seconds*1e3+t.nanos/1e6|0}Vn.durationToMs=yD;function vD(t){return typeof t.seconds=="number"&&typeof t.nanos=="number"}Vn.isDuration=vD});var Nh=g(Un=>{"use strict";var bh;Object.defineProperty(Un,"__esModule",{value:!0});Un.setup=Un.OutlierDetectionLoadBalancer=Un.OutlierDetectionLoadBalancingConfig=void 0;var qa=st(),V0=H(),rr=Th(),U0=Mh(),q0=mn(),_D=_o(),SD=Sn(),B0=kt(),ED=Ra(),wD=ce(),CD="outlier_detection";function Te(t){wD.trace(V0.LogVerbosity.DEBUG,CD,t)}var xh="outlier_detection",TD=((bh=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)!==null&&bh!==void 0?bh:"true")==="true",bD={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},ID={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function ni(t,e,n,r){if(e in t&&typeof t[e]!==n){let i=r?`${r}.${e}`:e;throw new Error(`outlier detection config ${i} parse error: expected ${n}, got ${typeof t[e]}`)}}function Ih(t,e,n){let r=n?`${n}.${e}`:e;if(e in t){if(!(0,rr.isDuration)(t[e]))throw new Error(`outlier detection config ${r} parse error: expected Duration, got ${typeof t[e]}`);if(!(t[e].seconds>=0&&t[e].seconds<=315576e6&&t[e].nanos>=0&&t[e].nanos<=999999999))throw new Error(`outlier detection config ${r} parse error: values out of range for non-negative Duaration`)}}function Ua(t,e,n){let r=n?`${n}.${e}`:e;if(ni(t,e,"number",n),e in t&&!(t[e]>=0&&t[e]<=100))throw new Error(`outlier detection config ${r} parse error: value out of range for percentage (0-100)`)}var hs=class t{constructor(e,n,r,i,s,o,a){if(this.childPolicy=a,a.length>0&&a[0].getLoadBalancerName()==="pick_first")throw new Error("outlier_detection LB policy cannot have a pick_first child policy");this.intervalMs=e??1e4,this.baseEjectionTimeMs=n??3e4,this.maxEjectionTimeMs=r??3e5,this.maxEjectionPercent=i??10,this.successRateEjection=s?Object.assign(Object.assign({},bD),s):null,this.failurePercentageEjection=o?Object.assign(Object.assign({},ID),o):null}getLoadBalancerName(){return xh}toJsonObject(){return{interval:(0,rr.msToDuration)(this.intervalMs),base_ejection_time:(0,rr.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,rr.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:this.successRateEjection,failure_percentage_ejection:this.failurePercentageEjection,child_policy:this.childPolicy.map(e=>e.toJsonObject())}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}copyWithChildPolicy(e){return new t(this.intervalMs,this.baseEjectionTimeMs,this.maxEjectionTimeMs,this.maxEjectionPercent,this.successRateEjection,this.failurePercentageEjection,e)}static createFromJson(e){var n;if(Ih(e,"interval"),Ih(e,"base_ejection_time"),Ih(e,"max_ejection_time"),Ua(e,"max_ejection_percent"),"success_rate_ejection"in e){if(typeof e.success_rate_ejection!="object")throw new Error("outlier detection config success_rate_ejection must be an object");ni(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),Ua(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),ni(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),ni(e.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in e){if(typeof e.failure_percentage_ejection!="object")throw new Error("outlier detection config failure_percentage_ejection must be an object");Ua(e.failure_percentage_ejection,"threshold","failure_percentage_ejection"),Ua(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),ni(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),ni(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}return new t(e.interval?(0,rr.durationToMs)(e.interval):null,e.base_ejection_time?(0,rr.durationToMs)(e.base_ejection_time):null,e.max_ejection_time?(0,rr.durationToMs)(e.max_ejection_time):null,(n=e.max_ejection_percent)!==null&&n!==void 0?n:null,e.success_rate_ejection,e.failure_percentage_ejection,e.child_policy.map(q0.validateLoadBalancingConfig))}};Un.OutlierDetectionLoadBalancingConfig=hs;var Dh=class extends ED.BaseSubchannelWrapper{constructor(e,n){super(e),this.mapEntry=n,this.stateListeners=[],this.ejected=!1,this.refCount=0,this.childSubchannelState=e.getConnectivityState(),e.addConnectivityStateListener((r,i,s,o)=>{if(this.childSubchannelState=s,!this.ejected)for(let a of this.stateListeners)a(this,i,s,o)})}getConnectivityState(){return this.ejected?qa.ConnectivityState.TRANSIENT_FAILURE:this.childSubchannelState}addConnectivityStateListener(e){this.stateListeners.push(e)}removeConnectivityStateListener(e){let n=this.stateListeners.indexOf(e);n>-1&&this.stateListeners.splice(n,1)}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){let e=this.mapEntry.subchannelWrappers.indexOf(this);e>=0&&this.mapEntry.subchannelWrappers.splice(e,1)}}eject(){this.ejected=!0;for(let e of this.stateListeners)e(this,this.childSubchannelState,qa.ConnectivityState.TRANSIENT_FAILURE,-1)}uneject(){this.ejected=!1;for(let e of this.stateListeners)e(this,qa.ConnectivityState.TRANSIENT_FAILURE,this.childSubchannelState,-1)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}};function Ah(){return{success:0,failure:0}}var Rh=class{constructor(){this.activeBucket=Ah(),this.inactiveBucket=Ah()}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket=Ah()}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}},Oh=class{constructor(e,n){this.wrappedPicker=e,this.countCalls=n}pick(e){let n=this.wrappedPicker.pick(e);if(n.pickResultType===SD.PickResultType.COMPLETE){let r=n.subchannel,i=r.getMapEntry();if(i){let s=n.onCallEnded;return this.countCalls&&(s=o=>{var a;o===V0.Status.OK?i.counter.addSuccess():i.counter.addFailure(),(a=n.onCallEnded)===null||a===void 0||a.call(n,o)}),Object.assign(Object.assign({},n),{subchannel:r.getWrappedSubchannel(),onCallEnded:s})}else return Object.assign(Object.assign({},n),{subchannel:r.getWrappedSubchannel()})}else return n}},za=class{constructor(e){this.addressMap=new Map,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new _D.ChildLoadBalancerHandler((0,U0.createChildChannelControlHelper)(e,{createSubchannel:(n,r)=>{let i=e.createSubchannel(n,r),s=this.addressMap.get((0,B0.subchannelAddressToString)(n)),o=new Dh(i,s);return s?.currentEjectionTimestamp!==null&&o.eject(),s?.subchannelWrappers.push(o),o},updateState:(n,r)=>{n===qa.ConnectivityState.READY?e.updateState(n,new Oh(r,this.isCountingEnabled())):e.updateState(n,r)}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return this.latestConfig!==null&&(this.latestConfig.getSuccessRateEjectionConfig()!==null||this.latestConfig.getFailurePercentageEjectionConfig()!==null)}getCurrentEjectionPercent(){let e=0;for(let n of this.addressMap.values())n.currentEjectionTimestamp!==null&&(e+=1);return e*100/this.addressMap.size}runSuccessRateCheck(e){if(!this.latestConfig)return;let n=this.latestConfig.getSuccessRateEjectionConfig();if(!n)return;Te("Running success rate check");let r=n.request_volume,i=0,s=[];for(let[h,f]of this.addressMap){let p=f.counter.getLastSuccesses(),m=f.counter.getLastFailures();Te("Stats for "+h+": successes="+p+" failures="+m+" targetRequestVolume="+r),p+m>=r&&(i+=1,s.push(p/(p+m)))}if(Te("Found "+i+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+s+"]"),i<n.minimum_hosts)return;let o=s.reduce((h,f)=>h+f)/s.length,a=0;for(let h of s){let f=h-o;a+=f*f}let l=a/s.length,c=Math.sqrt(l),d=o-c*(n.stdev_factor/1e3);Te("stdev="+c+" ejectionThreshold="+d);for(let[h,f]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let p=f.counter.getLastSuccesses(),m=f.counter.getLastFailures();if(p+m<r)continue;let _=p/(p+m);if(Te("Checking candidate "+h+" successRate="+_),_<d){let C=Math.random()*100;Te("Candidate "+h+" randomNumber="+C+" enforcement_percentage="+n.enforcement_percentage),C<n.enforcement_percentage&&(Te("Ejecting candidate "+h),this.eject(f,e))}}}runFailurePercentageCheck(e){if(!this.latestConfig)return;let n=this.latestConfig.getFailurePercentageEjectionConfig();if(!n)return;Te("Running failure percentage check. threshold="+n.threshold+" request volume threshold="+n.request_volume);let r=0;for(let i of this.addressMap.values()){let s=i.counter.getLastSuccesses(),o=i.counter.getLastFailures();s+o>=n.request_volume&&(r+=1)}if(!(r<n.minimum_hosts))for(let[i,s]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let o=s.counter.getLastSuccesses(),a=s.counter.getLastFailures();if(Te("Candidate successes="+o+" failures="+a),o+a<n.request_volume)continue;if(a*100/(a+o)>n.threshold){let c=Math.random()*100;Te("Candidate "+i+" randomNumber="+c+" enforcement_percentage="+n.enforcement_percentage),c<n.enforcement_percentage&&(Te("Ejecting candidate "+i),this.eject(s,e))}}}eject(e,n){e.currentEjectionTimestamp=new Date,e.ejectionTimeMultiplier+=1;for(let r of e.subchannelWrappers)r.eject()}uneject(e){e.currentEjectionTimestamp=null;for(let n of e.subchannelWrappers)n.uneject()}switchAllBuckets(){for(let e of this.addressMap.values())e.counter.switchBuckets()}startTimer(e){var n,r;this.ejectionTimer=setTimeout(()=>this.runChecks(),e),(r=(n=this.ejectionTimer).unref)===null||r===void 0||r.call(n)}runChecks(){let e=new Date;if(Te("Ejection timer running"),this.switchAllBuckets(),!!this.latestConfig){this.timerStartTime=e,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(e),this.runFailurePercentageCheck(e);for(let[n,r]of this.addressMap.entries())if(r.currentEjectionTimestamp===null)r.ejectionTimeMultiplier>0&&(r.ejectionTimeMultiplier-=1);else{let i=this.latestConfig.getBaseEjectionTimeMs(),s=this.latestConfig.getMaxEjectionTimeMs(),o=new Date(r.currentEjectionTimestamp.getTime());o.setMilliseconds(o.getMilliseconds()+Math.min(i*r.ejectionTimeMultiplier,Math.max(i,s))),o<new Date&&(Te("Unejecting "+n),this.uneject(r))}}}updateAddressList(e,n,r){if(!(n instanceof hs))return;let i=new Set;for(let o of e)i.add((0,B0.subchannelAddressToString)(o));for(let o of i)this.addressMap.has(o)||(Te("Adding map entry for "+o),this.addressMap.set(o,{counter:new Rh,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));for(let o of this.addressMap.keys())i.has(o)||(Te("Removing map entry for "+o),this.addressMap.delete(o));let s=(0,q0.getFirstUsableConfig)(n.getChildPolicy(),!0);if(this.childBalancer.updateAddressList(e,s,r),n.getSuccessRateEjectionConfig()||n.getFailurePercentageEjectionConfig())if(this.timerStartTime){Te("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);let o=n.getIntervalMs()-(new Date().getTime()-this.timerStartTime.getTime());this.startTimer(o)}else Te("Starting new timer"),this.timerStartTime=new Date,this.startTimer(n.getIntervalMs()),this.switchAllBuckets();else{Te("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer);for(let o of this.addressMap.values())this.uneject(o),o.ejectionTimeMultiplier=0}this.latestConfig=n}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return xh}};Un.OutlierDetectionLoadBalancer=za;function AD(){TD&&(0,U0.registerLoadBalancerType)(xh,za,hs)}Un.setup=AD});var Mh=g(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.OutlierDetectionLoadBalancingConfig=B.BaseSubchannelWrapper=B.registerAdminService=B.FilterStackFactory=B.BaseFilter=B.PickResultType=B.QueuePicker=B.UnavailablePicker=B.ChildLoadBalancerHandler=B.subchannelAddressToString=B.validateLoadBalancingConfig=B.getFirstUsableConfig=B.registerLoadBalancerType=B.createChildChannelControlHelper=B.BackoffTimeout=B.durationToMs=B.uriToString=B.createResolver=B.registerResolver=B.log=B.trace=void 0;var z0=ce();Object.defineProperty(B,"trace",{enumerable:!0,get:function(){return z0.trace}});Object.defineProperty(B,"log",{enumerable:!0,get:function(){return z0.log}});var j0=Nt();Object.defineProperty(B,"registerResolver",{enumerable:!0,get:function(){return j0.registerResolver}});Object.defineProperty(B,"createResolver",{enumerable:!0,get:function(){return j0.createResolver}});var DD=Ze();Object.defineProperty(B,"uriToString",{enumerable:!0,get:function(){return DD.uriToString}});var RD=Th();Object.defineProperty(B,"durationToMs",{enumerable:!0,get:function(){return RD.durationToMs}});var OD=ki();Object.defineProperty(B,"BackoffTimeout",{enumerable:!0,get:function(){return OD.BackoffTimeout}});var ja=mn();Object.defineProperty(B,"createChildChannelControlHelper",{enumerable:!0,get:function(){return ja.createChildChannelControlHelper}});Object.defineProperty(B,"registerLoadBalancerType",{enumerable:!0,get:function(){return ja.registerLoadBalancerType}});Object.defineProperty(B,"getFirstUsableConfig",{enumerable:!0,get:function(){return ja.getFirstUsableConfig}});Object.defineProperty(B,"validateLoadBalancingConfig",{enumerable:!0,get:function(){return ja.validateLoadBalancingConfig}});var xD=kt();Object.defineProperty(B,"subchannelAddressToString",{enumerable:!0,get:function(){return xD.subchannelAddressToString}});var ND=_o();Object.defineProperty(B,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return ND.ChildLoadBalancerHandler}});var kh=Sn();Object.defineProperty(B,"UnavailablePicker",{enumerable:!0,get:function(){return kh.UnavailablePicker}});Object.defineProperty(B,"QueuePicker",{enumerable:!0,get:function(){return kh.QueuePicker}});Object.defineProperty(B,"PickResultType",{enumerable:!0,get:function(){return kh.PickResultType}});var MD=pa();Object.defineProperty(B,"BaseFilter",{enumerable:!0,get:function(){return MD.BaseFilter}});var kD=$d();Object.defineProperty(B,"FilterStackFactory",{enumerable:!0,get:function(){return kD.FilterStackFactory}});var PD=Eo();Object.defineProperty(B,"registerAdminService",{enumerable:!0,get:function(){return PD.registerAdminService}});var FD=Ra();Object.defineProperty(B,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return FD.BaseSubchannelWrapper}});var LD=Nh();Object.defineProperty(B,"OutlierDetectionLoadBalancingConfig",{enumerable:!0,get:function(){return LD.OutlierDetectionLoadBalancingConfig}})});var G0=g(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.setup=void 0;var BD=Nt(),Ph=class{constructor(e,n,r){this.listener=n,this.addresses=[],this.hasReturnedResult=!1;let i;e.authority===""?i="/"+e.path:i=e.path,this.addresses=[{path:i}]}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(this.listener.onSuccessfulResolution,this.addresses,null,null,null,{}))}destroy(){}static getDefaultAuthority(e){return"localhost"}};function VD(){(0,BD.registerResolver)("unix",Ph)}Ga.setup=VD});var Q0=g(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.setup=void 0;var H0=W("net"),Ha=H(),Fh=He(),$0=Nt(),W0=Ze(),UD=ce(),qD="ip_resolver";function K0(t){UD.trace(Ha.LogVerbosity.DEBUG,qD,t)}var Lh="ipv4",Bh="ipv6",zD=443,$a=class{constructor(e,n,r){var i;this.listener=n,this.addresses=[],this.error=null,this.hasReturnedResult=!1,K0("Resolver constructed for target "+(0,W0.uriToString)(e));let s=[];if(!(e.scheme===Lh||e.scheme===Bh)){this.error={code:Ha.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new Fh.Metadata};return}let o=e.path.split(",");for(let a of o){let l=(0,W0.splitHostPort)(a);if(l===null){this.error={code:Ha.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${a}`,metadata:new Fh.Metadata};return}if(e.scheme===Lh&&!(0,H0.isIPv4)(l.host)||e.scheme===Bh&&!(0,H0.isIPv6)(l.host)){this.error={code:Ha.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${a}`,metadata:new Fh.Metadata};return}s.push({host:l.host,port:(i=l.port)!==null&&i!==void 0?i:zD})}this.addresses=s,K0("Parsed "+e.scheme+" address list "+this.addresses)}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(()=>{this.error?this.listener.onError(this.error):this.listener.onSuccessfulResolution(this.addresses,null,null,null,{})}))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(e){return e.path.split(",")[0]}};function jD(){(0,$0.registerResolver)(Lh,$a),(0,$0.registerResolver)(Bh,$a)}Wa.setup=jD});var X0=g(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.setup=Wt.PickFirstLoadBalancer=Wt.shuffled=Wt.PickFirstLoadBalancingConfig=void 0;var Y0=mn(),Le=st(),Ka=Sn(),GD=ce(),HD=H(),$D="pick_first";function Vh(t){GD.trace(HD.LogVerbosity.DEBUG,$D,t)}var fs="pick_first",WD=250,ps=class t{constructor(e){this.shuffleAddressList=e}getLoadBalancerName(){return fs}toJsonObject(){return{[fs]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson(e){if("shuffleAddressList"in e&&typeof e.shuffleAddressList!="boolean")throw new Error("pick_first config field shuffleAddressList must be a boolean if provided");return new t(e.shuffleAddressList===!0)}};Wt.PickFirstLoadBalancingConfig=ps;var Uh=class{constructor(e){this.subchannel=e}pick(e){return{pickResultType:Ka.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}};function J0(t){let e=t.slice();for(let n=e.length-1;n>1;n--){let r=Math.floor(Math.random()*(n+1)),i=e[n];e[n]=e[r],e[r]=i}return e}Wt.shuffled=J0;var Qa=class{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=Le.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.subchannelStateListener=(n,r,i,s,o)=>{this.onSubchannelStateUpdate(n,r,i,o)},this.triedAllSubchannels=!1,this.stickyTransientFailureMode=!1,this.requestedResolutionSinceLastUpdate=!1,this.lastError=null,this.latestAddressList=null,this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}allChildrenHaveReportedTF(){return this.children.every(e=>e.hasReportedTransientFailure)}calculateAndReportNewState(){this.currentPick?this.updateState(Le.ConnectivityState.READY,new Uh(this.currentPick)):this.children.length===0?this.updateState(Le.ConnectivityState.IDLE,new Ka.QueuePicker(this)):this.stickyTransientFailureMode?this.updateState(Le.ConnectivityState.TRANSIENT_FAILURE,new Ka.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(Le.ConnectivityState.CONNECTING,new Ka.QueuePicker(this))}requestReresolution(){this.requestedResolutionSinceLastUpdate=!0,this.channelControlHelper.requestReresolution()}maybeEnterStickyTransientFailureMode(){if(this.allChildrenHaveReportedTF()&&(this.requestedResolutionSinceLastUpdate||this.requestReresolution(),!this.stickyTransientFailureMode)){this.stickyTransientFailureMode=!0;for(let{subchannel:e}of this.children)e.startConnecting();this.calculateAndReportNewState()}}removeCurrentPick(){if(this.currentPick!==null){let e=this.currentPick;this.currentPick=null,e.unref(),e.removeConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.removeChannelzChild(e.getChannelzRef())}}onSubchannelStateUpdate(e,n,r,i){var s;if(!((s=this.currentPick)===null||s===void 0)&&s.realSubchannelEquals(e)){r!==Le.ConnectivityState.READY&&(this.removeCurrentPick(),this.calculateAndReportNewState(),this.requestReresolution());return}for(let[o,a]of this.children.entries())if(e.realSubchannelEquals(a.subchannel)){r===Le.ConnectivityState.READY&&this.pickSubchannel(a.subchannel),r===Le.ConnectivityState.TRANSIENT_FAILURE&&(a.hasReportedTransientFailure=!0,i&&(this.lastError=i),this.maybeEnterStickyTransientFailureMode(),o===this.currentSubchannelIndex&&this.startNextSubchannelConnecting(o+1)),a.subchannel.startConnecting();return}}startNextSubchannelConnecting(e){if(clearTimeout(this.connectionDelayTimeout),!this.triedAllSubchannels){for(let[n,r]of this.children.entries())if(n>=e){let i=r.subchannel.getConnectivityState();if(i===Le.ConnectivityState.IDLE||i===Le.ConnectivityState.CONNECTING){this.startConnecting(n);return}}this.triedAllSubchannels=!0,this.maybeEnterStickyTransientFailureMode()}}startConnecting(e){var n,r;clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=e,this.children[e].subchannel.getConnectivityState()===Le.ConnectivityState.IDLE&&(Vh("Start connecting to subchannel with address "+this.children[e].subchannel.getAddress()),process.nextTick(()=>{var i;(i=this.children[e])===null||i===void 0||i.subchannel.startConnecting()})),this.connectionDelayTimeout=(r=(n=setTimeout(()=>{this.startNextSubchannelConnecting(e+1)},WD)).unref)===null||r===void 0?void 0:r.call(n)}pickSubchannel(e){this.currentPick&&e.realSubchannelEquals(this.currentPick)||(Vh("Pick subchannel with address "+e.getAddress()),this.stickyTransientFailureMode=!1,this.currentPick!==null&&(this.currentPick.unref(),this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef()),this.currentPick.removeConnectivityStateListener(this.subchannelStateListener)),this.currentPick=e,e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef()),this.resetSubchannelList(),clearTimeout(this.connectionDelayTimeout),this.calculateAndReportNewState())}updateState(e,n){Vh(Le.ConnectivityState[this.currentState]+" -> "+Le.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,n)}resetSubchannelList(){for(let e of this.children)this.currentPick&&e.subchannel.realSubchannelEquals(this.currentPick)||e.subchannel.removeConnectivityStateListener(this.subchannelStateListener),e.subchannel.unref(),this.channelControlHelper.removeChannelzChild(e.subchannel.getChannelzRef());this.currentSubchannelIndex=0,this.children=[],this.triedAllSubchannels=!1,this.requestedResolutionSinceLastUpdate=!1}connectToAddressList(e){let n=e.map(r=>({subchannel:this.channelControlHelper.createSubchannel(r,{}),hasReportedTransientFailure:!1}));for(let{subchannel:r}of n)r.ref(),this.channelControlHelper.addChannelzChild(r.getChannelzRef());this.resetSubchannelList(),this.children=n;for(let{subchannel:r}of this.children)if(r.addConnectivityStateListener(this.subchannelStateListener),r.getConnectivityState()===Le.ConnectivityState.READY){this.pickSubchannel(r);return}for(let r of this.children)r.subchannel.getConnectivityState()===Le.ConnectivityState.TRANSIENT_FAILURE&&(r.hasReportedTransientFailure=!0);this.startNextSubchannelConnecting(0),this.calculateAndReportNewState()}updateAddressList(e,n){n instanceof ps&&(n.getShuffleAddressList()&&(e=J0(e)),this.latestAddressList=e,this.connectToAddressList(e))}exitIdle(){this.currentState===Le.ConnectivityState.IDLE&&this.latestAddressList&&this.connectToAddressList(this.latestAddressList)}resetBackoff(){}destroy(){this.resetSubchannelList(),this.removeCurrentPick()}getTypeName(){return fs}};Wt.PickFirstLoadBalancer=Qa;function KD(){(0,Y0.registerLoadBalancerType)(fs,Qa,ps),(0,Y0.registerDefaultLoadBalancerType)(fs)}Wt.setup=KD});var e_=g(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});ri.setup=ri.RoundRobinLoadBalancer=void 0;var QD=mn(),Be=st(),Ya=Sn(),YD=kt(),JD=ce(),XD=H(),ZD="round_robin";function Z0(t){JD.trace(XD.LogVerbosity.DEBUG,ZD,t)}var Ja="round_robin",qh=class t{getLoadBalancerName(){return Ja}constructor(){}toJsonObject(){return{[Ja]:{}}}static createFromJson(e){return new t}},zh=class{constructor(e,n=0){this.subchannelList=e,this.nextIndex=n}pick(e){let n=this.subchannelList[this.nextIndex];return this.nextIndex=(this.nextIndex+1)%this.subchannelList.length,{pickResultType:Ya.PickResultType.COMPLETE,subchannel:n,status:null,onCallStarted:null,onCallEnded:null}}peekNextSubchannel(){return this.subchannelList[this.nextIndex]}},Xa=class{constructor(e){this.channelControlHelper=e,this.subchannels=[],this.currentState=Be.ConnectivityState.IDLE,this.currentReadyPicker=null,this.lastError=null,this.subchannelStateListener=(n,r,i,s,o)=>{this.calculateAndUpdateState(),(i===Be.ConnectivityState.TRANSIENT_FAILURE||i===Be.ConnectivityState.IDLE)&&(o&&(this.lastError=o),this.channelControlHelper.requestReresolution(),n.startConnecting())}}countSubchannelsWithState(e){return this.subchannels.filter(n=>n.getConnectivityState()===e).length}calculateAndUpdateState(){if(this.countSubchannelsWithState(Be.ConnectivityState.READY)>0){let e=this.subchannels.filter(r=>r.getConnectivityState()===Be.ConnectivityState.READY),n=0;this.currentReadyPicker!==null&&(n=e.indexOf(this.currentReadyPicker.peekNextSubchannel()),n<0&&(n=0)),this.updateState(Be.ConnectivityState.READY,new zh(e,n))}else this.countSubchannelsWithState(Be.ConnectivityState.CONNECTING)>0?this.updateState(Be.ConnectivityState.CONNECTING,new Ya.QueuePicker(this)):this.countSubchannelsWithState(Be.ConnectivityState.TRANSIENT_FAILURE)>0?this.updateState(Be.ConnectivityState.TRANSIENT_FAILURE,new Ya.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(Be.ConnectivityState.IDLE,new Ya.QueuePicker(this))}updateState(e,n){Z0(Be.ConnectivityState[this.currentState]+" -> "+Be.ConnectivityState[e]),e===Be.ConnectivityState.READY?this.currentReadyPicker=n:this.currentReadyPicker=null,this.currentState=e,this.channelControlHelper.updateState(e,n)}resetSubchannelList(){for(let e of this.subchannels)e.removeConnectivityStateListener(this.subchannelStateListener),e.unref(),this.channelControlHelper.removeChannelzChild(e.getChannelzRef());this.subchannels=[]}updateAddressList(e,n){this.resetSubchannelList(),Z0("Connect to address list "+e.map(r=>(0,YD.subchannelAddressToString)(r))),this.subchannels=e.map(r=>this.channelControlHelper.createSubchannel(r,{}));for(let r of this.subchannels){r.ref(),r.addConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.addChannelzChild(r.getChannelzRef());let i=r.getConnectivityState();(i===Be.ConnectivityState.IDLE||i===Be.ConnectivityState.TRANSIENT_FAILURE)&&r.startConnecting()}this.calculateAndUpdateState()}exitIdle(){for(let e of this.subchannels)e.startConnecting()}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return Ja}};ri.RoundRobinLoadBalancer=Xa;function eR(){(0,QD.registerLoadBalancerType)(Ja,Xa,qh)}ri.setup=eR});var i_=g(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.experimental=R.addAdminServicesToServer=R.getChannelzHandlers=R.getChannelzServiceDefinition=R.InterceptorConfigurationError=R.InterceptingCall=R.RequesterBuilder=R.ListenerBuilder=R.StatusBuilder=R.getClientChannel=R.ServerCredentials=R.Server=R.setLogVerbosity=R.setLogger=R.load=R.loadObject=R.CallCredentials=R.ChannelCredentials=R.waitForClientReady=R.closeClient=R.Channel=R.makeGenericClientConstructor=R.makeClientConstructor=R.loadPackageDefinition=R.Client=R.compressionAlgorithms=R.propagate=R.connectivityState=R.status=R.logVerbosity=R.Metadata=R.credentials=void 0;var Za=Bc();Object.defineProperty(R,"CallCredentials",{enumerable:!0,get:function(){return Za.CallCredentials}});var tR=mu();Object.defineProperty(R,"Channel",{enumerable:!0,get:function(){return tR.ChannelImplementation}});var nR=Wd();Object.defineProperty(R,"compressionAlgorithms",{enumerable:!0,get:function(){return nR.CompressionAlgorithms}});var rR=st();Object.defineProperty(R,"connectivityState",{enumerable:!0,get:function(){return rR.ConnectivityState}});var el=ho();Object.defineProperty(R,"ChannelCredentials",{enumerable:!0,get:function(){return el.ChannelCredentials}});var t_=gu();Object.defineProperty(R,"Client",{enumerable:!0,get:function(){return t_.Client}});var jh=H();Object.defineProperty(R,"logVerbosity",{enumerable:!0,get:function(){return jh.LogVerbosity}});Object.defineProperty(R,"status",{enumerable:!0,get:function(){return jh.Status}});Object.defineProperty(R,"propagate",{enumerable:!0,get:function(){return jh.Propagate}});var n_=ce(),Gh=vu();Object.defineProperty(R,"loadPackageDefinition",{enumerable:!0,get:function(){return Gh.loadPackageDefinition}});Object.defineProperty(R,"makeClientConstructor",{enumerable:!0,get:function(){return Gh.makeClientConstructor}});Object.defineProperty(R,"makeGenericClientConstructor",{enumerable:!0,get:function(){return Gh.makeClientConstructor}});var iR=He();Object.defineProperty(R,"Metadata",{enumerable:!0,get:function(){return iR.Metadata}});var sR=F0();Object.defineProperty(R,"Server",{enumerable:!0,get:function(){return sR.Server}});var oR=Sh();Object.defineProperty(R,"ServerCredentials",{enumerable:!0,get:function(){return oR.ServerCredentials}});var aR=L0();Object.defineProperty(R,"StatusBuilder",{enumerable:!0,get:function(){return aR.StatusBuilder}});R.credentials={combineChannelCredentials:(t,...e)=>e.reduce((n,r)=>n.compose(r),t),combineCallCredentials:(t,...e)=>e.reduce((n,r)=>n.compose(r),t),createInsecure:el.ChannelCredentials.createInsecure,createSsl:el.ChannelCredentials.createSsl,createFromSecureContext:el.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:Za.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:Za.CallCredentials.createFromGoogleCredential,createEmpty:Za.CallCredentials.createEmpty};var lR=t=>t.close();R.closeClient=lR;var cR=(t,e,n)=>t.waitForReady(e,n);R.waitForClientReady=cR;var uR=(t,e)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};R.loadObject=uR;var dR=(t,e,n)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};R.load=dR;var hR=t=>{n_.setLogger(t)};R.setLogger=hR;var fR=t=>{n_.setLoggerVerbosity(t)};R.setLogVerbosity=fR;var pR=t=>t_.Client.prototype.getChannel.call(t);R.getClientChannel=pR;var tl=hu();Object.defineProperty(R,"ListenerBuilder",{enumerable:!0,get:function(){return tl.ListenerBuilder}});Object.defineProperty(R,"RequesterBuilder",{enumerable:!0,get:function(){return tl.RequesterBuilder}});Object.defineProperty(R,"InterceptingCall",{enumerable:!0,get:function(){return tl.InterceptingCall}});Object.defineProperty(R,"InterceptorConfigurationError",{enumerable:!0,get:function(){return tl.InterceptorConfigurationError}});var r_=er();Object.defineProperty(R,"getChannelzServiceDefinition",{enumerable:!0,get:function(){return r_.getChannelzServiceDefinition}});Object.defineProperty(R,"getChannelzHandlers",{enumerable:!0,get:function(){return r_.getChannelzHandlers}});var gR=Eo();Object.defineProperty(R,"addAdminServicesToServer",{enumerable:!0,get:function(){return gR.addAdminServicesToServer}});var mR=Mh();R.experimental=mR;var yR=kd(),vR=G0(),_R=Q0(),SR=X0(),ER=e_(),wR=Nh(),CR=er();yR.setup(),vR.setup(),_R.setup(),SR.setup(),ER.setup(),wR.setup(),CR.setup()});var lS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var Xf=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},cS=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},uS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4,f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(n[d],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Xf(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):cS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let c=i<t.length?n[t.charAt(i)]:64;++i;let h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new Tl;let f=s<<2|a>>4;if(r.push(f),c!==64){let p=a<<4&240|c>>2;if(r.push(p),h!==64){let m=c<<6&192|h;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Tl=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},dS=function(t){let e=Xf(t);return uS.encodeByteArray(e,!0)},bl=function(t){return dS(t).replace(/\./g,"")};function Il(){try{return typeof indexedDB=="object"}catch{return!1}}function Zf(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var hS="FirebaseError",Qt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=hS,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ci.prototype.create)}},ci=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?fS(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Qt(i,a,r)}};function fS(t,e){return t.replace(pS,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var pS=/\{\$([^}]+)}/g;var mx=4*60*60*1e3;lS.NODE_CLIENT=!0;var dn=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var gS=[],Y=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Y||{}),mS={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},yS=Y.INFO,vS={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},_S=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=vS[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},cr=class{constructor(e){this.name=e,this._logLevel=yS,this._logHandler=_S,this._userLogHandler=null,gS.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Y))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...e),this._logHandler(this,Y.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...e),this._logHandler(this,Y.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...e),this._logHandler(this,Y.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...e),this._logHandler(this,Y.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...e),this._logHandler(this,Y.ERROR,...e)}};var SS=(t,e)=>e.some(n=>t instanceof n),ep,tp;function ES(){return ep||(ep=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wS(){return tp||(tp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var np=new WeakMap,Dl=new WeakMap,rp=new WeakMap,Al=new WeakMap,Ol=new WeakMap;function CS(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Dt(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&np.set(n,t)}).catch(()=>{}),Ol.set(e,t),e}function TS(t){if(Dl.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Dl.set(t,e)}var Rl={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Dl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rp.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ip(t){Rl=t(Rl)}function bS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Os(this),e,...n);return rp.set(r,e.sort?e.sort():[e]),Dt(r)}:wS().includes(t)?function(...e){return t.apply(Os(this),e),Dt(np.get(this))}:function(...e){return Dt(t.apply(Os(this),e))}}function IS(t){return typeof t=="function"?bS(t):(t instanceof IDBTransaction&&TS(t),SS(t,ES())?new Proxy(t,Rl):t)}function Dt(t){if(t instanceof IDBRequest)return CS(t);if(Al.has(t))return Al.get(t);let e=IS(t);return e!==t&&(Al.set(t,e),Ol.set(e,t)),e}var Os=t=>Ol.get(t);function op(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Dt(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Dt(o.result),l.oldVersion,l.newVersion,Dt(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}var AS=["get","getKey","getAll","getAllKeys","count"],DS=["put","add","delete","clear"],xl=new Map;function sp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xl.get(e))return xl.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=DS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||AS.includes(n)))return;let s=function(o,...a){return k(this,null,function*(){let l=this.transaction(o,i?"readwrite":"readonly"),c=l.store;return r&&(c=c.index(a.shift())),(yield Promise.all([c[n](...a),i&&l.done]))[0]})};return xl.set(e,s),s}ip(t=>cn(At({},t),{get:(e,n,r)=>sp(e,n)||t.get(e,n,r),has:(e,n)=>!!sp(e,n)||t.has(e,n)}));var Ml=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OS(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function OS(t){let e=t.getComponent();return e?.type==="VERSION"}var kl="@firebase/app",ap="0.9.28";var jn=new cr("@firebase/app"),xS="@firebase/app-compat",NS="@firebase/analytics-compat",MS="@firebase/analytics",kS="@firebase/app-check-compat",PS="@firebase/app-check",FS="@firebase/auth",LS="@firebase/auth-compat",BS="@firebase/database",VS="@firebase/database-compat",US="@firebase/functions",qS="@firebase/functions-compat",zS="@firebase/installations",jS="@firebase/installations-compat",GS="@firebase/messaging",HS="@firebase/messaging-compat",$S="@firebase/performance",WS="@firebase/performance-compat",KS="@firebase/remote-config",QS="@firebase/remote-config-compat",YS="@firebase/storage",JS="@firebase/storage-compat",XS="@firebase/firestore",ZS="@firebase/firestore-compat",eE="firebase",tE="10.8.1";var nE={[kl]:"fire-core",[xS]:"fire-core-compat",[MS]:"fire-analytics",[NS]:"fire-analytics-compat",[PS]:"fire-app-check",[kS]:"fire-app-check-compat",[FS]:"fire-auth",[LS]:"fire-auth-compat",[BS]:"fire-rtdb",[VS]:"fire-rtdb-compat",[US]:"fire-fn",[qS]:"fire-fn-compat",[zS]:"fire-iid",[jS]:"fire-iid-compat",[GS]:"fire-fcm",[HS]:"fire-fcm-compat",[$S]:"fire-perf",[WS]:"fire-perf-compat",[KS]:"fire-rc",[QS]:"fire-rc-compat",[YS]:"fire-gcs",[JS]:"fire-gcs-compat",[XS]:"fire-fst",[ZS]:"fire-fst-compat","fire-js":"fire-js",[eE]:"fire-js-all"};var rE=new Map,lp=new Map;function iE(t,e){try{t.container.addComponent(e)}catch(n){jn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ui(t){let e=t.name;if(lp.has(e))return jn.debug(`There were multiple attempts to register component ${e}.`),!1;lp.set(e,t);for(let n of rE.values())iE(n,t);return!0}var sE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ll=new ci("app","Firebase",sE);var hp=tE;function ur(t,e,n){var r;let i=(r=nE[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jn.warn(a.join(" "));return}ui(new dn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var oE="firebase-heartbeat-database",aE=1,di="firebase-heartbeat-store",Nl=null;function fp(){return Nl||(Nl=op(oE,aE,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(di)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ll.create("idb-open",{originalErrorMessage:t.message})})),Nl}function lE(t){return k(this,null,function*(){try{let n=(yield fp()).transaction(di),r=yield n.objectStore(di).get(pp(t));return yield n.done,r}catch(e){if(e instanceof Qt)jn.warn(e.message);else{let n=Ll.create("idb-get",{originalErrorMessage:e?.message});jn.warn(n.message)}}})}function cp(t,e){return k(this,null,function*(){try{let r=(yield fp()).transaction(di,"readwrite");yield r.objectStore(di).put(e,pp(t)),yield r.done}catch(n){if(n instanceof Qt)jn.warn(n.message);else{let r=Ll.create("idb-set",{originalErrorMessage:n?.message});jn.warn(r.message)}}})}function pp(t){return`${t.name}!${t.options.appId}`}var cE=1024,uE=30*24*60*60*1e3,Pl=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Fl(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return k(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=up();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=uE}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return k(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=up(),{heartbeatsToSend:r,unsentEntries:i}=dE(this._heartbeatsCache.heartbeats),s=bl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function up(){return new Date().toISOString().substring(0,10)}function dE(t,e=cE){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),dp(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),dp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Fl=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return k(this,null,function*(){return Il()?Zf().then(()=>!0).catch(()=>!1):!1})}read(){return k(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield lE(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return k(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return cp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return k(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return cp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function dp(t){return bl(JSON.stringify({version:2,heartbeats:t})).length}function hE(t){ui(new dn("platform-logger",e=>new Ml(e),"PRIVATE")),ui(new dn("heartbeat",e=>new Pl(e),"PRIVATE")),ur(kl,ap,t),ur(kl,ap,"esm2017"),ur("fire-js","")}hE("");import{inspect as TR,TextEncoder as _k,TextDecoder as Sk}from"util";import{randomBytes as bR}from"crypto";var fE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vt={},I,sc=sc||{},F=fE||self;function Gs(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function bi(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function pE(t){return Object.prototype.hasOwnProperty.call(t,Bl)&&t[Bl]||(t[Bl]=++gE)}var Bl="closure_uid_"+(1e9*Math.random()>>>0),gE=0;function mE(t,e,n){return t.call.apply(t.bind,arguments)}function yE(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Ne(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ne=mE:Ne=yE,Ne.apply(null,arguments)}function xs(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Ee(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function hn(){this.s=this.s,this.o=this.o}var vE=0;hn.prototype.s=!1;hn.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),vE!=0)&&pE(this)};hn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ap=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function oc(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function gp(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Gs(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Me(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Me.prototype.h=function(){this.defaultPrevented=!0};var _E=function(){if(!F.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};F.addEventListener("test",n,e),F.removeEventListener("test",n,e)}catch{}return t}();function yi(t){return/^[\s\xa0]*$/.test(t)}function Hs(){var t=F.navigator;return t&&(t=t.userAgent)?t:""}function Rt(t){return Hs().indexOf(t)!=-1}function ac(t){return ac[" "](t),t}ac[" "]=function(){};function SE(t,e){var n=lw;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var EE=Rt("Opera"),pr=Rt("Trident")||Rt("MSIE"),Dp=Rt("Edge"),jl=Dp||pr,Rp=Rt("Gecko")&&!(Hs().toLowerCase().indexOf("webkit")!=-1&&!Rt("Edge"))&&!(Rt("Trident")||Rt("MSIE"))&&!Rt("Edge"),wE=Hs().toLowerCase().indexOf("webkit")!=-1&&!Rt("Edge");function Op(){var t=F.document;return t?t.documentMode:void 0}var Gl;e:{if(Ns="",Ms=function(){var t=Hs();if(Rp)return/rv:([^\);]+)(\)|;)/.exec(t);if(Dp)return/Edge\/([\d\.]+)/.exec(t);if(pr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(wE)return/WebKit\/(\S+)/.exec(t);if(EE)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Ms&&(Ns=Ms?Ms[1]:""),pr&&(ks=Op(),ks!=null&&ks>parseFloat(Ns))){Gl=String(ks);break e}Gl=Ns}var Ns,Ms,ks,Hl;F.document&&pr?(Vl=Op(),Hl=Vl||parseInt(Gl,10)||void 0):Hl=void 0;var Vl,CE=Hl;function vi(t,e){if(Me.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Rp){e:{try{ac(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:TE[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&vi.$.h.call(this)}}Ee(vi,Me);var TE={2:"touch",3:"pen",4:"mouse"};vi.prototype.h=function(){vi.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ii="closure_listenable_"+(1e6*Math.random()|0),bE=0;function IE(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++bE,this.fa=this.ia=!1}function $s(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function lc(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function AE(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function xp(t){let e={};for(let n in t)e[n]=t[n];return e}var mp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Np(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<mp.length;s++)n=mp[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ws(t){this.src=t,this.g={},this.h=0}Ws.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Wl(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new IE(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function $l(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=Ap(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&($s(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Wl(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var cc="closure_lm_"+(1e6*Math.random()|0),Ul={};function Mp(t,e,n,r,i){if(r&&r.once)return Pp(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Mp(t,e[s],n,r,i);return null}return n=hc(n),t&&t[Ii]?t.O(e,n,bi(r)?!!r.capture:!!r,i):kp(t,e,n,!1,r,i)}function kp(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=bi(i)?!!i.capture:!!i,a=dc(t);if(a||(t[cc]=a=new Ws(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=DE(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)_E||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Lp(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function DE(){function t(n){return e.call(t.src,t.listener,n)}let e=RE;return t}function Pp(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Pp(t,e[s],n,r,i);return null}return n=hc(n),t&&t[Ii]?t.P(e,n,bi(r)?!!r.capture:!!r,i):kp(t,e,n,!0,r,i)}function Fp(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Fp(t,e[s],n,r,i);else r=bi(r)?!!r.capture:!!r,n=hc(n),t&&t[Ii]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Wl(s,n,r,i),-1<n&&($s(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=dc(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Wl(e,n,r,i)),(n=-1<t?e[t]:null)&&uc(n))}function uc(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Ii])$l(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Lp(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=dc(e))?($l(n,t),n.h==0&&(n.src=null,e[cc]=null)):$s(t)}}}function Lp(t){return t in Ul?Ul[t]:Ul[t]="on"+t}function RE(t,e){if(t.fa)t=!0;else{e=new vi(e,this);var n=t.listener,r=t.la||t.src;t.ia&&uc(t),t=n.call(r,e)}return t}function dc(t){return t=t[cc],t instanceof Ws?t:null}var ql="__closure_events_fn_"+(1e9*Math.random()>>>0);function hc(t){return typeof t=="function"?t:(t[ql]||(t[ql]=function(e){return t.handleEvent(e)}),t[ql])}function Se(){hn.call(this),this.i=new Ws(this),this.S=this,this.J=null}Ee(Se,hn);Se.prototype[Ii]=!0;Se.prototype.removeEventListener=function(t,e,n,r){Fp(this,t,e,n,r)};function De(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Me(e,t);else if(e instanceof Me)e.target=e.target||t;else{var i=e;e=new Me(r,t),Np(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Ps(o,r,!0,e)&&i}if(o=e.g=t,i=Ps(o,r,!0,e)&&i,i=Ps(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Ps(o,r,!1,e)&&i}Se.prototype.N=function(){if(Se.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$s(n[r]);delete t.g[e],t.h--}}this.J=null};Se.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Se.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Ps(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&$l(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var fc=F.JSON.stringify,Kl=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function OE(){var t=pc;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Ql=class{constructor(){this.h=this.g=null}add(e,n){let r=Bp.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},Bp=new Kl(()=>new Yl,t=>t.reset()),Yl=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function xE(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function NE(t){F.setTimeout(()=>{throw t},0)}var _i,Si=!1,pc=new Ql,Vp=()=>{let t=F.Promise.resolve(void 0);_i=()=>{t.then(ME)}},ME=()=>{for(var t;t=OE();){try{t.h.call(t.g)}catch(n){NE(n)}var e=Bp;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Si=!1};function Ks(t,e){Se.call(this),this.h=t||1,this.g=e||F,this.j=Ne(this.qb,this),this.l=Date.now()}Ee(Ks,Se);I=Ks.prototype;I.ga=!1;I.T=null;I.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),De(this,"tick"),this.ga&&(gc(this),this.start()))}};I.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function gc(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}I.N=function(){Ks.$.N.call(this),gc(this),delete this.g};function mc(t,e,n){if(typeof t=="function")n&&(t=Ne(t,n));else if(t&&typeof t.handleEvent=="function")t=Ne(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:F.setTimeout(t,e||0)}function Up(t){t.g=mc(()=>{t.g=null,t.i&&(t.i=!1,Up(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var Jl=class extends hn{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Up(this)}N(){super.N(),this.g&&(F.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Ei(t){hn.call(this),this.h=t,this.g={}}Ee(Ei,hn);var yp=[];function qp(t,e,n,r){Array.isArray(n)||(n&&(yp[0]=n.toString()),n=yp);for(var i=0;i<n.length;i++){var s=Mp(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function zp(t){lc(t.g,function(e,n){this.g.hasOwnProperty(n)&&uc(e)},t),t.g={}}Ei.prototype.N=function(){Ei.$.N.call(this),zp(this)};Ei.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Qs(){this.g=!0}Qs.prototype.Ea=function(){this.g=!1};function kE(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var h=d.split("_");o=2<=h.length&&h[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function PE(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function hr(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+LE(t,n)+(r?" "+r:"")})}function FE(t,e){t.info(function(){return"TIMEOUT: "+e})}Qs.prototype.info=function(){};function LE(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return fc(n)}catch{return e}}var Wn={},vp=null;function Ys(){return vp=vp||new Se}Wn.Ta="serverreachability";function jp(t){Me.call(this,Wn.Ta,t)}Ee(jp,Me);function wi(t){let e=Ys();De(e,new jp(e))}Wn.STAT_EVENT="statevent";function Gp(t,e){Me.call(this,Wn.STAT_EVENT,t),this.stat=e}Ee(Gp,Me);function je(t){let e=Ys();De(e,new Gp(e,t))}Wn.Ua="timingevent";function Hp(t,e){Me.call(this,Wn.Ua,t),this.size=e}Ee(Hp,Me);function Ai(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return F.setTimeout(function(){t()},e)}var Js={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},$p={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function yc(){}yc.prototype.h=null;function _p(t){return t.h||(t.h=t.i())}function Wp(){}var Di={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function vc(){Me.call(this,"d")}Ee(vc,Me);function _c(){Me.call(this,"c")}Ee(_c,Me);var Xl;function Xs(){}Ee(Xs,yc);Xs.prototype.g=function(){return new XMLHttpRequest};Xs.prototype.i=function(){return{}};Xl=new Xs;function Ri(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Ei(this),this.P=BE,t=jl?125:void 0,this.V=new Ks(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Kp}function Kp(){this.i=null,this.g="",this.h=!1}var BE=45e3,Qp={},Zl={};I=Ri.prototype;I.setTimeout=function(t){this.P=t};function ec(t,e,n){t.L=1,t.A=eo(Jt(e)),t.u=n,t.S=!0,Yp(t,null)}function Yp(t,e){t.G=Date.now(),Oi(t),t.B=Jt(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),ig(n.i,"t",r),t.o=0,n=t.l.J,t.h=new Kp,t.g=bg(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Jl(Ne(t.Pa,t,t.g),t.O)),qp(t.U,t.g,"readystatechange",t.nb),e=t.I?xp(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),wi(),kE(t.j,t.v,t.B,t.m,t.W,t.u)}I.nb=function(t){t=t.target;let e=this.M;e&&Ot(t)==3?e.l():this.Pa(t)};I.Pa=function(t){try{if(t==this.g)e:{let d=Ot(this.g);var e=this.g.Ia();let h=this.g.da();if(!(3>d)&&(d!=3||jl||this.g&&(this.h.h||this.g.ja()||Cp(this.g)))){this.J||d!=4||e==7||(e==8||0>=h?wi(3):wi(2)),Zs(this);var n=this.g.da();this.ca=n;t:if(Jp(this)){var r=Cp(this.g);t="";var i=r.length,s=Ot(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gn(this),mi(this);var o="";break t}this.h.i=new F.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,PE(this.j,this.v,this.B,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yi(a)){var c=a;break t}}c=null}if(n=c)hr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tc(this,n);else{this.i=!1,this.s=3,je(12),Gn(this),mi(this);break e}}this.S?(Xp(this,d,o),jl&&this.i&&d==3&&(qp(this.U,this.V,"tick",this.mb),this.V.start())):(hr(this.j,this.m,o,null),tc(this,o)),d==4&&Gn(this),this.i&&!this.J&&(d==4?Eg(this.l,this):(this.i=!1,Oi(this)))}else sw(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,je(12)):(this.s=0,je(13)),Gn(this),mi(this)}}}catch{}finally{}};function Jp(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function Xp(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=VE(t,n),i==Zl){e==4&&(t.s=4,je(14),r=!1),hr(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Qp){t.s=4,je(15),hr(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else hr(t.j,t.m,i,null),tc(t,i);Jp(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,je(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),bc(e),e.M=!0,je(11))):(hr(t.j,t.m,n,"[Invalid Chunked Response]"),Gn(t),mi(t))}I.mb=function(){if(this.g){var t=Ot(this.g),e=this.g.ja();this.o<e.length&&(Zs(this),Xp(this,t,e),this.i&&t!=4&&Oi(this))}};function VE(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Zl:(n=Number(e.substring(n,r)),isNaN(n)?Qp:(r+=1,r+n>e.length?Zl:(e=e.slice(r,r+n),t.o=r+n,e)))}I.cancel=function(){this.J=!0,Gn(this)};function Oi(t){t.Y=Date.now()+t.P,Zp(t,t.P)}function Zp(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Ai(Ne(t.lb,t),e)}function Zs(t){t.C&&(F.clearTimeout(t.C),t.C=null)}I.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(FE(this.j,this.B),this.L!=2&&(wi(),je(17)),Gn(this),this.s=2,mi(this)):Zp(this,this.Y-t)};function mi(t){t.l.H==0||t.J||Eg(t.l,t)}function Gn(t){Zs(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,gc(t.V),zp(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function tc(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||nc(n.i,t))){if(!t.K&&nc(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Us(n),ro(n);else break e;Tc(n),je(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ai(Ne(n.ib,n),6e3));if(1>=ag(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Hn(n,11)}else if((t.K||n.g==t)&&Us(n),!yi(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];let d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));let h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));let f=c[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let p=t.g;if(p){let m=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var s=r.i;s.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Sc(s,s.h),s.h=null))}if(r.F){let _=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,ne(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=Tg(r,r.J?r.pa:null,r.Y),o.K){lg(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Zs(a),Oi(a)),r.g=o}else _g(r);0<n.j.length&&io(n)}else c[0]!="stop"&&c[0]!="close"||Hn(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Hn(n,7):Cc(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}wi(4)}catch{}}function UE(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Gs(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function qE(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Gs(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function eg(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Gs(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=qE(t),r=UE(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var tg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zE(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function $n(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof $n){this.h=t.h,Bs(this,t.j),this.s=t.s,this.g=t.g,Vs(this,t.m),this.l=t.l;var e=t.i,n=new Ci;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Sp(this,n),this.o=t.o}else t&&(e=String(t).match(tg))?(this.h=!1,Bs(this,e[1]||"",!0),this.s=pi(e[2]||""),this.g=pi(e[3]||"",!0),Vs(this,e[4]),this.l=pi(e[5]||"",!0),Sp(this,e[6]||"",!0),this.o=pi(e[7]||"")):(this.h=!1,this.i=new Ci(null,this.h))}$n.prototype.toString=function(){var t=[],e=this.j;e&&t.push(gi(e,Ep,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(gi(e,Ep,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(gi(n,n.charAt(0)=="/"?HE:GE,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",gi(n,WE)),t.join("")};function Jt(t){return new $n(t)}function Bs(t,e,n){t.j=n?pi(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Vs(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Sp(t,e,n){e instanceof Ci?(t.i=e,KE(t.i,t.h)):(n||(e=gi(e,$E)),t.i=new Ci(e,t.h))}function ne(t,e,n){t.i.set(e,n)}function eo(t){return ne(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function pi(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function gi(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,jE),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function jE(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Ep=/[#\/\?@]/g,GE=/[#\?:]/g,HE=/[#\?]/g,$E=/[#\?@]/g,WE=/#/g;function Ci(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function fn(t){t.g||(t.g=new Map,t.h=0,t.i&&zE(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}I=Ci.prototype;I.add=function(t,e){fn(this),this.i=null,t=gr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function ng(t,e){fn(t),e=gr(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function rg(t,e){return fn(t),e=gr(t,e),t.g.has(e)}I.forEach=function(t,e){fn(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};I.ta=function(){fn(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};I.Z=function(t){fn(this);let e=[];if(typeof t=="string")rg(this,t)&&(e=e.concat(this.g.get(gr(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};I.set=function(t,e){return fn(this),this.i=null,t=gr(this,t),rg(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};I.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function ig(t,e,n){ng(t,e),0<n.length&&(t.i=null,t.g.set(gr(t,e),oc(n)),t.h+=n.length)}I.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function gr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function KE(t,e){e&&!t.j&&(fn(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(ng(this,r),ig(this,i,n))},t)),t.j=e}var QE=class{constructor(t,e){this.g=t,this.map=e}};function sg(t){this.l=t||YE,F.PerformanceNavigationTiming?(t=F.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(F.g&&F.g.Ka&&F.g.Ka()&&F.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var YE=10;function og(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function ag(t){return t.h?1:t.g?t.g.size:0}function nc(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Sc(t,e){t.g?t.g.add(e):t.h=e}function lg(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}sg.prototype.cancel=function(){if(this.i=cg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function cg(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return oc(t.i)}var JE=class{stringify(t){return F.JSON.stringify(t,void 0)}parse(t){return F.JSON.parse(t,void 0)}};function XE(){this.g=new JE}function ZE(t,e,n){let r=n||"";try{eg(t,function(i,s){let o=i;bi(i)&&(o=fc(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ew(t,e){let n=new Qs;if(F.Image){let r=new Image;r.onload=xs(Fs,n,r,"TestLoadImage: loaded",!0,e),r.onerror=xs(Fs,n,r,"TestLoadImage: error",!1,e),r.onabort=xs(Fs,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=xs(Fs,n,r,"TestLoadImage: timeout",!1,e),F.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Fs(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function xi(t){this.l=t.ec||null,this.j=t.ob||!1}Ee(xi,yc);xi.prototype.g=function(){return new to(this.l,this.j)};xi.prototype.i=function(t){return function(){return t}}({});function to(t,e){Se.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Ec,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ee(to,Se);var Ec=0;I=to.prototype;I.open=function(t,e){if(this.readyState!=Ec)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ti(this)};I.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||F).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};I.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ni(this)),this.readyState=Ec};I.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ti(this)),this.g&&(this.readyState=3,Ti(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof F.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ug(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function ug(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}I.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ni(this):Ti(this),this.readyState==3&&ug(this)}};I.Za=function(t){this.g&&(this.response=this.responseText=t,Ni(this))};I.Ya=function(t){this.g&&(this.response=t,Ni(this))};I.ka=function(){this.g&&Ni(this)};function Ni(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ti(t)}I.setRequestHeader=function(t,e){this.v.append(t,e)};I.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};I.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ti(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(to.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var tw=F.JSON.parse;function le(t){Se.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=dg,this.L=this.M=!1}Ee(le,Se);var dg="",nw=/^https?$/i,rw=["POST","PUT"];I=le.prototype;I.Oa=function(t){this.M=t};I.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Xl.g(),this.C=this.u?_p(this.u):_p(Xl),this.g.onreadystatechange=Ne(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){wp(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=F.FormData&&t instanceof F.FormData,!(0<=Ap(rw,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{pg(this),0<this.B&&((this.L=iw(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ne(this.ua,this)):this.A=mc(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){wp(this,s)}};function iw(t){return pr&&typeof t.timeout=="number"&&t.ontimeout!==void 0}I.ua=function(){typeof sc<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,De(this,"timeout"),this.abort(8))};function wp(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,hg(t),no(t)}function hg(t){t.F||(t.F=!0,De(t,"complete"),De(t,"error"))}I.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,De(this,"complete"),De(this,"abort"),no(this))};I.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),no(this,!0)),le.$.N.call(this)};I.La=function(){this.s||(this.G||this.v||this.l?fg(this):this.kb())};I.kb=function(){fg(this)};function fg(t){if(t.h&&typeof sc<"u"&&(!t.C[1]||Ot(t)!=4||t.da()!=2)){if(t.v&&Ot(t)==4)mc(t.La,0,t);else if(De(t,"readystatechange"),Ot(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(tg)[1]||null;!i&&F.self&&F.self.location&&(i=F.self.location.protocol.slice(0,-1)),r=!nw.test(i?i.toLowerCase():"")}n=r}if(n)De(t,"complete"),De(t,"success");else{t.m=6;try{var s=2<Ot(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",hg(t)}}finally{no(t)}}}}function no(t,e){if(t.g){pg(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||De(t,"ready");try{n.onreadystatechange=r}catch{}}}function pg(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(F.clearTimeout(t.A),t.A=null)}I.isActive=function(){return!!this.g};function Ot(t){return t.g?t.g.readyState:0}I.da=function(){try{return 2<Ot(this)?this.g.status:-1}catch{return-1}};I.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};I.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),tw(e)}};function Cp(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case dg:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function sw(t){let e={};t=(t.g&&2<=Ot(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(yi(t[r]))continue;var n=xE(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}AE(e,function(r){return r.join(", ")})}I.Ia=function(){return this.m};I.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function gg(t){let e="";return lc(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function wc(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=gg(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ne(t,e,n))}function hi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function mg(t){this.Ga=0,this.j=[],this.l=new Qs,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=hi("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=hi("baseRetryDelayMs",5e3,t),this.hb=hi("retryDelaySeedMs",1e4,t),this.eb=hi("forwardChannelMaxRetries",2,t),this.xa=hi("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new sg(t&&t.concurrentRequestLimit),this.Ja=new XE,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}I=mg.prototype;I.ra=8;I.H=1;function Cc(t){if(yg(t),t.H==3){var e=t.W++,n=Jt(t.I);if(ne(n,"SID",t.K),ne(n,"RID",e),ne(n,"TYPE","terminate"),Mi(t,n),e=new Ri(t,t.l,e),e.L=2,e.A=eo(Jt(n)),n=!1,F.navigator&&F.navigator.sendBeacon)try{n=F.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&F.Image&&(new Image().src=e.A,n=!0),n||(e.g=bg(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Oi(e)}Cg(t)}function ro(t){t.g&&(bc(t),t.g.cancel(),t.g=null)}function yg(t){ro(t),t.u&&(F.clearTimeout(t.u),t.u=null),Us(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&F.clearTimeout(t.m),t.m=null)}function io(t){if(!og(t.i)&&!t.m){t.m=!0;var e=t.Na;_i||Vp(),Si||(_i(),Si=!0),pc.add(e,t),t.C=0}}function ow(t,e){return ag(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Ai(Ne(t.Na,t,e),wg(t,t.C)),t.C++,!0)}I.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Ri(this,this.l,t),s=this.s;if(this.U&&(s?(s=xp(s),Np(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=vg(this,i,e),n=Jt(this.I),ne(n,"RID",t),ne(n,"CVER",22),this.F&&ne(n,"X-HTTP-Session-Id",this.F),Mi(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(gg(s)))+"&"+e:this.o&&wc(n,this.o,s)),Sc(this.i,i),this.bb&&ne(n,"TYPE","init"),this.P?(ne(n,"$req",e),ne(n,"SID","null"),i.aa=!0,ec(i,n,null)):ec(i,n,e),this.H=2}}else this.H==3&&(t?Tp(this,t):this.j.length==0||og(this.i)||Tp(this))};function Tp(t,e){var n;e?n=e.m:n=t.W++;let r=Jt(t.I);ne(r,"SID",t.K),ne(r,"RID",n),ne(r,"AID",t.V),Mi(t,r),t.o&&t.s&&wc(r,t.o,t.s),n=new Ri(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=vg(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Sc(t.i,n),ec(n,r,e)}function Mi(t,e){t.na&&lc(t.na,function(n,r){ne(e,r,n)}),t.h&&eg({},function(n,r){ne(e,r,n)})}function vg(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Ne(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=i[l].g,d=i[l].map;if(c-=s,0>c)s=Math.max(0,i[l].g-100),a=!1;else try{ZE(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function _g(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;_i||Vp(),Si||(_i(),Si=!0),pc.add(e,t),t.A=0}}function Tc(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Ai(Ne(t.Ma,t),wg(t,t.A)),t.A++,!0)}I.Ma=function(){if(this.u=null,Sg(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ai(Ne(this.jb,this),t)}};I.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,je(10),ro(this),Sg(this))};function bc(t){t.B!=null&&(F.clearTimeout(t.B),t.B=null)}function Sg(t){t.g=new Ri(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Jt(t.wa);ne(e,"RID","rpc"),ne(e,"SID",t.K),ne(e,"AID",t.V),ne(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ne(e,"TO",t.qa),ne(e,"TYPE","xmlhttp"),Mi(t,e),t.o&&t.s&&wc(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=eo(Jt(e)),n.u=null,n.S=!0,Yp(n,t)}I.ib=function(){this.v!=null&&(this.v=null,ro(this),Tc(this),je(19))};function Us(t){t.v!=null&&(F.clearTimeout(t.v),t.v=null)}function Eg(t,e){var n=null;if(t.g==e){Us(t),bc(t),t.g=null;var r=2}else if(nc(t.i,e))n=e.F,lg(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Ys(),De(r,new Hp(r,n)),io(t)}else _g(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&ow(t,e)||r==2&&Tc(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Hn(t,5);break;case 4:Hn(t,10);break;case 3:Hn(t,6);break;default:Hn(t,2)}}}function wg(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Hn(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Ne(t.pb,t);n||(n=new $n("//www.google.com/images/cleardot.gif"),F.location&&F.location.protocol=="http"||Bs(n,"https"),eo(n)),ew(n.toString(),r)}else je(2);t.H=0,t.h&&t.h.za(e),Cg(t),yg(t)}I.pb=function(t){t?(this.l.info("Successfully pinged google.com"),je(2)):(this.l.info("Failed to ping google.com"),je(1))};function Cg(t){if(t.H=0,t.ma=[],t.h){let e=cg(t.i);(e.length!=0||t.j.length!=0)&&(gp(t.ma,e),gp(t.ma,t.j),t.i.i.length=0,oc(t.j),t.j.length=0),t.h.ya()}}function Tg(t,e,n){var r=n instanceof $n?Jt(n):new $n(n);if(r.g!="")e&&(r.g=e+"."+r.g),Vs(r,r.m);else{var i=F.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new $n(null);r&&Bs(s,r),e&&(s.g=e),i&&Vs(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&ne(r,n,e),ne(r,"VER",t.ra),Mi(t,r),r}function bg(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new le(new xi({ob:n})):new le(t.va),e.Oa(t.J),e}I.isActive=function(){return!!this.h&&this.h.isActive(this)};function Ig(){}I=Ig.prototype;I.Ba=function(){};I.Aa=function(){};I.za=function(){};I.ya=function(){};I.isActive=function(){return!0};I.Va=function(){};function qs(){if(pr&&!(10<=Number(CE)))throw Error("Environmental error: no available transport.")}qs.prototype.g=function(t,e){return new Xe(t,e)};function Xe(t,e){Se.call(this),this.g=new mg(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!yi(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!yi(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new mr(this)}Ee(Xe,Se);Xe.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;je(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Tg(t,null,t.Y),io(t)};Xe.prototype.close=function(){Cc(this.g)};Xe.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=fc(t),t=n);e.j.push(new QE(e.fb++,t)),e.H==3&&io(e)};Xe.prototype.N=function(){this.g.h=null,delete this.j,Cc(this.g),delete this.g,Xe.$.N.call(this)};function Ag(t){vc.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Ee(Ag,vc);function Dg(){_c.call(this),this.status=1}Ee(Dg,_c);function mr(t){this.g=t}Ee(mr,Ig);mr.prototype.Ba=function(){De(this.g,"a")};mr.prototype.Aa=function(t){De(this.g,new Ag(t))};mr.prototype.za=function(t){De(this.g,new Dg)};mr.prototype.ya=function(){De(this.g,"b")};function aw(){this.blockSize=-1}function yt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ee(yt,aw);yt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function zl(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}yt.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)zl(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){zl(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){zl(this,r),i=0;break}}this.h=i,this.i+=e};yt.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function K(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var lw={};function Ic(t){return-128<=t&&128>t?SE(t,function(e){return new K([e|0],0>e?-1:0)}):new K([t|0],0>t?-1:0)}function xt(t){if(isNaN(t)||!isFinite(t))return fr;if(0>t)return Ae(xt(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=rc;return new K(e,0)}function Rg(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ae(Rg(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=xt(Math.pow(e,8)),r=fr,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=xt(Math.pow(e,s)),r=r.R(s).add(xt(o))):(r=r.R(n),r=r.add(xt(o)))}return r}var rc=4294967296,fr=Ic(0),ic=Ic(1),bp=Ic(16777216);I=K.prototype;I.ea=function(){if(rt(this))return-Ae(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:rc+r)*e,e*=rc}return t};I.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Yt(this))return"0";if(rt(this))return"-"+Ae(this).toString(t);for(var e=xt(Math.pow(t,6)),n=this,r="";;){var i=js(n,e).g;n=zs(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Yt(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};I.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Yt(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function rt(t){return t.h==-1}I.X=function(t){return t=zs(this,t),rt(t)?-1:Yt(t)?0:1};function Ae(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new K(n,~t.h).add(ic)}I.abs=function(){return rt(this)?Ae(this):this};I.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new K(n,n[n.length-1]&-2147483648?-1:0)};function zs(t,e){return t.add(Ae(e))}I.R=function(t){if(Yt(this)||Yt(t))return fr;if(rt(this))return rt(t)?Ae(this).R(Ae(t)):Ae(Ae(this).R(t));if(rt(t))return Ae(this.R(Ae(t)));if(0>this.X(bp)&&0>t.X(bp))return xt(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,Ls(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Ls(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Ls(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Ls(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new K(n,0)};function Ls(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function fi(t,e){this.g=t,this.h=e}function js(t,e){if(Yt(e))throw Error("division by zero");if(Yt(t))return new fi(fr,fr);if(rt(t))return e=js(Ae(t),e),new fi(Ae(e.g),Ae(e.h));if(rt(e))return e=js(t,Ae(e)),new fi(Ae(e.g),e.h);if(30<t.g.length){if(rt(t)||rt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=ic,r=e;0>=r.X(t);)n=Ip(n),r=Ip(r);var i=dr(n,1),s=dr(r,1);for(r=dr(r,2),n=dr(n,2);!Yt(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=dr(r,1),n=dr(n,1)}return e=zs(t,i.R(e)),new fi(i,e)}for(i=fr;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=xt(n),o=s.R(e);rt(o)||0<o.X(t);)n-=r,s=xt(n),o=s.R(e);Yt(s)&&(s=ic),i=i.add(s),t=zs(t,o)}return new fi(i,t)}I.gb=function(t){return js(this,t).h};I.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new K(n,this.h&t.h)};I.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new K(n,this.h|t.h)};I.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new K(n,this.h^t.h)};function Ip(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new K(n,t.h)}function dr(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new K(i,t.h)}qs.prototype.createWebChannel=qs.prototype.g;Xe.prototype.send=Xe.prototype.u;Xe.prototype.open=Xe.prototype.m;Xe.prototype.close=Xe.prototype.close;Js.NO_ERROR=0;Js.TIMEOUT=8;Js.HTTP_ERROR=6;$p.COMPLETE="complete";Wp.EventType=Di;Di.OPEN="a";Di.CLOSE="b";Di.ERROR="c";Di.MESSAGE="d";Se.prototype.listen=Se.prototype.O;le.prototype.listenOnce=le.prototype.P;le.prototype.getLastError=le.prototype.Sa;le.prototype.getLastErrorCode=le.prototype.Ia;le.prototype.getStatus=le.prototype.da;le.prototype.getResponseJson=le.prototype.Wa;le.prototype.getResponseText=le.prototype.ja;le.prototype.send=le.prototype.ha;le.prototype.setWithCredentials=le.prototype.Oa;yt.prototype.digest=yt.prototype.l;yt.prototype.reset=yt.prototype.reset;yt.prototype.update=yt.prototype.j;K.prototype.add=K.prototype.add;K.prototype.multiply=K.prototype.R;K.prototype.modulo=K.prototype.gb;K.prototype.compare=K.prototype.X;K.prototype.toNumber=K.prototype.ea;K.prototype.toString=K.prototype.toString;K.prototype.getBits=K.prototype.D;K.fromNumber=xt;K.fromString=Rg;var Vx=vt.createWebChannelTransport=function(){return new qs},Ux=vt.getStatEventTarget=function(){return Ys()},qx=vt.ErrorCode=Js,zx=vt.EventType=$p,jx=vt.Event=Wn,Gx=vt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Hx=vt.FetchXmlHttpFactory=xi,$x=vt.WebChannel=Wp,Wx=vt.XhrIo=le,cw=vt.Md5=yt,Og=vt.Integer=K;var df=_f(i_(),1),IR=_f(Ed(),1);var s_="@firebase/firestore",o_="4.4.3";var Ve=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ve.UNAUTHENTICATED=new Ve(null);Ve.GOOGLE_CREDENTIALS=new Ve("google-credentials-uid");Ve.FIRST_PARTY=new Ve("first-party-uid");Ve.MOCK_USER=new Ve("mock-user");var AR="10.8.1";var ys=AR;function DR(t){ys=t}function RR(t){return TR(t,{depth:100})}var nl=new cr("@firebase/firestore");function gt(t,...e){if(nl.logLevel<=Y.DEBUG){let n=e.map(v_);nl.debug(`Firestore (${ys}): ${t}`,...n)}}function hf(t,...e){if(nl.logLevel<=Y.ERROR){let n=e.map(v_);nl.error(`Firestore (${ys}): ${t}`,...n)}}function v_(t){if(typeof t=="string")return t;try{return RR(t)}catch{return t}}function nt(t="Unexpected state"){let e=`FIRESTORE (${ys}) INTERNAL ASSERTION FAILED: `+t;throw hf(e),new Error(e)}function Hh(t,e){t||nt()}var be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ve=class extends Qt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var zn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var $h=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Wh=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ve.UNAUTHENTICATED))}shutdown(){}};var Kh=class{constructor(e){this.authProvider=e,this.currentUser=Ve.UNAUTHENTICATED,this.tokenCounter=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.tokenCounter,i=l=>this.tokenCounter!==r?(r=this.tokenCounter,n(l)):Promise.resolve(),s=new zn;this.tokenListener=()=>{this.tokenCounter++,this.currentUser=this.getUser(),s.resolve(),s=new zn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>k(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},a=l=>{gt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.tokenListener),o()};this.authProvider.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.authProvider.getImmediate({optional:!0});l?a(l):(gt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new zn)}},0),o()}getToken(){let e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.tokenCounter!==e?(gt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Hh(typeof r.accessToken=="string"),new $h(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.tokenListener)}getUser(){let e=this.auth&&this.auth.getUid();return Hh(e===null||typeof e=="string"),new Ve(e)}},Qh=class{constructor(e,n,r){this.sessionIndex=e,this.iamToken=n,this.authTokenFactory=r,this.type="FirstParty",this.user=Ve.FIRST_PARTY,this._headers=new Map}getAuthToken(){return this.authTokenFactory?this.authTokenFactory():null}get headers(){this._headers.set("X-Goog-AuthUser",this.sessionIndex);let e=this.getAuthToken();return e&&this._headers.set("Authorization",e),this.iamToken&&this._headers.set("X-Goog-Iam-Authorization-Token",this.iamToken),this._headers}},Yh=class{constructor(e,n,r){this.sessionIndex=e,this.iamToken=n,this.authTokenFactory=r}getToken(){return Promise.resolve(new Qh(this.sessionIndex,this.iamToken,this.authTokenFactory))}start(e,n){e.enqueueRetryable(()=>n(Ve.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Jh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Xh=class{constructor(e){this.appCheckProvider=e,this.forceRefresh=!1,this.appCheck=null,this.latestAppCheckToken=null}start(e,n){let r=s=>{s.error!=null&&gt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.latestAppCheckToken;return this.latestAppCheckToken=s.token,gt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.tokenListener=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{gt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.tokenListener)};this.appCheckProvider.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.appCheckProvider.getImmediate({optional:!0});s?i(s):gt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Hh(typeof n.token=="string"),this.latestAppCheckToken=n.token,new Jh(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.tokenListener)}};function OR(t){if(!t)return new Wh;switch(t.type){case"firstParty":return new Yh(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ve(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}function xR(t){return bR(t)}var Zh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="",i=20;for(;r.length<i;){let s=xR(40);for(let o=0;o<s.length;++o)r.length<i&&s[o]<n&&(r+=e.charAt(s[o]%e.length))}return r}};function rl(t,e){return t<e?-1:t>e?1:0}var a_=-62135596800,l_=1e6,ms=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ve(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ve(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<a_)throw new ve(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-n*1e3)*l_);return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return this.seconds*1e3+this.nanoseconds/l_}_compareTo(e){return this.seconds===e.seconds?rl(this.nanoseconds,e.nanoseconds):rl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-a_,n=String(e).padStart(12,"0"),r=String(this.nanoseconds).padStart(9,"0");return n+"."+r}};var ef=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&nt(),r===void 0?r=e.length-n:r>e.length-n&&nt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},qn=class t extends ef{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new ve(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}};var ir=class t{constructor(e){this.path=e}static fromPath(e){return new t(qn.fromString(e))}static fromName(e){return new t(qn.fromString(e).popFirst(5))}static empty(){return new t(qn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2===0}static fromSegments(e){return new t(new qn(e.slice()))}};function __(t){return t.name==="IndexedDbTransactionError"}var Tk=15*1e3,bk=60*1e3;var NR="remoteDocuments";var S_="owner";var E_="mutationQueues";var w_="mutations";var C_="documentMutations",MR="remoteDocumentsV14";var T_="remoteDocumentGlobal";var b_="targets";var I_="targetDocuments";var A_="targetGlobal",D_="collectionParents";var R_="clientMetadata";var O_="bundles";var x_="namedQueries";var kR="indexConfiguration";var PR="indexState";var FR="indexEntries";var N_="documentOverlays";var LR=[E_,w_,C_,NR,b_,S_,A_,I_],BR=LR,VR=[...BR,R_],UR=[...VR,T_],qR=[...UR,D_],zR=[...qR,O_,x_],Ik=[...zR,N_],jR=[E_,w_,C_,MR,b_,S_,A_,I_,R_,T_,D_,O_,x_,N_],GR=jR,Ak=[...GR,kR,PR,FR];var si=class t{constructor(e,n){this.comparator=e,this.root=n||gs.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gs.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gs.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ii(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ii(this.root,e,this.comparator,!1)}getReverseIterator(){return new ii(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ii(this.root,e,this.comparator,!0)}},ii=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)this.isReverse?e=e.left:e=e.right;else if(s===0){this.nodeStack.push(e);break}else this.nodeStack.push(e),this.isReverse?e=e.right:e=e.left}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},gs=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let n=this;return!n.left.isRed()&&!n.left.left.isRed()&&(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,r){let i,s=this;if(r(n,s.key)<0)!s.left.isEmpty()&&!s.left.isRed()&&!s.left.left.isRed()&&(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(n,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),!s.right.isEmpty()&&!s.right.isRed()&&!s.right.left.isRed()&&(s=s.moveRedRight()),r(n,s.key)===0){if(s.right.isEmpty())return t.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(n,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth(){let n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();let n=this.left.check();if(n!==this.right.check())throw nt();return n+(this.isRed()?0:1)}}return t.EMPTY=null,t.RED=!0,t.BLACK=!1,t})(),tf=class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new gs(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};gs.EMPTY=new tf;var il=class t{constructor(e){this.comparator=e,this.data=new si(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(n!==void 0?r=this.data.getIteratorFrom(n):r=this.data.getIterator();r.hasNext();){let i=r.getNext();if(!e(i.key))return}}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new sl(this.data.getIterator())}getIteratorFrom(e){return new sl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},sl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function HR(t){return Buffer.from(t,"base64").toString("binary")}function $R(t){return Buffer.from(t,"binary").toString("base64")}var oi=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=HR(e);return new t(n)}static fromUint8Array(e){let n=WR(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return $R(this.binaryString)}toUint8Array(){return KR(this.binaryString)}approximateByteSize(){return this.binaryString.length*2}compareTo(e){return rl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};oi.EMPTY_BYTE_STRING=new oi("");function WR(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}function KR(t){let e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}var Dk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function c_(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function QR(t){return typeof t=="string"?oi.fromBase64String(t):oi.fromUint8Array(t)}var nf=class{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}},u_="(default)",rf=class t{constructor(e,n){this.projectId=e,this.database=n||u_}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===u_}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};function YR(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ve(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rf(t.options.projectId,e)}function JR(t){return t===0&&1/t===-1/0}var XR="__max__";function ZR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===XR}var Rk=new si(ir.comparator);var Ok=new si(ir.comparator);var xk=new si(ir.comparator);var Nk=new il(ir.comparator);var Mk=new il(rl);var kk=new Og([4294967295,4294967295],0);var Pk=(()=>{let t={};return t.asc="ASCENDING",t.desc="DESCENDING",t})(),Fk=(()=>{let t={};return t["<"]="LESS_THAN",t["<="]="LESS_THAN_OR_EQUAL",t[">"]="GREATER_THAN",t[">="]="GREATER_THAN_OR_EQUAL",t["=="]="EQUAL",t["!="]="NOT_EQUAL",t["array-contains"]="ARRAY_CONTAINS",t.in="IN",t["not-in"]="NOT_IN",t["array-contains-any"]="ARRAY_CONTAINS_ANY",t})(),Lk=(()=>{let t={};return t.and="AND",t.or="OR",t})();var eO=5,tO=10,nO=13,d_=15,rO=20,iO=25,sO=30,oO=37,aO=45,lO=50,cO=55,uO=60,dO=2,ol=class{constructor(){}writeIndexValue(e,n){this.writeIndexValueAux(e,n),n.writeInfinity()}writeIndexValueAux(e,n){if("nullValue"in e)this.writeValueTypeLabel(n,eO);else if("booleanValue"in e)this.writeValueTypeLabel(n,tO),n.writeNumber(e.booleanValue?1:0);else if("integerValue"in e)this.writeValueTypeLabel(n,d_),n.writeNumber(c_(e.integerValue));else if("doubleValue"in e){let r=c_(e.doubleValue);isNaN(r)?this.writeValueTypeLabel(n,nO):(this.writeValueTypeLabel(n,d_),JR(r)?n.writeNumber(0):n.writeNumber(r))}else if("timestampValue"in e){let r=e.timestampValue;this.writeValueTypeLabel(n,rO),typeof r=="string"?n.writeString(r):(n.writeString(`${r.seconds||""}`),n.writeNumber(r.nanos||0))}else if("stringValue"in e)this.writeIndexString(e.stringValue,n),this.writeTruncationMarker(n);else if("bytesValue"in e)this.writeValueTypeLabel(n,sO),n.writeBytes(QR(e.bytesValue)),this.writeTruncationMarker(n);else if("referenceValue"in e)this.writeIndexEntityRef(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.writeValueTypeLabel(n,aO),n.writeNumber(r.latitude||0),n.writeNumber(r.longitude||0)}else"mapValue"in e?ZR(e)?this.writeValueTypeLabel(n,Number.MAX_SAFE_INTEGER):(this.writeIndexMap(e.mapValue,n),this.writeTruncationMarker(n)):"arrayValue"in e?(this.writeIndexArray(e.arrayValue,n),this.writeTruncationMarker(n)):nt()}writeIndexString(e,n){this.writeValueTypeLabel(n,iO),this.writeUnlabeledIndexString(e,n)}writeUnlabeledIndexString(e,n){n.writeString(e)}writeIndexMap(e,n){let r=e.fields||{};this.writeValueTypeLabel(n,cO);for(let i of Object.keys(r))this.writeIndexString(i,n),this.writeIndexValueAux(r[i],n)}writeIndexArray(e,n){let r=e.values||[];this.writeValueTypeLabel(n,lO);for(let i of r)this.writeIndexValueAux(i,n)}writeIndexEntityRef(e,n){this.writeValueTypeLabel(n,oO),ir.fromName(e).path.forEach(i=>{this.writeValueTypeLabel(n,uO),this.writeUnlabeledIndexString(i,n)})}writeValueTypeLabel(e,n){e.writeNumber(n)}writeTruncationMarker(e){e.writeNumber(dO)}};ol.INSTANCE=new ol;var Bk=new Uint8Array(0);var M_=-1,k_=40*1024*1024,Kt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Kt.DEFAULT_COLLECTION_PERCENTILE=10;Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3;Kt.DEFAULT=new Kt(k_,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT);Kt.DISABLED=new Kt(M_,0,0);var h_=1*1024*1024,Vk=1*60*1e3,Uk=5*60*1e3;var qk=30*60*1e3;var zk=5*60*1e6;var hO="1.9.1";var jk=`gl-node/${process.versions.node} fire/${ys} grpc/${hO}`;var fO="ExponentialBackoff",pO=1e3,gO=1.5,mO=60*1e3,sf=class{constructor(e,n,r=pO,i=gO,s=mO){this.queue=e,this.timerId=n,this.initialDelayMs=r,this.backoffFactor=i,this.maxDelayMs=s,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}reset(){this.currentBaseMs=0}resetToMax(){this.currentBaseMs=this.maxDelayMs}backoffAndRun(e){this.cancel();let n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);i>0&&gt(fO,`Backing off for ${i} ms (base delay: ${this.currentBaseMs} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,()=>(this.lastAttemptTime=Date.now(),e())),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)}skipBackoff(){this.timerPromise!==null&&(this.timerPromise.skipDelay(),this.timerPromise=null)}cancel(){this.timerPromise!==null&&(this.timerPromise.cancel(),this.timerPromise=null)}jitterDelayMs(){return(Math.random()-.5)*this.currentBaseMs}};var Gk=60*1e3,Hk=10*1e3;var $k=10*1e3;var yO="AsyncQueue",of=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function vO(t,e){if(hf(yO,`${e}: ${t}`),__(t))return new ve(be.UNAVAILABLE,`${e}: ${t}`);throw t}function _O(t,e,n,r){if(e===!0&&r===!0)throw new ve(be.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}var f_="FirestoreClient",SO=100;var af=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ve.UNAUTHENTICATED,this.clientId=Zh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>k(this,null,function*(){gt(f_,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(gt(f_,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:SO}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ve(be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>k(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=vO(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function EO(t,e){return t.timeoutSeconds===e.timeoutSeconds}function P_(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var wO="ComponentProvider",p_=new Map;function CO(t){let e=p_.get(t);e&&(gt(wO,"Removing Datastore"),p_.delete(t),e.terminate())}function TO(t,e,n,r){return new nf(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,P_(r.experimentalLongPollingOptions),r.useFetchStreams)}var bO="firestore.googleapis.com",g_=!0,m_=5,y_=30,IO=!0,al=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bO,this.ssl=g_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:g_;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=k_;else{if(e.cacheSizeBytes!==M_&&e.cacheSizeBytes<h_)throw new ve(be.INVALID_ARGUMENT,`cacheSizeBytes must be at least ${h_}`);this.cacheSizeBytes=e.cacheSizeBytes}_O("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=IO:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=P_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),AO(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&EO(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}};function AO(t){if(t.timeoutSeconds!==void 0){if(isNaN(t.timeoutSeconds))throw new ve(be.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<m_)throw new ve(be.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is ${m_})`);if(t.timeoutSeconds>y_)throw new ve(be.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is ${y_})`)}}var lf=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new al({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ve(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ve(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new al(e),e.credentials!==void 0&&(this._authCredentials=OR(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return CO(this),Promise.resolve()}};var DO="AsyncQueue",cf=class{constructor(){this.tail=Promise.resolve(),this.retryableOps=[],this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.skipNonRestrictedTasks=!1,this.timerIdsToSkip=[],this.backoff=new sf(this,"async_queue_retry"),this.visibilityHandler=()=>{this.backoff.skipBackoff()}}get isShuttingDown(){return this._isShuttingDown}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.verifyNotFailed(),this.enqueueInternal(e)}enterRestrictedMode(e){this._isShuttingDown||(this._isShuttingDown=!0,this.skipNonRestrictedTasks=e||!1)}enqueue(e){if(this.verifyNotFailed(),this._isShuttingDown)return new Promise(()=>{});let n=new zn;return this.enqueueInternal(()=>this._isShuttingDown&&this.skipNonRestrictedTasks?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.retryableOps.push(e),this.retryNextOp()))}retryNextOp(){return k(this,null,function*(){if(this.retryableOps.length!==0){try{yield this.retryableOps[0](),this.retryableOps.shift(),this.backoff.reset()}catch(e){if(__(e))gt(DO,"Operation failed with retryable error: "+e);else throw e}this.retryableOps.length>0&&this.backoff.backoffAndRun(()=>this.retryNextOp())}})}enqueueInternal(e){let n=this.tail.then(()=>(this.operationInProgress=!0,e().catch(r=>{this.failure=r,this.operationInProgress=!1;let i=OO(r);throw hf("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.operationInProgress=!1,r))));return this.tail=n,n}enqueueAfterDelay(e,n,r){this.verifyNotFailed(),this.timerIdsToSkip.indexOf(e)>-1&&(n=0);let i=of.createAndSchedule(this,e,n,r,s=>this.removeDelayedOperation(s));return this.delayedOperations.push(i),i}verifyNotFailed(){this.failure&&nt()}verifyOperationInProgress(){}drain(){return k(this,null,function*(){let e;do e=this.tail,yield e;while(e!==this.tail)})}containsDelayedOperation(e){for(let n of this.delayedOperations)if(n.timerId===e)return!0;return!1}runAllDelayedOperationsUntil(e){return this.drain().then(()=>{this.delayedOperations.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.delayedOperations)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.drain()})}skipDelaysForTimerId(e){this.timerIdsToSkip.push(e)}removeDelayedOperation(e){let n=this.delayedOperations.indexOf(e);this.delayedOperations.splice(n,1)}};function RO(){return new cf}function OO(t){let e=t.message||"";return t.stack&&(t.stack.includes(t.message)?e=t.stack:e=t.message+`
`+t.stack),e}var uf=class extends lf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=RO(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||xO(this),this._firestoreClient.terminate()}};function xO(t){var e,n,r;let i=t._freezeSettings(),s=TO(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new af(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function NO(t,e=!0){DR(hp),ui(new dn("firestore",(n,{instanceIdentifier:r,options:i})=>{let s=n.getProvider("app").getImmediate(),o=new uf(new Kh(n.getProvider("auth-internal")),new Xh(n.getProvider("app-check-internal")),YR(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),ur(s_,o_,t),ur(s_,o_,"esm2017")}var Wk=new RegExp("[~\\*/\\[\\]]");NO("node");var G_=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(ze(_l),ze(gl))},e.\u0275dir=or({type:e});let t=e;return t})(),MO=(()=>{let e=class e extends G_{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Of(e)))(s||e)}})(),e.\u0275dir=or({type:e,features:[li]});let t=e;return t})(),H_=new ar("");var kO={provide:H_,useExisting:vl(()=>dl),multi:!0};function PO(){let t=Cl()?Cl().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var FO=new ar(""),dl=(()=>{let e=class e extends G_{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!PO())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(ze(_l),ze(gl),ze(FO,8))},e.\u0275dir=or({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&un("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[wl([kO]),li]});let t=e;return t})();var LO=new ar(""),BO=new ar("");function $_(t){return t!=null}function W_(t){return Bf(t)?Sf(t):t}function K_(t){let e={};return t.forEach(n=>{e=n!=null?At(At({},e),n):e}),Object.keys(e).length===0?null:e}function Q_(t,e){return e.map(n=>n(t))}function VO(t){return!t.validate}function Y_(t){return t.map(e=>VO(e)?e:n=>e.validate(n))}function UO(t){if(!t)return null;let e=t.filter($_);return e.length==0?null:function(n){return K_(Q_(n,e))}}function J_(t){return t!=null?UO(Y_(t)):null}function qO(t){if(!t)return null;let e=t.filter($_);return e.length==0?null:function(n){let r=Q_(n,e).map(W_);return wf(r).pipe(Ef(K_))}}function X_(t){return t!=null?qO(Y_(t)):null}function F_(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function zO(t){return t._rawValidators}function jO(t){return t._rawAsyncValidators}function ff(t){return t?Array.isArray(t)?t:[t]:[]}function cl(t,e){return Array.isArray(t)?t.includes(e):t===e}function L_(t,e){let n=ff(e);return ff(t).forEach(i=>{cl(n,i)||n.push(i)}),n}function B_(t,e){return ff(e).filter(n=>!cl(t,n))}var ul=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=J_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=X_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},pf=class extends ul{get formDirective(){return null}get path(){return null}},Ss=class extends ul{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},gf=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},GO={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},vP=cn(At({},GO),{"[class.ng-submitted]":"isSubmitted"}),Z_=(()=>{let e=class e extends gf{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ze(Ss,2))},e.\u0275dir=or({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Nf("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[li]});let t=e;return t})();var vs="VALID",ll="INVALID",ai="PENDING",_s="DISABLED";function HO(t){return(hl(t)?t.validators:t)||null}function $O(t){return Array.isArray(t)?J_(t):t||null}function WO(t,e){return(hl(e)?e.asyncValidators:t)||null}function KO(t){return Array.isArray(t)?X_(t):t||null}function hl(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var mf=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===vs}get invalid(){return this.status===ll}get pending(){return this.status==ai}get disabled(){return this.status===_s}get enabled(){return this.status!==_s}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(L_(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(L_(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(B_(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(B_(e,this._rawAsyncValidators))}hasValidator(e){return cl(this._rawValidators,e)}hasAsyncValidator(e){return cl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ai,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=_s,this.errors=null,this._forEachChild(r=>{r.disable(cn(At({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(cn(At({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=vs,this._forEachChild(r=>{r.enable(cn(At({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(cn(At({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vs||this.status===ai)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_s:vs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ai,this._hasOwnPendingAsyncValidator=!0;let n=W_(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ws,this.statusChanges=new ws}_calculateStatus(){return this._allControlsDisabled()?_s:this.errors?ll:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ai)?ai:this._anyControlsHaveStatus(ll)?ll:vs}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){hl(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=$O(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=KO(this._rawAsyncValidators)}};var eS=new ar("CallSetDisabledState",{providedIn:"root",factory:()=>yf}),yf="always";function QO(t,e){return[...e.path,t]}function YO(t,e,n=yf){XO(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),ZO(t,e),tx(t,e),ex(t,e),JO(t,e)}function V_(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function JO(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function XO(t,e){let n=zO(t);e.validator!==null?t.setValidators(F_(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=jO(t);e.asyncValidator!==null?t.setAsyncValidators(F_(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();V_(e._rawValidators,i),V_(e._rawAsyncValidators,i)}function ZO(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&tS(t,e)})}function ex(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&tS(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function tS(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function tx(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function nx(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function rx(t){return Object.getPrototypeOf(t.constructor)===MO}function ix(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===dl?n=s:rx(s)?r=s:i=s}),i||r||n||null}function U_(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function q_(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var sx=class extends mf{constructor(e=null,n,r){super(HO(n),WO(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hl(n)&&(n.nonNullable||n.initialValueIsDefault)&&(q_(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){U_(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){U_(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){q_(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var ox={provide:Ss,useExisting:vl(()=>vf)},z_=Promise.resolve(),vf=(()=>{let e=class e extends Ss{constructor(r,i,s,o,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new sx,this._registered=!1,this.name="",this.update=new ws,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=ix(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),nx(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){YO(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){z_.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Vf(i);z_.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?QO(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(ze(pf,9),ze(LO,10),ze(BO,10),ze(H_,10),ze(xf,8),ze(eS,8))},e.\u0275dir=or({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Cs.None,"disabled","isDisabled"],model:[Cs.None,"ngModel","model"],options:[Cs.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[wl([ox]),li,Rf]});let t=e;return t})();var ax=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pl({type:e}),e.\u0275inj=yl({});let t=e;return t})();var nS=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:eS,useValue:r.callSetDisabledState??yf}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pl({type:e}),e.\u0275inj=yl({imports:[ax]});let t=e;return t})();var rS=(()=>{let e=class e{constructor(r){this.http=r,this.apiURL="https://raj-project.onrender.com/attendance",this.httpOptions={headers:new Hf({"Content-Type":"application/json"})}}getAttedanceData(){return this.http.get(this.apiURL)}};e.\u0275fac=function(i){return new(i||e)(Df($f))},e.\u0275prov=ml({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ux(t,e){if(t&1&&(de(0,"tr",3)(1,"td",21),If(),de(2,"svg",22),lr(3,"path",23)(4,"path",24)(5,"path",25)(6,"path",26)(7,"path",27)(8,"path",28)(9,"path",29)(10,"path",30)(11,"path",31)(12,"path",32)(13,"path",33)(14,"path",34),de(15,"g",35),lr(16,"path",36)(17,"path",37),he(),lr(18,"path",38)(19,"path",39)(20,"path",40),he(),We(21),he(),Af(),de(22,"td",41),We(23),he(),de(24,"td",41),We(25),he(),de(26,"td",42),We(27),Ff(28,"date"),he()()),t&2){let n=e.$implicit,r=bs();mt(21),El(" ",n.name," "),mt(2),Is(n.id),mt(2),Is(n.className),mt(2),Is(Lf(28,4,r.ConvertImeStampToDate(n.timeStamp),"M/d/yy, h:mm a"))}}var dx=t=>({active:t});function hx(t,e){if(t&1){let n=Mf();de(0,"a",43),un("click",function(){let s=Tf(n).index,o=bs();return bf(o.goToPage(s+1))}),We(1),he()}if(t&2){let n=e.index,r=bs();Ts("ngClass",Pf(2,dx,n==r.currentPage-1)),mt(),El("",n+1," ")}}var iS=(()=>{let e=class e{constructor(r){this.restApi=r,this.currentPage=1,this.itemsPerPage=5,this.totalPages=1,this.nameFilter="",this.classFilter="",this.dateFilter="",this.title="raj-FE"}ngOnInit(){this.restApi.getAttedanceData().subscribe(r=>{this.data=r,this.totalPages=Math.ceil(this.data?.length/this.itemsPerPage),this.data?.length>this.itemsPerPage&&(this.displayData=this.data.slice(0,this.itemsPerPage),console.log(this.data.slice(3,3)))})}ConvertImeStampToDate(r){return new ms(r?._seconds,r?._nanoseconds).toDate()}counter(r){return new Array(r)}goToPage(r){r>this.totalPages?r=this.totalPages:r<1?r=1:this.currentPage=r;let i=(this.currentPage-1)*this.itemsPerPage;this.displayData=this.data.slice(i,i+this.itemsPerPage)}filterData(){let r=this.data.filter(i=>i.name.includes(this.nameFilter)&&i.className.includes(this.classFilter));this.dateFilter&&(console.log(typeof this.dateFilter),r=r.filter(i=>{let s=new ms(i.timeStamp?._seconds,i.timeStamp?._nanoseconds),o=new Date(this.dateFilter);return s.toDate().getDate()===o.getDate()})),this.totalPages=Math.ceil(r?.length/this.itemsPerPage),this.currentPage=1,this.displayData=r.slice(0,this.itemsPerPage)}resetData(){this.nameFilter=this.classFilter=this.dateFilter="",this.totalPages=Math.ceil(this.data?.length/this.itemsPerPage),this.currentPage=1,this.data?.length>this.itemsPerPage&&(this.displayData=this.data.slice(0,this.itemsPerPage),console.log(this.data.slice(3,3)))}};e.\u0275fac=function(i){return new(i||e)(ze(rS))},e.\u0275cmp=Cf({type:e,selectors:[["app-root"]],standalone:!0,features:[kf],decls:39,vars:5,consts:[[1,"container"],[1,"responsive-table"],[1,"responsive-table__head"],[1,"responsive-table__row"],[1,"responsive-table__head__title","responsive-table__head__title--name"],["type","text","id","filter0","placeholder","Filter By Name",1,"form-control","filter",3,"ngModel","ngModelChange"],["type","text","id","filter0","placeholder","Filter By Roll Number",1,"form-control","filter"],["type","text","id","filter0","placeholder","Filter By Class Name",1,"form-control","filter",3,"ngModel","ngModelChange"],["type","date","id","filter0",1,"form-control","filter",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",2,"width","75px","margin-right","10px","height","30px",3,"click"],["type","button",1,"btn","btn-danger",2,"width","75px","height","30px",3,"click"],[1,"fa-solid","fa-caret-down"],[1,"responsive-table__head__title","responsive-table__head__title--status"],[1,"responsive-table__head__title","responsive-table__head__title--update"],[1,"responsive-table__body"],["class","responsive-table__row",4,"ngFor","ngForOf"],["colspan","0",1,"responsive-table__head__title","responsive-table__head__title--name",2,"width","493px"],[1,"pagination"],["href","#","id","left",3,"click"],["href","#",3,"ngClass","click",4,"ngFor","ngForOf"],["href","#","id","right",3,"click"],[1,"responsive-table__body__text","responsive-table__body__text--name"],["enable-background","new 0 0 512 512","height","512","viewBox","0 0 512 512","width","512","xmlns","http://www.w3.org/2000/svg",1,"user-icon"],["d","m256.025 483.334 101.429-25.614c57.895-48.074 94.771-120.586 94.771-201.719 0-125.144-87.711-229.801-205.012-255.852-137.316 4.631-247.213 117.407-247.213 255.851 0 71.112 29 135.446 75.812 181.836z","fill","#cbe2ff"],["d","m446.914 256c0 83.915-40.381 158.391-102.765 205.079l92.031-23.241c46.815-46.39 75.82-110.724 75.82-181.838 0-141.385-114.615-256-256-256-11.024 0-21.886.698-32.543 2.05 126.019 15.988 223.457 123.59 223.457 253.95z","fill","#bed8fb"],["d","m319.621 96.952c0-13.075-10.599-23.674-23.674-23.674h-81.582c-30.091 0-54.485 24.394-54.485 54.485v60.493h192.209v-59.635c0-13.075-10.599-23.674-23.674-23.674h-.798c-4.416 0-7.996-3.579-7.996-7.995z","fill","#365e7d"],["d","m328.415 104.947h-.798c-4.416 0-7.996-3.58-7.996-7.996 0-13.075-10.599-23.674-23.674-23.674h-8.945v114.978h65.086v-59.635c.001-13.073-10.599-23.673-23.673-23.673z","fill","#2b4d66"],["d","m425.045 372.355c-6.259-6.182-14.001-10.963-22.79-13.745l-69.891-22.128-76.348-2.683-76.38 2.683-69.891 22.128c-23.644 7.486-39.713 29.428-39.713 54.229v19.094c44.789 47.328 107.451 77.568 177.183 79.92 78.128-17.353 143.129-69.576 177.83-139.498z","fill","#4a80aa"],["d","m441.968 431.932v-19.094c0-17.536-8.04-33.635-21.105-44.213-37.111 75.626-110.422 130.268-197.346 141.317 10.492 1.329 21.178 2.038 32.026 2.057 10.423-.016 20.708-.62 30.824-1.782 61.031-7.212 115.485-35.894 155.601-78.285z","fill","#407093"],["d","m261.796 508.168c15.489-30.751 55.822-118.067 44.321-172.609l-50.101-19.499-50.148 19.5c-11.856 56.225 31.37 147.277 45.681 175.29 3.442-.826 6.859-1.721 10.247-2.682z","fill","#e4f6ff"],["d","m288.197 483.789-20.314-79.917h-23.767l-20.264 79.699 25.058 27.897c6.361-1.457 12.634-3.146 18.81-5.057z","fill","#e28086"],["d","m249.302 511.905c2.075.054 4.154.091 6.241.095 2.415-.004 4.822-.046 7.222-.113l12.907-14.259c-10.159 3.564-20.61 6.506-31.309 8.779z","fill","#dd636e"],["d","m298.774 328.183v-45.066h-85.58v45.066c0 23.632 42.79 49.446 42.79 49.446s42.79-25.814 42.79-49.446z","fill","#ffddce"],["d","m352.089 180.318h-16.359c-9.098 0-16.473-7.375-16.473-16.473v-9.015c0-11.851-11.595-20.23-22.847-16.511-26.243 8.674-54.579 8.676-80.823.006l-.031-.01c-11.252-3.717-22.845 4.662-22.845 16.512v9.019c0 9.098-7.375 16.473-16.473 16.473h-16.358v26.938c0 6.883 5.58 12.464 12.464 12.464 2.172 0 3.939 1.701 4.076 3.869 2.628 41.668 37.235 74.654 79.565 74.654 42.33 0 76.937-32.986 79.565-74.654.137-2.167 1.904-3.869 4.076-3.869 6.883 0 12.464-5.58 12.464-12.464v-26.939z","fill","#ffddce"],["d","m335.73 180.318c-9.098 0-16.473-7.375-16.473-16.473v-9.015c0-11.851-11.595-20.23-22.847-16.511-3.108 1.027-6.247 1.923-9.407 2.707v88.972c-.438 28.948-16.3 54.142-39.725 67.758 2.861.311 5.763.486 8.706.486 42.33 0 76.937-32.986 79.565-74.654.137-2.167 1.904-3.869 4.076-3.869 6.883 0 12.464-5.58 12.464-12.464v-26.938h-16.359z","fill","#ffcbbe"],["fill","#f4fbff"],["d","m213.194 316.06-33.558 27.267 35.192 43.513c4.281 4.168 11.019 4.424 15.605.594l26.465-22.107z"],["d","m298.79 316.06-41.892 49.267 24.874 21.268c4.557 3.896 11.327 3.7 15.651-.453l34.94-42.815z"],["d","m213.194 316.06-49.256 24.199c-3.75 1.842-5.256 6.404-3.341 10.117l9.65 18.71c2.501 4.848 1.578 10.756-2.282 14.61-1.987 1.983-4.139 4.131-6.004 5.993-3.338 3.332-4.537 8.255-3.067 12.737 11.651 35.517 67.725 89.828 88.946 109.478 1.427.038 2.857.064 4.29.08-15.389-29.933-69.922-143.655-38.936-195.924z","fill","#365e7d"],["d","m344.019 383.695c-3.861-3.854-4.783-9.762-2.282-14.61l9.65-18.71c1.915-3.713.409-8.275-3.341-10.117l-49.256-24.198c30.978 52.255-23.517 165.929-38.923 195.9 1.448-.025 2.893-.061 4.335-.109 21.265-19.695 77.248-73.94 88.888-109.424 1.47-4.482.271-9.405-3.067-12.737-1.865-1.863-4.017-4.012-6.004-5.995z","fill","#365e7d"],["d","m256.898 365.327-26.06 21.764 13.278 16.781h23.767l13.279-17.771z","fill","#dd636e"],[1,"responsive-table__body__text","responsive-table__body__text--types"],[1,"responsive-table__body__text","responsive-table__body__text--update"],["href","#",3,"ngClass","click"]],template:function(i,s){i&1&&(de(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr",3)(4,"th",4)(5,"input",5),Rs("ngModelChange",function(a){return Ds(s.nameFilter,a)||(s.nameFilter=a),a}),he()(),de(6,"th",4),lr(7,"input",6),he(),de(8,"th",4)(9,"input",7),Rs("ngModelChange",function(a){return Ds(s.classFilter,a)||(s.classFilter=a),a}),he()(),de(10,"th",4)(11,"input",8),Rs("ngModelChange",function(a){return Ds(s.dateFilter,a)||(s.dateFilter=a),a}),he()(),de(12,"th",4)(13,"button",9),un("click",function(){return s.filterData()}),We(14,"Filter"),he(),de(15,"button",10),un("click",function(){return s.resetData()}),We(16,"Reset"),he()()()(),de(17,"thead",2)(18,"tr",3)(19,"th",4),We(20,"Name "),lr(21,"i",11),he(),de(22,"th",4),We(23,"Roll Number "),he(),de(24,"th",12),We(25,"Class Name"),he(),de(26,"th",13),We(27,"TimeStamp"),he()()(),de(28,"tbody",14),Sl(29,ux,29,7,"tr",15),he(),de(30,"thead",2)(31,"tr",3)(32,"th",16)(33,"div",17)(34,"a",18),un("click",function(){return s.goToPage(s.currentPage-1)}),We(35,"\u2190"),he(),Sl(36,hx,2,4,"a",19),de(37,"a",20),un("click",function(){return s.goToPage(s.currentPage+1)}),We(38,"\u2192"),he()()()()()()()),i&2&&(mt(5),As("ngModel",s.nameFilter),mt(4),As("ngModel",s.classFilter),mt(2),As("ngModel",s.dateFilter),mt(18),Ts("ngForOf",s.displayData),mt(7),Ts("ngForOf",s.counter(s.totalPages)))},dependencies:[Gf,qf,zf,jf,nS,dl,Z_,vf],styles:['@charset "UTF-8";@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLGT9Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLGT9Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}html[_ngcontent-%COMP%]{font-size:10px}body[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;font-family:Poppins,sans-serif;color:#141a4e;background-color:#f2f6f9;font-size:1.6rem}.container[_ngcontent-%COMP%]{width:100%;max-width:1140px;margin:0 auto;padding:0 15px 40px}.filter[_ngcontent-%COMP%]{background-color:#fff;border:1px solid var(--border-primary)}[_ngcontent-%COMP%]::placeholder{text-align:center}.dropdown-arrow[_ngcontent-%COMP%]{height:0;width:0;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid #333;position:relative;top:45px;left:350px}.responsive-table[_ngcontent-%COMP%]{background-color:#fefefe;border-collapse:collapse;border-radius:10px;box-shadow:0 0 10px #00000005;width:100%;margin:2rem 0;overflow:hidden}.responsive-table__row[_ngcontent-%COMP%]{display:grid;border-bottom:1px solid #edeef2;padding:0 1.5rem}@media (min-width: 768px){.responsive-table__row[_ngcontent-%COMP%]{grid-template-columns:2fr 1fr 2fr 2fr 1fr}}@media (min-width: 768px) and (max-width: 991px){.responsive-table__row[_ngcontent-%COMP%]{grid-template-columns:1fr 2fr 1fr}}.responsive-table__row[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .responsive-table__row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem}.responsive-table__head[_ngcontent-%COMP%]{background-color:#e1e8f2}@media (max-width: 991px){.responsive-table__head[_ngcontent-%COMP%]{display:none}}.responsive-table__head__title[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:500;text-transform:capitalize}.responsive-table__body[_ngcontent-%COMP%]   .responsive-table__row[_ngcontent-%COMP%]{transition:.1s linear;transition-property:color,background}.responsive-table__body[_ngcontent-%COMP%]   .responsive-table__row[_ngcontent-%COMP%]:last-child{border-bottom:none}.responsive-table__body[_ngcontent-%COMP%]   .responsive-table__row[_ngcontent-%COMP%]:hover{color:#fff;background-color:#fb4f83}.responsive-table__body__text[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center}.responsive-table__body__text[_ngcontent-%COMP%]:before{margin-right:1rem;font-weight:600;text-transform:capitalize}@media (max-width: 991px){.responsive-table__body__text[_ngcontent-%COMP%]:before{content:attr(data-title) " :"}}@media (max-width: 400px){.responsive-table__body__text[_ngcontent-%COMP%]:before{width:100%;margin-bottom:1rem}}.responsive-table__body__text--name[_ngcontent-%COMP%]{font-weight:600}@media (min-width: 768px){.responsive-table__body__text--name[_ngcontent-%COMP%]:before{display:none}}@media (min-width: 768px) and (max-width: 991px){.responsive-table__body__text--name[_ngcontent-%COMP%]{grid-column:1/2;flex-direction:column}}@media (min-width: 768px) and (max-width: 991px){.responsive-table__body__text--status[_ngcontent-%COMP%], .responsive-table__body__text--types[_ngcontent-%COMP%], .responsive-table__body__text--update[_ngcontent-%COMP%]{grid-column:2/3}}@media (min-width: 768px) and (max-width: 991px){.responsive-table__body__text--country[_ngcontent-%COMP%]{grid-column:3/-1}}@media (min-width: 768px) and (max-width: 991px){.responsive-table__body__text--name[_ngcontent-%COMP%], .responsive-table__body__text--country[_ngcontent-%COMP%]{grid-row:2}}.pagination[_ngcontent-%COMP%]{display:inline-block;border-radius:10px;font-family:Anton,sans-serif}.pagination[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px;color:#577a7c;float:left;text-align:center;padding:14px 5px;text-decoration:none;width:50px}.pagination[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:not(.active){background-color:#12e8f5;color:#fff}.pagination[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#090;color:#fff}#left[_ngcontent-%COMP%]{font-size:20px;border-radius:10px 0 0 10px}#right[_ngcontent-%COMP%]{font-size:20px;border-radius:0 10px 10px 0}.up-arrow[_ngcontent-%COMP%]{height:100%;max-height:1.8rem;margin-left:1rem}.user-icon[_ngcontent-%COMP%]{width:100%;max-width:4rem;height:auto;margin-right:1rem}.status-indicator[_ngcontent-%COMP%]{display:inline-block;width:1.8rem;height:1.8rem;border-radius:50%;background:#222;margin-right:.5rem}.status-indicator--active[_ngcontent-%COMP%]{background:#25be64}.status-indicator--inactive[_ngcontent-%COMP%]{background:#dadde4}.status-indicator--new[_ngcontent-%COMP%]{background:#febf02}']});let t=e;return t})();var sS=[];var oS={providers:[Jf(sS),Wf(),Qf()]};var fx={providers:[Yf()]},aS=Uf(oS,fx);var px=()=>Kf(iS,aS),qP=px;export{qP as a};
